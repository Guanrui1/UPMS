(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{"031d":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var s=a("c973"),i=a.n(s),l=a("b5c6"),r=a("7ac0");const o="/api/Stock_ItemApplyOrderPickService";class n extends r["a"]{constructor(){super(o)}GetOrderPickApplyList(e,t,a,s,r){return i()((function*(){let i={state:e,bDate:t,eDate:a,pageIndex:s,pageSize:r};return yield l["a"].post(o+"/GetOrderPickApplyList",i)}))()}GetOrderPickApplyLines(e,t){return i()((function*(){let a={code:e,wareHouseId:t};return yield l["a"].post(o+"/GetOrderPickApplyLines",a)}))()}CreateOrderPickOut(e){return i()((function*(){return yield l["a"].post(o+"/CreateOrderPickOut",e)}))()}}},"03a3":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[s("upms-search",{attrs:{left:e.left,right:e.right}},[e._v("发料明细")]),s("div",{staticClass:"line-middle-line"}),s("div",{staticClass:"page",style:{height:e.detailPageHeight+"px",overflow:"auto",textAlign:"center"}},[0==e.detailDataList.length?s("img",{staticStyle:{height:"25vh","margin-top":"10px"},attrs:{src:a("68c4"),alt:""}}):e._e(),s("div",{style:e.detailDataListHeight},e._l(e.detailDataList,(function(t,a){return s("div",{key:a,staticStyle:{"padding-top":"10px"}},[s("q-card",{attrs:{inline:""}},[s("q-card-section",{staticClass:"cardTitle"},[s("span",{staticClass:"titleType",class:t.bgColorClass},[e._v(e._s(t.type))]),s("span",{staticClass:"fontSize-15 colorBlue"},[e._v(e._s(t.code))])]),s("q-separator",{attrs:{inset:""}}),s("lineList",{attrs:{lineList:t.detailDataList}}),s("separatorList",{attrs:{separatorList:t.formRule}})],1)],1)})),0)])],1)},i=[],l=(a("e6cf"),{components:{"upms-search":()=>Promise.resolve().then(a.bind(null,"328a")),lineList:()=>a.e(1).then(a.bind(null,"c143")),separatorList:()=>a.e(2).then(a.bind(null,"6f9c"))},computed:{detailDataListHeight(){if(this.detailDataList&&this.detailDataList.length)return{height:this.detailDataList.length*(38*(this.detailDataList[0].detailDataList.length+this.detailDataList[0].formRule.length)+32+10)+"px"}}},data(){let e=this;return{left:{icon:"navigate_before",click(){e.$router.push("/my-work")}},right:{icon:"qr_code_2",click(){}},detailDataList:[{code:"CGSQD20201011",bgColorClass:"bgPurple",type:"发料中",detailDataList:[{label:"物料编码",value:"130-089",type:"label"},{label:"领料设备",value:"胶印一号机",type:"label"}],formRule:[[{label:"规格型号",value:"1kg/桶",type:"label"},{label:"工单号",value:"2018-234",type:"label"},{label:"已发数量",value:"20",type:"input",unit:"kg"}],[{label:"工序",value:"胶印",type:"label"},{label:"申请数量",value:"20",type:"input",unit:"kg"},{label:"本次发料",value:"20",type:"input",unit:"kg"}]]},{code:"CGSQD20201011",bgColorClass:"bgPurple",type:"发料中",detailDataList:[{label:"物料编码",value:"130-089",type:"label"},{label:"领料设备",value:"胶印一号机",type:"label"}],formRule:[[{label:"规格型号",value:"1kg/桶",type:"label"},{label:"工单号",value:"2018-234",type:"label"},{label:"已发数量",value:"20",type:"input",unit:"kg"}],[{label:"工序",value:"胶印",type:"label"},{label:"申请数量",value:"20",type:"input",unit:"kg"},{label:"本次发料",value:"20",type:"input",unit:"kg"}]]}],detailPageHeight:document.body.clientHeight-77}},methods:{}}),r=l,o=(a("9eaf"),a("9ca4")),n=a("f09f"),c=a("a370"),u=a("eb85"),d=a("9c40"),h=a("b047"),p=a("5739"),m=a.n(p),g=Object(o["a"])(r,s,i,!1,null,"73ceb00c",null);t["default"]=g.exports;m()(g,"components",{QCard:n["a"],QCardSection:c["a"],QSeparator:u["a"],QBtn:d["a"],QChip:h["a"]})},"0686":function(e,t,a){},"0848":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"c-login-face"},[s("upms-header",[e._v("人脸登录")]),s("div",{staticClass:"g-center"},[s("img",{attrs:{src:a("54d9")}})]),s("div",{staticClass:"g-bottom"},[s("company-info")],1)],1)},i=[],l=(a("e6cf"),{components:{"upms-header":()=>Promise.resolve().then(a.bind(null,"0a71")),"company-info":()=>a.e(12).then(a.bind(null,"7138"))}}),r=l,o=(a("d23e"),a("9ca4")),n=Object(o["a"])(r,s,i,!1,null,"88eb4f9a",null);t["default"]=n.exports},"08a5":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%",overflow:"hidden"}},[a("upms-search",{attrs:{left:e.left,right:e.right}},[e._v("销售退货")]),a("upms-line"),a("div",{style:{height:e.contentHeight+"px"}},[a("q-input",{attrs:{"bottom-slots":"",placeholder:"请输入或扫描托盘编号"},scopedSlots:e._u([{key:"append",fn:function(){return[""!==e.applyCode?a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){e.applyCode=""}}}):e._e(),a("q-icon",{staticClass:"text-primary",attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.applyCode,callback:function(t){e.applyCode=t},expression:"applyCode"}}),a("div",{staticClass:"chip-content"},[a("span",{staticClass:"titleText"},[e._v("仓库")]),a("chip",{staticClass:"chip-house",attrs:{chipList:e.houseList,defaultCheckList:e.defaultHouseList,isRadio:!0},on:{beforeHide:e.beforeHideHouse}})],1),a("upms-line"),a("div",{staticClass:"chip-content"},[a("span",{staticClass:"titleText"},[e._v("库位")]),a("chip",{staticClass:"chip-house",attrs:{chipList:e.houseLocList,defaultCheckList:e.defaultHouseLocList,isRadio:!0},on:{beforeHide:e.beforeHideLocHouse}})],1),a("upms-line"),a("div",{staticClass:"pull-flex",style:{height:e.tabContentHeight+"px"}},[a("showChipData",{attrs:{showChipDataList:e.defaultShowChipDataList,title:"装卸组员"}}),a("upms-line"),a("div",{staticClass:"GridText"},[a("div",[e._v("共计 "),a("span",[e._v(e._s(e.sum))]),e._v(" 条")]),a("div",[e._v("选中 "),a("span",[e._v(e._s(e.selectedSum))]),e._v(" 条")])]),0==e.dataList.length?a("upms-nodata-img"):e._e(),a("div",{staticClass:"pull-item"},[a("div",{staticClass:"card-list"},[e._l(e.dataList,(function(t,s){return a("div",{directives:[{name:"ripple",rawName:"v-ripple"}],key:s,staticClass:"m-card-info",class:t.selected?"borderBlue":"",on:{click:function(a){return e.SetColor(t)}}},[a("rightCardTitle",{attrs:{titleList:t.titleList}}),a("q-separator",{attrs:{inset:""}}),a("lineList",{attrs:{lineList:t.detailDataList}}),a("separatorList",{attrs:{separatorList:t.formRule}})],1)})),a("q-spinner-dots",{attrs:{slot:"message",size:40},slot:"message"})],2)])],1),0!=e.dataList.length?a("upms-bottom-buttons",{attrs:{buttons:e.bottomButtons}}):e._e()],1),a("upms-confirm-dialog",{directives:[{name:"show",rawName:"v-show",value:e.confirmFlag,expression:"confirmFlag"}],attrs:{confirmFlag:e.confirmFlag,message:e.dialogMessage},on:{confirmDialogBack:e.ConfirmDialogBack}})],1)},i=[],l=(a("a434"),a("e6cf"),a("ddb0"),a("c973")),r=a.n(l),o=a("8527"),n=a("a190"),c=a("0ba9"),u=a("0cf9"),d=a("af36"),h=a("b5c6"),p=a("7ac0");const m="/api/Basic_WarehouseLocService";class g extends p["a"]{constructor(){super(m)}GetWarehouseListByEmpId(e,t){return r()((function*(){let a={empId:e,houseType:t};return yield h["a"].post(m+"/GetWarehouseListByEmpId",a)}))()}}let f=new c["a"],b=(new u["a"],new d["a"],new g);var v={components:{lineList:()=>a.e(1).then(a.bind(null,"c143")),separatorList:()=>a.e(2).then(a.bind(null,"6f9c")),chip:()=>a.e(4).then(a.bind(null,"6903")),selectDate:()=>a.e(5).then(a.bind(null,"bfd2")),showChipData:()=>a.e(0).then(a.bind(null,"e299")),cardTitle:()=>a.e(6).then(a.bind(null,"7b0f")),rightCardTitle:()=>a.e(3).then(a.bind(null,"959d"))},computed:{scan(){return this.$store.state.main.scan}},data(){let e=this;return{icon:"apps",selectedTab:"申请单列表",applyCode:"",left:{icon:"navigate_before",click(){e.$router.push("/my-work")}},right:{icon:"qr_code_2",click(){}},currentDate:"2",dataList:[],contentHeight:document.body.clientHeight-70,tabHeight:document.body.clientHeight-106,tabContentHeight:document.body.clientHeight-229,defaultShowChipDataList:[],showChipDataList:[],houseList:[],defaultHouseList:[],currentWareHouseList:[],houseLocList:[],defaultHouseLocList:[],currentWareHouseLocList:[],sum:0,selectedSum:0,bottomButtons:[{label:"退货完成",color:"#2196f3",click(){e.IsConfirmSaleReturnOrder()}}],buttonVisible:!0,docmHeight:document.documentElement.clientHeight,showHeight:document.documentElement.clientHeight,pageIndex:1,pageSize:5,ListObj:[],confirmFlag:!1,dialogMessage:"",currentPallet:""}},mounted(){this.GetWarehouseList(),this.GetWarehouseLocList(),window.onresize=()=>(()=>{this.showHeight=document.body.clientHeight})()},methods:{GetSaleOutOrderLineByBaleCode(e){var t=this;return r()((function*(){let e=yield f.GetSaleOutOrderLineByBaleCode(t.currentPallet);if(console.log(e),e.status){t.dataList=[];let a=e.data;t.ListObj.push(a);let s=[],i=[],l=[];i.push({label:"物料名称",value:a.ItemName}),i.push({label:"物料编码",value:a.ItemCode}),i.push({label:"发货批注",value:a.DeliveryNote}),i.push({label:"发货客户",value:a.Basic_CustomerName}),i.push({label:"出库单号",value:a.Code}),l.push([{label:"批次",value:a.BatchNumber},{label:"包装方式",value:a.PackageTypeDesc}],[{label:"规格型号",value:void 0==a.Spec?"":a.Spec},{label:"数量",value:a.RealQty,fontColor:"colorBlue"}]),s.push({code:t.currentPallet,fontColor:"colorBlue"});let r={titleList:s,detailDataList:i,formRule:l,selected:!1,Id:a.Id};t.dataList.push(r),t.sum=t.dataList.length,t.$nextTick(()=>{t.dataList.length&&(t.dataList[0].selected=!0,t.selectedSum=1)})}}))()},IsConfirmSaleReturnOrder(){if(0==this.selectedSum)return void this.showMessage({message:"至少选择一条单据"});let e=this.dataList.filter(e=>1==e.selected),t=[...this.ListObj].filter(t=>[...e].some(e=>e.Id===t.Id)),a=t.filter(e=>e.Basic_CustomerName!=t[0].Basic_CustomerName);a&&a.length?this.showMessage({message:"发货客户必须相同"}):(this.confirmFlag=!0,this.dialogMessage="是否退货?")},ConfirmDialogBack(e){this.confirmFlag=!1,e&&this.SaleReturnOrder()},SaleReturnOrder(){var e=this;return r()((function*(){let t=e.dataList.filter(e=>1==e.selected),a=[...e.ListObj].filter(e=>[...t].some(t=>t.Id===e.Id)),s=JSON.parse(JSON.stringify(a)),i=[],l=[];s.forEach(t=>{i=i.concat(t.LineList),l=l.concat(t.SerialNumberLineList),t.LineList=[],t.SerialNumberLineList=[],t.Basic_WareHouseId=e.currentWareHouseList[0].value,t.Basic_WareHouseName=e.currentWareHouseList[0].text,t.Basic_WareHouseCode=e.currentWareHouseList[0].code,t.Basic_WareHouseLocId=e.currentWareHouseLocList[0].value,t.Basic_WareHouseLocName=e.currentWareHouseLocList[0].text,t.Basic_WareHouseLocCode=e.currentWareHouseLocList[0].code});let r={saleReturnOrder:s[0],saleReturnOrderLines:i,pdaSerialNumberLineData:l};console.log(JSON.stringify(r)),console.log(r);let o=yield f.AddSaleOutOrderByDeliveryNotice(JSON.stringify(r));o.status&&(e.showMessage({message:"退货成功"}),e.dataList=[])}))()},GetWarehouseList(){let e=o["a"].getObjet(n["a"].HOUSE_INFO);e&&e.length&&(e.forEach(e=>{e.text=e.name,e.icon="apps",e.value=e.id,e.code=e.code,e.status=!1,e.class="blackBlueStatus"}),this.houseList=e,e[0].status=!0,this.defaultHouseList[0]=e[0],this.currentWareHouseList[0]=e[0])},GetWarehouseLocList(){var e=this;return r()((function*(){let t=yield b.getEntities();console.log(t),t.status&&(t.data.forEach(e=>{e.text=e.Name,e.icon="apps",e.value=e.Basic_WarehouseId,e.code=e.Code,e.status=!1,e.class="blackBlueStatus"}),e.houseLocList=t.data,t.data[0].status=!0,e.defaultHouseLocList[0]=t.data[0],e.currentWareHouseLocList[0]=t.data[0])}))()},beforeHideHouse(e){this.defaultHouseList=e,this.currentWareHouseList=e},beforeHideLocHouse(e){this.defaultHouseLocList=e,this.currentWareHouseLocList=e},removeNode(e){if(1==this.showChipDataList.length)return;let t=this.showChipDataList.findIndex(t=>t.name==e.name);this.showChipDataList.splice(t,1)},selectUser(){this.$router.push({path:"/SelectList",query:{path:"StockCreateOrderPickOut",list:this.showChipDataList,isDefault:!1}})},addBorderColor(e){this.dataList.forEach(e=>{e.selected=!1}),e.selected=!0,this.$forceUpdate(),this.$set(e,"selected",!0)},scrollIntoViewIfNeeded(){let e=this.detailDataList.findIndex(e=>1==e.selected),t=document.getElementsByClassName("detailListGridContent");window.setTimeout((function(){t[e].scrollIntoViewIfNeeded()}),0)},SetColor(e){0==e.selected?e.selected=!0:e.selected=!1,this.selectedSum=this.dataList.filter(e=>1==e.selected).length},ApplyCodeEnter(){this.GetSaleDeliveryNoticeList("",!0).then(e=>{if(e&&e.length){this.applyCode="";let t=this.dataList.filter(t=>t.titleList[0].code==e[0].Code);t&&t.length&&this.addBorderColor(t[0])}else this.applyCode="",this.GetSaleDeliveryNoticeList(),this.showMessage({message:"无此申请单"})})}},watch:{showHeight:function(){document.getElementsByClassName("detailMain");if("申请单列表"==this.selectedTab&&this.docmHeight<=this.showHeight&&""!=this.applyCode&&this.ApplyCodeEnter(),"申请单明细"==this.selectedTab){let e=document.getElementsByClassName("detailPage-card-list");this.docmHeight>this.showHeight?(this.buttonVisible=!1,e[0].style.marginBottom="0px"):(this.buttonVisible=!0,e[0].style.marginBottom="50px")}},scan:{handler(e,t){0!=e&&"0"!=e&&(this.currentPallet=e,this.GetSaleOutOrderLineByBaleCode())},deep:!0}}},L=v,C=(a("c75e"),a("9ca4")),y=a("27f9"),D=a("0016"),S=a("eb85"),w=a("8380"),k=a("9c40"),O=a("f09f"),x=a("714f"),B=a("5739"),P=a.n(B),I=Object(C["a"])(L,s,i,!1,null,"e2d73050",null);t["default"]=I.exports;P()(I,"components",{QInput:y["a"],QIcon:D["a"],QSeparator:S["a"],QSpinnerDots:w["a"],QBtn:k["a"],QCard:O["a"]}),P()(I,"directives",{Ripple:x["a"]})},"0ba9":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var s=a("c973"),i=a.n(s),l=a("b5c6"),r=a("7ac0");const o="/api/Sale_SaleOutOrderService";class n extends r["a"]{constructor(){super(o)}AddSaleOutOrderByDeliveryNotice(e){return i()((function*(){return yield l["a"].post(o+"/AddSaleOutOrderByDeliveryNotice  ",e)}))()}GetSaleOutOrderList(e,t,a,s,r,n){return i()((function*(){let i={code:e,downState:t,bDate:a,eDate:s,pageIndex:r,pageSize:n};return yield l["a"].post(o+"/GetSaleOutOrderList",i)}))()}GetSaleOutOrderLineListByParam(e,t){return i()((function*(){let a={itemInOutCode:e,sealOutWareHouseId:t};return yield l["a"].post(o+"/GetSaleOutOrderLineListByParam",a)}))()}GetSaleOutOrderLineByBaleCode(e){return i()((function*(){let t={baleCode:e};return yield l["a"].post(o+"/GetSaleOutOrderLineByBaleCode",t)}))()}}},"0bcf":function(e,t,a){},"0cf9":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var s=a("c973"),i=a.n(s),l=a("b5c6"),r=a("7ac0");const o="/api/Sale_DeliveryNoticeService";class n extends r["a"]{constructor(){super(o)}GetSaleDeliveryNoticeList(e,t,a,s,r){return i()((function*(){let i={bDate:e,eDate:t,pageIndex:a,pageSize:s,basic_CustomerId:r};return yield l["a"].post(o+"/GetSaleDeliveryNoticeList  ",i)}))()}}},"0fd4":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content",staticStyle:{height:"100%",overflow:"hidden"}},[a("upms-search",{attrs:{left:e.left,right:e.right}},[e._v("创建领料单")]),a("upms-line"),a("div",{style:{height:e.contentHeight+"px"}},[a("q-tabs",{staticClass:"text-grey",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify"},model:{value:e.selectedTab,callback:function(t){e.selectedTab=t},expression:"selectedTab"}},[a("q-tab",{attrs:{name:"申请单列表",label:"申请单列表"}}),a("q-tab",{attrs:{name:"申请单明细",label:"申请单明细"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"申请单列表"==e.selectedTab,expression:"selectedTab=='申请单列表'"}],style:{height:e.tabHeight+"px"}},[a("q-input",{attrs:{"bottom-slots":"",placeholder:"请输入或扫描申请单号"},scopedSlots:e._u([{key:"append",fn:function(){return[""!==e.applyCode?a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){e.applyCode=""}}}):e._e(),a("q-icon",{staticClass:"text-primary",attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.applyCode,callback:function(t){e.applyCode=t},expression:"applyCode"}}),a("chip",{staticClass:"state",attrs:{chipList:e.chipList,defaultCheckList:e.defaultCheckList,isShowAll:!0,height:80},on:{beforeHide:e.beforeHideStatus}}),a("upms-line"),a("selectDate",{attrs:{defaultDate:e.currentDate},on:{getCurrentData:e.getCurrentData}}),a("upms-line"),a("div",{staticClass:"pull-flex",style:{height:e.tabContentHeight+"px"}},[a("showChipData",{attrs:{showChipDataList:e.defaultShowChipDataList,title:"默认组员"}}),a("upms-line"),0==e.dataList.length?a("upms-nodata-img"):e._e(),a("div",{staticClass:"pull-item"},[a("q-pull-to-refresh",{staticClass:"card-list",staticStyle:{"margin-bottom":"0px"},on:{refresh:e.PullToRefresh}},[e._l(e.dataList,(function(t,s){return a("div",{directives:[{name:"ripple",rawName:"v-ripple"}],key:s,staticClass:"m-card-info",class:t.selected?"borderBlue":"",on:{click:function(a){return e.GetOrderPickApplyLines(t)}}},[a("rightCardTitle",{attrs:{titleList:t.titleList}}),a("q-separator",{attrs:{inset:""}}),a("lineList",{attrs:{lineList:t.detailDataList}})],1)})),a("q-spinner-dots",{attrs:{slot:"message",size:40},slot:"message"})],2)],1)],1),e._v(">\n      ")],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"申请单明细"==e.selectedTab,expression:"selectedTab=='申请单明细'"}]},[a("div",{staticClass:"chip-content"},[a("span",{staticClass:"titleText"},[e._v("发料仓库")]),a("chip",{staticClass:"chip-house",attrs:{chipList:e.houseList,defaultCheckList:e.defaultHouseList,isRadio:!0,height:300},on:{beforeHide:e.beforeHideHouse}})],1),a("upms-line"),a("showChipData",{attrs:{showChipDataList:e.showChipDataList,title:"装卸组员",isShowArrowRight:!0},on:{removeNode:e.removeNode,selectUser:e.selectUser}}),a("upms-line"),0==e.detailDataList.length?a("upms-nodata-img"):e._e(),a("div",{staticClass:"pull-item"},[a("div",{staticClass:"detailPage-card-list"},[e._l(e.detailDataList,(function(e,t){return a("div",{directives:[{name:"ripple",rawName:"v-ripple"}],key:t,staticClass:"m-card-info"},[a("cardTitle",{attrs:{titleList:e.titleList}}),a("q-separator",{attrs:{inset:""}}),a("lineList",{attrs:{lineList:e.detailDataList}}),a("separatorList",{attrs:{separatorList:e.formRule}})],1)})),0!=e.detailDataList.length&&e.buttonVisible?a("upms-bottom-buttons",{attrs:{buttons:e.bottomButtons}}):e._e()],2)])],1)],1),a("upms-confirm-dialog",{directives:[{name:"show",rawName:"v-show",value:e.confirmFlag,expression:"confirmFlag"}],attrs:{confirmFlag:e.confirmFlag,message:e.dialogMessage},on:{confirmDialogBack:e.ConfirmDialogBack}})],1)},i=[],l=(a("a434"),a("e6cf"),a("ddb0"),a("c973")),r=a.n(l),o=a("8527"),n=a("a190"),c=a("d2b7"),u=a("031d");let d=new u["a"];var h={components:{lineList:()=>a.e(1).then(a.bind(null,"c143")),separatorList:()=>a.e(2).then(a.bind(null,"6f9c")),chip:()=>a.e(4).then(a.bind(null,"6903")),selectDate:()=>a.e(5).then(a.bind(null,"bfd2")),showChipData:()=>a.e(0).then(a.bind(null,"e299")),cardTitle:()=>a.e(6).then(a.bind(null,"7b0f")),rightCardTitle:()=>a.e(3).then(a.bind(null,"959d"))},data(){let e=this;return{icon:"apps",selectedTab:"申请单列表",applyCode:"",dateSelection:"two",left:{icon:"navigate_before",click(){e.$router.push("/my-work")}},right:{icon:"qr_code_2",click(){}},currentDate:"2",dataList:[],detailDataList:[],contentHeight:document.body.clientHeight-70,tabHeight:document.body.clientHeight-106,tabContentHeight:document.body.clientHeight-269,chipList:[{class:"blueStatus",icon:"alarm",text:"待发料",value:"40",status:!0},{class:"purpleStatus",icon:"work",text:"发料中",value:"50",status:!0},{class:"greenStatus",icon:"done",text:"已发料",value:"60",status:!0}],defaultCheckList:[{icon:"apps",text:"全部单据",value:"",class:"blackBlueStatus"}],currentSelectDate:{bDate:"",eDate:""},defaultShowChipDataList:[],showChipDataList:[],houseList:[],defaultHouseList:[],currentWareHouseList:[],bottomButtons:[{label:"创建出库单",color:"#2196f3",click(){e.IsConfirmCreateOrderPickOut()}}],buttonVisible:!0,docmHeight:document.documentElement.clientHeight,showHeight:document.documentElement.clientHeight,pageIndex:1,pageSize:5,confirmFlag:!1,dialogMessage:""}},mounted(){this.GetWarehouseList(),window.onresize=()=>(()=>{this.showHeight=document.body.clientHeight})()},methods:{GetStockItemApplyOrderList(e,t){var a=this;return r()((function*(){if(!e&&!t&&a.dataList.length)return;let s="",i=a.chipList.filter(e=>1==e.status);i.length!=a.chipList.length&&(i.forEach(e=>{s+=e.value+","}),s=s.substring(0,s.length-1));let l=yield d.GetOrderPickApplyList(s,a.currentSelectDate.bDate,a.currentSelectDate.eDate,a.pageIndex,a.pageSize);if(console.log(l),l.status){a.dataList=[];let e=l.data.List;if(e&&e.length){if(e.forEach(e=>{let t=[],s=[],i=void 0==e.BillDate?"":e.BillDate.substring(0,10);switch(s.push({label:"申请部门",value:void 0==e.DeptName?"":e.DeptName}),s.push({label:"申请日期",value:i}),s.push({label:"申请人员",value:void 0==e.EmpApplyName?"":e.EmpApplyName}),e.StatDesc){case"待发料":e.bgColorClass="bgBlue";break;case"发料中":e.bgColorClass="bgPurple";break;case"已发料":e.bgColorClass="bgGreen";break;default:break}t.push({code:null==e.Code?"":e.Code,type:e.StatDesc,bgColorClass:e.bgColorClass});let l={titleList:t,detailDataList:s,selected:!1,Code:e.Code};a.dataList.push(l)}),t)return e;a.$nextTick(()=>{a.dataList.length&&(a.dataList[0].selected=!0)})}}}))()},GetOrderPickApplyLines(e){var t=this;return r()((function*(){void 0!=e&&t.addBorderColor(e),t.selectedTab="申请单明细";let a=t.dataList.filter(e=>1==e.selected),s=yield d.GetOrderPickApplyLines(a[0].titleList[0].code,t.currentWareHouseList[0].id);if(s.status){t.detailDataList=[];let e=s.data;e&&e.length&&e.forEach(e=>{let a=[],s=[],i=[];switch(s.push({label:"物料编码",value:e.Basic_ItemCode}),s.push({label:"领料设备",value:void 0==e.Basic_MachineName?"":e.Basic_MachineName}),i.push([{label:"规格型号",value:void 0==e.Spec?"":e.Spec},{label:"工单号",value:e.Order_WorkOrderCode},{label:"已发数量",value:e.RealQty,fontColor:"colorBlue",unit:e.Basic_UnitMainCode}],[{label:"工序",value:e.Basic_ProcessName},{label:"申请数量",value:e.Qty,fontColor:"colorBlue",unit:e.Basic_UnitMainCode},{label:"本次发料",value:c["a"].sub(parseFloat(e.Qty),parseFloat(e.RealQty)),type:"number",unit:e.Basic_UnitMainCode}]),e.LineStatDesc){case"待发料":e.bgColorClass="bgBlue";break;case"发料中":e.bgColorClass="bgPurple";break;case"已发料":e.bgColorClass="bgGreen";break;default:break}a.push({type:e.LineStatDesc,code:e.Basic_ItemName,bgColorClass:e.bgColorClass});let l={titleList:a,detailDataList:s,formRule:i,LineId:e.LineId};t.detailDataList.push(l),console.log(t.detailDataList)})}}))()},IsConfirmCreateOrderPickOut(){this.confirmFlag=!0,this.dialogMessage="是否创建出库单?"},ConfirmDialogBack(e){this.confirmFlag=!1,e&&this.CreateOrderPickOut()},CreateOrderPickOut(){var e=this;return r()((function*(){if(0==e.detailDataList.length)return void e.showMessage({message:"至少选择一条单据"});let t=[];e.detailDataList.forEach(e=>{t.push({LineId:e.LineId,SendQty:e.formRule[1][2].value})});let a=e.currentWareHouseList[0].id,s={wareHouseId:a,orderPickData:t},i=yield d.CreateOrderPickOut(JSON.stringify(s));i.status&&e.$router.push({name:"PDAStockOrderPickOut",params:{isApplyOrderJump:!0,defaultHouseList:e.defaultHouseList,defaultShowChipDataList:e.defaultShowChipDataList}})}))()},GetWarehouseList(){let e=o["a"].getObjet(n["a"].HOUSE_INFO);e&&e.length&&(e.forEach(e=>{e.text=e.name,e.icon="apps",e.value=e.id,e.status=!1,e.class="blackBlueStatus"}),this.houseList=e,e[0].status=!0,this.defaultHouseList[0]=e[0],this.currentWareHouseList[0]=e[0])},removeNode(e){if(1==this.showChipDataList.length)return;let t=this.showChipDataList.findIndex(t=>t.name==e.name);this.showChipDataList.splice(t,1)},selectUser(){this.$router.push({path:"/SelectList",query:{path:"StockCreateOrderPickOut",list:this.showChipDataList,isDefault:!1}})},getCurrentData(e,t){this.currentDate=t,this.currentSelectDate=e,this.GetStockItemApplyOrderList(!0)},beforeHideStatus(){this.GetStockItemApplyOrderList(!0)},beforeHideHouse(e){this.defaultHouseList=e,this.currentWareHouseList=e,this.GetOrderPickApplyLines()},addBorderColor(e){this.dataList.forEach(e=>{e.selected=!1}),e.selected=!0,this.$forceUpdate(),this.$set(e,"selected",!0)},scrollIntoViewIfNeeded(){let e=this.detailDataList.findIndex(e=>1==e.selected),t=document.getElementsByClassName("detailListGridContent");window.setTimeout((function(){t[e].scrollIntoViewIfNeeded()}),0)},PullToRefresh(e){this.dataList=[],setTimeout(()=>{this.pageIndex=1,this.pageSize=5,this.GetStockItemApplyOrderList(!0),e()},1e3)},loadMoreXGB:function(e,t){this.page=e,this.$http.get("/mobile/campusmessage/getxgbmessagelist",{params:{limit:10,currentPage:e}}).then(e=>{console.log(e),0===e.data.messagelist.length&&this.$refs.infiniteScrollXGB.stop();for(let a of e.data.messagelist){let e={title:a.Title,detail:a.InfoContent,MsgID:a.MsgID};this.news.XGB.push(e),t()}})},ApplyCodeEnter(){this.GetStockItemApplyOrderList("",!0).then(e=>{if(e&&e.length){this.applyCode="";let t=this.dataList.filter(t=>t.titleList[0].code==e[0].Code);t&&t.length&&this.addBorderColor(t[0])}else this.applyCode="",this.GetStockItemApplyOrderList(),this.showMessage({message:"无此申请单"})})}},activated(){0==this.$route.query.isDefault?(this.selectedTab="申请单明细",this.showChipDataList=this.$route.query.list):(this.defaultShowChipDataList=this.$route.query.list,this.showChipDataList=this.$route.query.list)},watch:{showHeight:function(){document.getElementsByClassName("detailMain");if("申请单列表"==this.selectedTab&&this.docmHeight<=this.showHeight&&""!=this.applyCode&&this.ApplyCodeEnter(),"申请单明细"==this.selectedTab){let e=document.getElementsByClassName("detailPage-card-list");this.docmHeight>this.showHeight?(this.buttonVisible=!1,e[0].style.marginBottom="0px"):(this.buttonVisible=!0,e[0].style.marginBottom="50px")}}}},p=h,m=(a("d3a9b"),a("9ca4")),g=a("429b"),f=a("7460"),b=a("27f9"),v=a("0016"),L=a("59d7"),C=a("eb85"),y=a("8380"),D=a("9c40"),S=a("f09f"),w=a("714f"),k=a("5739"),O=a.n(k),x=Object(m["a"])(p,s,i,!1,null,"1feb5157",null);t["default"]=x.exports;O()(x,"components",{QTabs:g["a"],QTab:f["a"],QInput:b["a"],QIcon:v["a"],QPullToRefresh:L["a"],QSeparator:C["a"],QSpinnerDots:y["a"],QBtn:D["a"],QCard:S["a"]}),O()(x,"directives",{Ripple:w["a"]})},"12be":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("upms-header",[e._v(e._s(e.menu.MenuDisplayName))]),e.menu.Children&&0!==e.menu.Children.length?a("div",{staticClass:"c-content"},e._l(e.menu.Children,(function(e,t){return a("upms-menu",{key:t,attrs:{data:e}})})),1):e._e()],1)},i=[],l=(a("e6cf"),{computed:{menu(){return this.$store.state.main.currentMenu}},components:{"upms-header":()=>Promise.resolve().then(a.bind(null,"0a71")),"upms-menu":()=>Promise.resolve().then(a.bind(null,"f642"))}}),r=l,o=(a("994f"),a("9ca4")),n=Object(o["a"])(r,s,i,!1,null,"9c7a5736",null);t["default"]=n.exports},"135c":function(e,t,a){"use strict";var s=a("65a1"),i=a.n(s);i.a},1660:function(e,t,a){},1725:function(e,t,a){},"1f3c":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-pull-item"},[a("upms-search",{attrs:{left:e.left,right:e.right}},[e._v("AGV拉料")]),a("upms-line"),e.showChipDataSeen?a("showChipData",{attrs:{showChipDataList:e.showChipDataList,title:"起点库位",isShowArrowRight:!0},on:{removeNode:e.removeNode,selectUser:e.selectUser}}):e._e(),a("upms-line"),e.stopPosition?[a("upms-cell-item",{attrs:{title:"终点库位",value:e.stopPosition}}),a("upms-line")]:e._e(),a("upms-select",{attrs:{title:"优先级",chipList:e.chipList,defaultCheckList:e.defaultCheckList,isRadio:!0},on:{beforeHide:e.beforeSelectHide}}),a("upms-line"),a("div",{staticClass:"c-card-list"},e._l(e.cardList,(function(e,t){return a("card-info",{key:t,staticClass:"u-card-info",attrs:{cardInfo:e}})})),1),a("upms-bottom-buttons",{attrs:{buttons:e.bottomButtons}})],2)},i=[],l=(a("fb6a"),a("e6cf"),a("ddb0"),a("c973")),r=a.n(l),o=a("57bd"),n=a("22c2"),c=a("8395");const u=new o["a"],d=new n["a"],h=new c["a"];var p={components:{"upms-search":()=>Promise.resolve().then(a.bind(null,"328a")),showChipData:()=>a.e(0).then(a.bind(null,"e299")),"card-info":()=>Promise.all([a.e(7),a.e(9)]).then(a.bind(null,"58db"))},computed:{scan(){return this.$store.state.main.scan}},watch:{scan:{handler(e,t){this.showChipDataList=[{code:e,name:`${e.slice(0,1)}区${e.slice(2,4)}层${e.slice(4,6)}排${e.slice(6,8)}列`}]}}},data(){return{bottomButtons:[{label:"确认搬运",color:"#2196f3",click:this.ok}],stopPosition:"",showChipDataSeen:!1,chipList:[{id:3,text:"低"},{id:2,text:"中"},{id:1,text:"高"}],defaultCheckList:[{id:3,text:"低"}],left:{icon:"navigate_before",click:()=>{this.$router.push("/functions-all")}},right:{icon:"qr_code_scanner",isShow:!0,click(){}},showChipDataList:[],selectListData:[],cardList:[]}},methods:{ok(){var e=this;return r()((function*(){if(0===e.showChipDataList.length)return void e.showMessage({message:"当前库位为空，请扫描或重新输入!"});let t=e.showChipDataList.map(t=>({Code:t.code,Type:e.defaultCheckList[0]&&e.defaultCheckList[0]["id"]})),a=yield d.GetJob(t);a.status&&(e.cardList.unshift(...a.data),e.stopPosition=e.cardList[0]["TaskStopPosCode"])}))()},selectUser(){let e=this;this.$router.push({path:"/SelectList",query:{path:"ProductAGVPullItem",list:this.showChipDataList,isDefault:!1,contacts:e.selectListData,isSingleCheck:!0}})},removeNode(){},beforeSelectHide(e){this.defaultCheckList=e}},created(){var e=this;return r()((function*(){let[t,a]=yield Promise.all([u.GetLosInfos(),h.GetAllJobs()]);t.status&&a.status&&(t.data.forEach(t=>{t.WarehouseLocList&&e.selectListData.push(...t.WarehouseLocList)}),e.selectListData=e.selectListData.map(e=>({name:e.Name,code:e.Code,disable:!!a.data.find(t=>t.TaskStartPosCode===e.Code),status:!1})),e.cardList=a.data,e.showChipDataSeen=!0)}))()},activated(){this.$route.query.list&&this.$route.query.isFromSelectList&&(this.showChipDataList=this.$route.query.list)}},m=p,g=(a("e05e"),a("9ca4")),f=Object(g["a"])(m,s,i,!1,null,"c0c08bbe",null);t["default"]=f.exports},"22c2":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var s=a("c973"),i=a.n(s),l=a("b5c6"),r=a("7ac0");const o="/api/Stock_GetJobService";class n extends r["a"]{constructor(){super(o)}GetJob(e){return i()((function*(){let t={data:{WarehouseLocList:e}};return yield l["a"].post(o+"/GetJob",t)}))()}}},"242d":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%",overflow:"hidden"}},[a("upms-search",{attrs:{left:e.left,right:e.right}},[e._v("创建出库单")]),a("upms-line"),a("div",{style:{height:e.contentHeight+"px"}},[a("q-input",{attrs:{"bottom-slots":"",placeholder:"请输入或扫描申请单号"},scopedSlots:e._u([{key:"append",fn:function(){return[""!==e.applyCode?a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){e.applyCode=""}}}):e._e(),a("q-icon",{staticClass:"text-primary",attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.applyCode,callback:function(t){e.applyCode=t},expression:"applyCode"}}),a("upms-drop-down",{attrs:{title:"客户名称",options:e.CustomOptions},on:{popupHide:e.popupHide}}),a("upms-line"),a("selectDate",{attrs:{defaultDate:e.currentDate},on:{getCurrentData:e.getCurrentData}}),a("upms-line"),a("div",{staticClass:"pull-flex",style:{height:e.tabContentHeight+"px"}},[a("showChipData",{attrs:{showChipDataList:e.defaultShowChipDataList,title:"装卸组员"}}),a("upms-line"),a("div",{staticClass:"GridText"},[a("div",[e._v("共计 "),a("span",[e._v(e._s(e.sum))]),e._v(" 条")]),a("div",[e._v("选中 "),a("span",[e._v(e._s(e.selectedSum))]),e._v(" 条")])]),0==e.dataList.length?a("upms-nodata-img"):e._e(),a("div",{staticClass:"pull-item"},[a("q-pull-to-refresh",{staticClass:"card-list",on:{refresh:e.PullToRefresh}},[e._l(e.dataList,(function(t,s){return a("div",{directives:[{name:"ripple",rawName:"v-ripple"}],key:s,staticClass:"m-card-info",class:t.selected?"borderBlue":"",on:{click:function(a){return e.SetColor(t)}}},[a("rightCardTitle",{attrs:{titleList:t.titleList}}),a("q-separator",{attrs:{inset:""}}),a("lineList",{attrs:{lineList:t.detailDataList}}),a("separatorList",{attrs:{separatorList:t.formRule}})],1)})),a("q-spinner-dots",{attrs:{slot:"message",size:40},slot:"message"})],2)],1)],1),0!=e.dataList.length?a("upms-bottom-buttons",{attrs:{buttons:e.bottomButtons}}):e._e()],1),a("upms-confirm-dialog",{directives:[{name:"show",rawName:"v-show",value:e.confirmFlag,expression:"confirmFlag"}],attrs:{confirmFlag:e.confirmFlag,message:e.dialogMessage},on:{confirmDialogBack:e.ConfirmDialogBack}})],1)},i=[],l=(a("a434"),a("e6cf"),a("ddb0"),a("c973")),r=a.n(l),o=(a("8527"),a("a190"),a("0ba9")),n=a("0cf9"),c=a("af36");let u=new o["a"],d=new n["a"],h=new c["a"];var p={components:{lineList:()=>a.e(1).then(a.bind(null,"c143")),separatorList:()=>a.e(2).then(a.bind(null,"6f9c")),chip:()=>a.e(4).then(a.bind(null,"6903")),selectDate:()=>a.e(5).then(a.bind(null,"bfd2")),showChipData:()=>a.e(0).then(a.bind(null,"e299")),cardTitle:()=>a.e(6).then(a.bind(null,"7b0f")),rightCardTitle:()=>a.e(3).then(a.bind(null,"959d"))},data(){let e=this;return{icon:"apps",selectedTab:"申请单列表",applyCode:"",CustomList:[],currentCustomId:"",CustomOptions:[],left:{icon:"navigate_before",click(){e.$router.push("/my-work")}},right:{icon:"qr_code_2",click(){}},currentDate:"2",dataList:[],detailDataList:[],contentHeight:document.body.clientHeight-70,tabHeight:document.body.clientHeight-106,tabContentHeight:document.body.clientHeight-229,defaultCheckList:[{icon:"apps",text:"全部单据",value:"",class:"blackBlueStatus"}],currentSelectDate:{bDate:"",eDate:""},defaultShowChipDataList:[],showChipDataList:[],houseList:[],defaultHouseList:[],currentWareHouseList:[],sum:0,selectedSum:0,bottomButtons:[{label:"创建出库单",color:"#2196f3",click(){e.IsConfirmCreateSaleOutOrder()}}],buttonVisible:!0,docmHeight:document.documentElement.clientHeight,showHeight:document.documentElement.clientHeight,pageIndex:1,pageSize:5,ListObj:[],confirmFlag:!1,dialogMessage:""}},mounted(){this.GetCustomerList(),window.onresize=()=>(()=>{this.showHeight=document.body.clientHeight})()},methods:{GetSaleDeliveryNoticeList(e,t){var a=this;return r()((function*(){if(!e&&!t&&a.dataList.length)return;if(""==a.currentCustomId)return;let s=yield d.GetSaleDeliveryNoticeList(a.currentSelectDate.bDate,a.currentSelectDate.eDate,a.pageIndex,a.pageSize,a.currentCustomId);if(console.log(s),s.status){a.dataList=[];let e=s.data.List;a.ListObj=e;if(e&&e.length){if(e.forEach(e=>{let t=[],s=[],i=[];void 0==e.BillDate||e.BillDate.substring(0,10);switch(s.push({label:"物料名称",value:e.Basic_ItemName}),s.push({label:"物料编码",value:e.Basic_ItemCode}),s.push({label:"客户名称",value:e.Basic_CustomerName}),i.push([{label:"规格型号",value:void 0==e.Basic_ItemSpec?"":e.Basic_ItemSpec},{label:"包装方式",value:e.PackageTypeDesc}],[{label:"发货批注",value:e.Erp_ItemNote},{label:"数量",value:e.Qty,fontColor:"colorBlue"}]),e.StatDesc){case"待发料":e.bgColorClass="bgBlue";break;case"发料中":e.bgColorClass="bgPurple";break;case"已发料":e.bgColorClass="bgGreen";break;default:break}t.push({code:null==e.Sale_DeliveryNoticeCode?"":e.Sale_DeliveryNoticeCode,type:e.StatDesc,bgColorClass:e.bgColorClass});let l={titleList:t,detailDataList:s,formRule:i,detialid:e.detialid,selected:!1};a.dataList.push(l)}),a.sum=a.dataList.length,t)return e;a.$nextTick(()=>{a.dataList.length&&(a.dataList[0].selected=!0,a.selectedSum=1)})}}}))()},IsConfirmCreateSaleOutOrder(){this.confirmFlag=!0,this.dialogMessage="是否创建出库单?"},ConfirmDialogBack(e){this.confirmFlag=!1,e&&this.CreateSaleOutOrder()},CreateSaleOutOrder(){var e=this;return r()((function*(){if(0==e.selectedSum)return void e.showMessage({message:"至少选择一条单据"});let t=e.dataList.filter(e=>1==e.selected),a=[...e.ListObj].filter(e=>[...t].some(t=>t.detialid===e.detialid)),s={deliveryNoticeDetail:a};console.log(JSON.stringify(s));let i=yield u.AddSaleOutOrderByDeliveryNotice(JSON.stringify(s));i.status&&e.$router.push({name:"PDAStockProductOut",params:{isApplyOrderJump:!0,defaultHouseList:e.defaultHouseList,defaultShowChipDataList:e.defaultShowChipDataList}})}))()},removeNode(e){if(1==this.showChipDataList.length)return;let t=this.showChipDataList.findIndex(t=>t.name==e.name);this.showChipDataList.splice(t,1)},selectUser(){this.$router.push({path:"/SelectList",query:{path:"StockCreateOrderPickOut",list:this.showChipDataList,isDefault:!1}})},getCurrentData(e,t){this.currentDate=t,this.currentSelectDate=e,this.GetSaleDeliveryNoticeList(!0)},addBorderColor(e){this.dataList.forEach(e=>{e.selected=!1}),e.selected=!0,this.$forceUpdate(),this.$set(e,"selected",!0)},scrollIntoViewIfNeeded(){let e=this.detailDataList.findIndex(e=>1==e.selected),t=document.getElementsByClassName("detailListGridContent");window.setTimeout((function(){t[e].scrollIntoViewIfNeeded()}),0)},PullToRefresh(e){this.dataList=[],setTimeout(()=>{this.pageIndex=1,this.pageSize=5,this.GetSaleDeliveryNoticeList(!0),e()},1e3)},GetCustomerList(){var e=this;return r()((function*(){let t=yield h.getEntities();t.status&&(e.CustomList=t.data,t.data.forEach(t=>{e.CustomOptions.push(t.Name)}))}))()},popupHide(e){let t=this.CustomList.filter(t=>t.Name==e);t&&t.length&&(this.currentCustomId=t[0].Id),this.GetSaleDeliveryNoticeList()},SetColor(e){0==e.selected?e.selected=!0:e.selected=!1,this.selectedSum=this.dataList.filter(e=>1==e.selected).length},ApplyCodeEnter(){this.GetSaleDeliveryNoticeList("",!0).then(e=>{if(e&&e.length){this.applyCode="";let t=this.dataList.filter(t=>t.titleList[0].code==e[0].Code);t&&t.length&&this.addBorderColor(t[0])}else this.applyCode="",this.GetSaleDeliveryNoticeList(),this.showMessage({message:"无此申请单"})})}},watch:{showHeight:function(){document.getElementsByClassName("detailMain");if("申请单列表"==this.selectedTab&&this.docmHeight<=this.showHeight&&""!=this.applyCode&&this.ApplyCodeEnter(),"申请单明细"==this.selectedTab){let e=document.getElementsByClassName("detailPage-card-list");this.docmHeight>this.showHeight?(this.buttonVisible=!1,e[0].style.marginBottom="0px"):(this.buttonVisible=!0,e[0].style.marginBottom="50px")}}}},m=p,g=(a("d020"),a("9ca4")),f=a("27f9"),b=a("0016"),v=a("59d7"),L=a("eb85"),C=a("8380"),y=a("9c40"),D=a("f09f"),S=a("714f"),w=a("5739"),k=a.n(w),O=Object(g["a"])(m,s,i,!1,null,"40d7e856",null);t["default"]=O.exports;k()(O,"components",{QInput:f["a"],QIcon:b["a"],QPullToRefresh:v["a"],QSeparator:L["a"],QSpinnerDots:C["a"],QBtn:y["a"],QCard:D["a"]}),k()(O,"directives",{Ripple:S["a"]})},"2a32":function(e,t,a){"use strict";var s=a("7999"),i=a.n(s);i.a},"2de1":function(e,t,a){"use strict";var s=a("3741"),i=a.n(s);i.a},"2eb2":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v("\n  采购退货\n")])},i=[],l={},r=l,o=a("9ca4"),n=Object(o["a"])(r,s,i,!1,null,"70a1224e",null);t["default"]=n.exports},"2eb3":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%",display:"flex","flex-direction":"column"}},[a("upms-header",[e._v("常用功能")]),a("div",{staticStyle:{flex:"1",overflow:"scroll"}},[e._m(0),a("draggable",{model:{value:e.customMenus,callback:function(t){e.customMenus=t},expression:"customMenus"}},e._l(e.customMenus,(function(e,t){return a("div",{key:t,staticClass:"m-icon-item"},[a("upms-menu-item",{attrs:{showShadow:!1,linkable:!1,menu:e}})],1)})),0),a("div",{staticStyle:{flex:"1",overflow:"scroll"}},e._l(e.LoginByUsername.pdaMenus,(function(t,s){return a("div",{key:s},[a("div",{staticClass:"m-all-title"},[e._v(e._s(t.MenuDisplayName))]),t.Children&&0!==t.Children.length?a("div",{staticClass:"c-content"},e._l(t.Children,(function(e,t){return a("upms-menu",{key:t,attrs:{editable:"",linkable:!1,data:e}})})),1):e._e(),s!==e.LoginByUsername.pdaMenus.length-1?a("div",{staticClass:"u-line"}):e._e()])})),0)],1),a("upms-bottom-buttons",{attrs:{buttons:e.bottomButtons}})],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-upms-operate-title"},[a("div",{staticClass:"u-left"},[e._v("已选常用功能")]),a("div",{staticClass:"u-right"},[e._v("支持拖拽调整顺序")])])}],l=a("c973"),r=a.n(l),o=a("5f1d"),n=a("310e"),c=a.n(n);const u=new o["a"];var d={computed:{LoginByUsername:{get(){return this.$store.state.main.LoginByUsername},set(e){this.$store.commit("main/setLoginByUsername",e)}},customMenus:{set(e){this.$store.commit("main/setCustomMenus",e)},get(){return this.$store.state.main.customMenus}}},components:{draggable:c.a},data(){return{bottomButtons:[{label:"保存",color:"#2196f3",click:this.ok}]}},methods:{ok(){var e=this;return r()((function*(){let t=yield u.SaveUserCustomConfig({CustomMenus:e.$store.state.main.customMenus});t.status?(e.showMessage({message:"保存成功"}),e.$router.push("/my-work")):e.showMessage({message:t.message})}))()}}},h=d,p=(a("4c77"),a("9ca4")),m=Object(p["a"])(h,s,i,!1,null,"dda2a06e",null);t["default"]=m.exports},"2f84":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v("\n  送货单收货\n")])},i=[],l={},r=l,o=a("9ca4"),n=Object(o["a"])(r,s,i,!1,null,"48f52d19",null);t["default"]=n.exports},3004:function(e,t,a){},3741:function(e,t,a){},"392c":function(e,t,a){},"406b":function(e,t,a){},"44de2":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v("\n  成品入库\n")])},i=[],l={},r=l,o=a("9ca4"),n=Object(o["a"])(r,s,i,!1,null,"2c066ec9",null);t["default"]=n.exports},4542:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v("\n  采购单收货\n")])},i=[],l={},r=l,o=a("9ca4"),n=Object(o["a"])(r,s,i,!1,null,"15576f6c",null);t["default"]=n.exports},"4c77":function(e,t,a){"use strict";var s=a("0686"),i=a.n(s);i.a},"51be":function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return o}));var s=a("a190"),i=a("8527");let l={baseUrl:"",method:"",defaultBaseUrl:"",env:e.env};l.defaultBaseUrl="http://192.168.202.18/RL.WebApi.UPMS";let r=i["a"].getString(s["a"].LOCAL_STORAGE_SERVER_BASE_URL);l.baseUrl=""!=r?r:l.defaultBaseUrl;"".concat(l.baseUrl,l.method);let{baseUrl:o,method:n,defaultBaseUrl:c}=l}).call(this,a("eef6"))},"532e":function(e,t,a){},5419:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"m-login"},[s("div",{staticClass:"g-top",style:{backgroundImage:"url("+a("e377")+")"}},[s("span",{staticClass:"u-title-1"},[e._v("UPMS")]),s("span",{staticClass:"u-title-2"},[e._v("智能移动终端")])]),s("div",{staticClass:"g-center"},[s("account-input",{staticClass:"u-account",model:{value:e.account,callback:function(t){e.account=t},expression:"account"}}),s("password-input",{staticClass:"u-password",model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),s("div",{staticClass:"u-more",on:{click:e.showSettings}},[e._v("更多设置")]),s("upms-button",{staticClass:"u-login",attrs:{type:"primary"},nativeOn:{click:function(t){return e.toMainPage(t)}}},[e._v("登录")]),s("upms-button",{staticClass:"u-face-login",nativeOn:{click:function(t){return e.toLoginFace(t)}}},[e._v("人脸登录")])],1),s("div",{staticClass:"g-bottom"},[s("company-info")],1),s("q-dialog",{attrs:{persistent:""},model:{value:e.settings,callback:function(t){e.settings=t},expression:"settings"}},[s("q-card",{staticStyle:{"min-width":"350px",padding:"4px 10px 0 10px"}},[s("q-card-section",[s("div",{staticClass:"text-h6"},[e._v("服务器地址")])]),s("q-card-section",{staticClass:"q-pt-none"},[s("q-input",{attrs:{dense:"",autofocus:""},model:{value:e.serverBaseUrl,callback:function(t){e.serverBaseUrl=t},expression:"serverBaseUrl"}})],1),s("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[s("q-btn",{attrs:{flat:"",label:"恢复默认"},on:{click:e.resetSysConfig}}),s("q-btn",{attrs:{flat:"",label:"确定"},on:{click:e.saveSysConfig}})],1)],1)],1)],1)},i=[],l=(a("e6cf"),a("c973")),r=a.n(l),o=a("a190"),n=a("8527"),c=a("b5c6"),u=a("7ac0");const d="/api/userservice";class h extends u["a"]{constructor(){super(d)}loginByUsername(e,t){return r()((function*(){let a={username:e,userpwd:t,loginType:2};return yield c["a"].post(d+"/loginByUsername",a,null,{isToken:!1})}))()}logout(){return r()((function*(){return yield c["a"].post(d+"/logout")}))()}resetPassword(e){return r()((function*(){let t={userid:e};return yield c["a"].post(d+"/resetPassword",t)}))()}refeshToken(){return r()((function*(){return yield c["a"].post(d+"/refesh")}))()}sendLogs(e){return r()((function*(){}))()}faceUserAdd(e){return r()((function*(){return yield c["a"].post("/api/UserService/faceuseradd",e)}))()}GetDataPermissionOrgTree(e,t){return r()((function*(){let a={moduleId:e,moduleName:t};return yield c["a"].post("/api/UserService/GetDataPermissionOrgTree",a)}))()}}var p=a("51be");const m="/api/Basic_WarehouseService";class g extends u["a"]{constructor(){super(m)}GetWarehouseListByEmpId(){return r()((function*(){return yield c["a"].post(m+"/GetWarehouseListByEmpId")}))()}GetItemLocListById(e){return r()((function*(){let t={itemId:e};return yield c["a"].post(m+"/GetItemLocListById",t)}))()}GetItemLocListByWarehouseId(e){return r()((function*(){let t={wareHouseId:e};return yield c["a"].post(m+"/GetItemLocListByWarehouseId",t)}))()}}const f=new h;let b=new g;var v={components:{"account-input":()=>a.e(15).then(a.bind(null,"5c6e")),"password-input":()=>a.e(16).then(a.bind(null,"d2a6")),"company-info":()=>a.e(12).then(a.bind(null,"7138")),"upms-button":()=>Promise.resolve().then(a.bind(null,"db90"))},data(){return{account:"",password:"",settings:!1,serverBaseUrl:""}},created(){this.serverBaseUrl=p["a"]},methods:{toMainPage(){var e=this;return r()((function*(){const t=yield f.loginByUsername(e.account,e.password,2);if(t.status){e.$store.commit("main/setToken",t.data.UserToken),e.$store.commit("main/setLoginByUsername",t.data),e.$router.push("/my-work"),n["a"].setObject(o["a"].LOCAL_STORAGE_CUR_EMP_INFO,t.data);const a=yield b.GetWarehouseListByEmpId();let s=a.data.map(e=>({name:e.Name,id:e.Id,code:e.Code}));n["a"].setObject(o["a"].HOUSE_INFO,s)}}))()},toLoginFace(){this.$router.push("/login-face")},saveSysConfig(){n["a"].setString(o["a"].LOCAL_STORAGE_SERVER_BASE_URL,this.serverBaseUrl),window.location.reload()},resetSysConfig(){this.serverBaseUrl=p["a"],n["a"].setString(o["a"].LOCAL_STORAGE_SERVER_BASE_URL,this.serverBaseUrl),window.location.reload()},showSettings(){this.settings=!0}}},L=v,C=(a("92da"),a("9ca4")),y=a("24e8"),D=a("f09f"),S=a("a370"),w=a("27f9"),k=a("4b7e"),O=a("9c40"),x=a("5739"),B=a.n(x),P=Object(C["a"])(L,s,i,!1,null,"f03c6cb4",null);t["default"]=P.exports;B()(P,"components",{QDialog:y["a"],QCard:D["a"],QCardSection:S["a"],QInput:w["a"],QCardActions:k["a"],QBtn:O["a"]})},"54d9":function(e,t,a){e.exports=a.p+"img/head.1e973bb4.png"},5670:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v("\n  标签查询\n")])},i=[],l={},r=l,o=a("9ca4"),n=Object(o["a"])(r,s,i,!1,null,"42527062",null);t["default"]=n.exports},"57bd":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var s=a("c973"),i=a.n(s),l=a("b5c6"),r=a("7ac0");const o="/api/Stock_LocLists";class n extends r["a"]{constructor(){super(o)}GetLosInfos(){return i()((function*(){return yield l["a"].post(o+"/GetLosInfos")}))()}}},"5f1d":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var s=a("c973"),i=a.n(s),l=a("b5c6"),r=a("7ac0");const o="/api/pdaCommonService";class n extends r["a"]{constructor(){super(o)}GetUserCustomConfig(){return i()((function*(){return yield l["a"].post(o+"/GetUserCustomConfig")}))()}SaveUserCustomConfig(e){return i()((function*(){return yield l["a"].post(o+"/SaveUserCustomConfig",e)}))()}}},6154:function(e,t,a){"use strict";var s=a("532e"),i=a.n(s);i.a},"616e":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-pull-item"},[a("upms-search",{attrs:{left:e.left,right:e.right}},[e._v("库位锁定")]),a("upms-line"),e.showChipDataSeen?a("showChipData",{attrs:{showChipDataList:e.showChipDataList,title:"选择库位",isShowArrowRight:!0},on:{removeNode:e.removeNode,selectUser:e.selectUser}}):e._e(),a("upms-line"),a("upms-bottom-buttons",{attrs:{buttons:e.bottomButtons}})],1)},i=[],l=(a("fb6a"),a("e6cf"),a("ddb0"),a("c973")),r=a.n(l),o=a("57bd"),n=a("22c2"),c=a("8395"),u=a("694d");const d=new o["a"],h=(new n["a"],new c["a"]),p=new u["a"];var m={components:{"upms-search":()=>Promise.resolve().then(a.bind(null,"328a")),showChipData:()=>a.e(0).then(a.bind(null,"e299")),"card-info":()=>Promise.all([a.e(7),a.e(9)]).then(a.bind(null,"58db"))},watch:{scan:{handler(e,t){this.showChipDataList=[{code:e,name:`${e.slice(0,1)}区${e.slice(2,4)}层${e.slice(4,6)}排${e.slice(6,8)}列`}]}}},data(){return{bottomButtons:[{label:"解锁库位",color:"#2196f3",click:this.ok},{label:"锁定库位",color:"#f24853",click:this.ok}],stopPosition:"",showChipDataSeen:!1,chipList:[{id:3,text:"低"},{id:2,text:"中"},{id:1,text:"高"}],defaultCheckList:[{id:3,text:"低"}],left:{icon:"navigate_before",click:()=>{this.$router.push("/functions-all")}},right:{icon:"qr_code_scanner",isShow:!0,click(){}},showChipDataList:[],selectListData:[],cardList:[]}},methods:{ok(){var e=this;return r()((function*(){if(0===e.showChipDataList.length)return void e.showMessage({message:"当前库位为空，请扫描或重新输入!"});let t=e.showChipDataList.map(e=>({Code:e.code,State:4})),a=yield p.SetCellStatus(t);a.status&&e.showMessage({message:"锁定库位成功！"})}))()},selectUser(){let e=this;this.$router.push({path:"/SelectList",query:{path:"ProductLocLock",list:this.showChipDataList,isDefault:!1,contacts:e.selectListData,isSingleCheck:!1}})},removeNode(){},beforeSelectHide(e){this.defaultCheckList=e}},created(){var e=this;return r()((function*(){let[t,a]=yield Promise.all([d.GetLosInfos(),h.GetAllJobs()]);t.status&&a.status&&(t.data.forEach(t=>{t.WarehouseLocList&&e.selectListData.push(...t.WarehouseLocList)}),e.selectListData=e.selectListData.map(e=>({name:e.Name,code:e.Code,disable:!1,status:!1})),e.cardList=a.data,e.showChipDataSeen=!0)}))()},activated(){this.$route.query.list&&this.$route.query.isFromSelectList&&(this.showChipDataList=this.$route.query.list)}},g=m,f=(a("135c"),a("9ca4")),b=Object(f["a"])(g,s,i,!1,null,"1298caf6",null);t["default"]=b.exports},"635e":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v("\n  库存查询\n")])},i=[],l={},r=l,o=a("9ca4"),n=Object(o["a"])(r,s,i,!1,null,"bf8ae92a",null);t["default"]=n.exports},"65a1":function(e,t,a){},6644:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("upms-search",[e._v("我的工作")]),a("common-functions"),a("all-functions"),a("my-notice")],1)},i=[],l=(a("e6cf"),{components:{"upms-search":()=>Promise.resolve().then(a.bind(null,"328a")),"common-functions":()=>a.e(18).then(a.bind(null,"e22c")),"all-functions":()=>a.e(17).then(a.bind(null,"6faa")),"my-notice":()=>a.e(20).then(a.bind(null,"820d"))}}),r=l,o=a("9ca4"),n=Object(o["a"])(r,s,i,!1,null,"61ec168e",null);t["default"]=n.exports},"694d":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var s=a("c973"),i=a.n(s),l=a("b5c6"),r=a("7ac0");const o="/api/Stock_LocStatusService";class n extends r["a"]{constructor(){super(o)}SetCellStatus(e){return i()((function*(){let t={data:{WarehouseLocList:e}};return yield l["a"].post(o+"/SetCellStatus",t)}))()}}},"706a":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%",overflow:"hidden"}},[e.scanMovePageDialog?e._e():a("div",{staticClass:"content",staticStyle:{height:"100%",overflow:"hidden"}},[a("upms-search",{attrs:{left:e.left,right:e.right}},[e._v("销售出库")]),a("upms-line"),a("div",{style:{height:e.contentHeight+"px"}},[a("q-tabs",{staticClass:"text-grey",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify"},model:{value:e.selectedTab,callback:function(t){e.selectedTab=t},expression:"selectedTab"}},[a("q-tab",{attrs:{name:"出库单列表",label:"出库单列表"}}),a("q-tab",{attrs:{name:"出库单明细",label:"出库单明细"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"出库单列表"==e.selectedTab,expression:"selectedTab=='出库单列表'"}],style:{height:e.tabHeight+"px"}},[a("q-input",{attrs:{"bottom-slots":"",placeholder:"请输入或扫描出库单号"},scopedSlots:e._u([{key:"append",fn:function(){return[""!==e.text?a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){e.text=""}}}):e._e(),a("q-icon",{staticClass:"text-primary",attrs:{name:"search"}})]},proxy:!0}],null,!1,3801931588),model:{value:e.text,callback:function(t){e.text=t},expression:"text"}}),a("upms-line"),a("chip",{staticClass:"state",attrs:{chipList:e.chipList,defaultCheckList:e.defaultCheckList,isShowAll:!0,height:80},on:{beforeHide:e.beforeHideStatus}}),a("upms-line"),a("selectDate",{attrs:{defaultDate:e.currentDate},on:{getCurrentData:e.getCurrentData}}),a("upms-line"),a("div",{staticClass:"pull-flex",style:{height:e.tabContentHeight+"px"}},[a("showChipData",{attrs:{showChipDataList:e.defaultShowChipDataList,title:"默认组员"}}),a("upms-line"),0==e.dataList.length?a("upms-nodata-img"):e._e(),a("div",{staticClass:"pull-item"},[a("div",{staticClass:"card-list",staticStyle:{"margin-bottom":"0px"}},e._l(e.dataList,(function(t,s){return a("div",{key:s,staticClass:"m-card-info",class:t.selected?"borderBlue":"",on:{click:function(a){return e.GetSaleOutOrderLineListByParam(t)}}},[a("rightCardTitle",{attrs:{titleList:t.titleList}}),a("q-separator",{attrs:{inset:""}}),a("lineList",{attrs:{lineList:t.detailDataList}})],1)})),0)])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"出库单明细"==e.selectedTab,expression:"selectedTab=='出库单明细'"}],style:{height:e.tabHeight+"px"}},[a("q-input",{attrs:{"bottom-slots":"",placeholder:"请输入或扫描批次标签"},scopedSlots:e._u([{key:"append",fn:function(){return[""!==e.text?a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){e.text=""}}}):e._e(),a("q-icon",{staticClass:"text-primary",attrs:{name:"search"}})]},proxy:!0}],null,!1,3801931588),model:{value:e.text,callback:function(t){e.text=t},expression:"text"}}),a("div",{staticClass:"pull-flex",style:{height:e.tabHeight-52+"px"}},[a("showChipData",{attrs:{showChipDataList:e.showChipDataList,title:"装卸组员",isShowArrowRight:!0},on:{removeNode:e.removeNode,selectUser:e.selectUser}}),0==e.detailData.length?a("upms-nodata-img"):e._e(),a("div",{staticClass:"pull-item"},[a("div",{staticClass:"card-list"},e._l(e.detailData,(function(t,s){return a("div",{directives:[{name:"ripple",rawName:"v-ripple"}],key:s,staticClass:"m-card-info",class:t.selected?"borderBlue":""},[a("cardTitle",{attrs:{titleList:t.titleList}}),a("q-separator",{attrs:{inset:""}}),a("lineList",{attrs:{lineList:t.detailDataList}}),a("separatorList",{attrs:{separatorList:t.formRule}}),t.MakeTrayCodeData.length>0?a("upms-table",{staticStyle:{"margin-top":"5px"},attrs:{columns:e.MakeTrayCodeColumns,data:t.MakeTrayCodeData,showItemBorder:!1}}):e._e(),a("div",{staticClass:"scanBtn"},[a("q-btn",{staticClass:"btn-width",attrs:{rounded:"",color:"primary",size:"sm",label:"出库扫描"},on:{click:function(a){return e.OpenScanOutWarehousePage(t)}}})],1)],1)})),0)])],1),0!=e.detailData.length?a("upms-bottom-buttons",{attrs:{buttons:e.bottomButtons}}):e._e()],1)],1)],1),e.scanMovePageDialog?a("div",{staticStyle:{height:"100%",overflow:"hidden"}},[a("div",{staticClass:"content",staticStyle:{height:"100%",overflow:"hidden"}},[a("upms-search",{attrs:{left:e.scanOutWarehousePageDialogleft,right:e.scanOutWarehousePageDialogright}},[e._v("出库扫描")]),a("div",{style:{height:e.contentHeight+"px"}},[a("q-input",{attrs:{"bottom-slots":"",placeholder:"请输入或扫描批次标签"},scopedSlots:e._u([{key:"append",fn:function(){return[""!==e.text?a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){e.text=""}}}):e._e(),a("q-icon",{staticClass:"text-primary",attrs:{name:"search"}})]},proxy:!0}],null,!1,3801931588),model:{value:e.text,callback:function(t){e.text=t},expression:"text"}}),a("div",{staticClass:"pull-flex",style:{height:e.contentHeight-52+"px"}},[a("modeSelect",{attrs:{text:"扫描模式",modeSelection:e.modeSelection,options:e.options},on:{getModeSelectionData:e.getModeSelectionData}}),a("gridText",{attrs:{GridTextList:e.GridTextList}}),0==e.moveDialogDataList.length?a("upms-nodata-img"):e._e(),e.moveDialogDataList.length?a("div",{staticClass:"pull-item"},[a("div",{staticClass:"card-list"},[a("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"m-card-info"},e._l(e.moveDialogDataList,(function(e,t){return a("div",{key:t,class:e.selected?"pseparatorBorderBlue":"pseparator"},[a("separatorList",{attrs:{separatorList:e.arr}})],1)})),0)])]):e._e()],1)],1),0!=e.moveDialogDataList.length?a("upms-bottom-buttons",{attrs:{buttons:e.dialogBottomButtons}}):e._e()],1)]):e._e(),a("upms-confirm-dialog",{directives:[{name:"show",rawName:"v-show",value:e.confirmFlag,expression:"confirmFlag"}],attrs:{confirmFlag:e.confirmFlag,message:e.dialogMessage},on:{confirmDialogBack:e.ConfirmDialogBack}})],1)},i=[],l=(a("a434"),a("e6cf"),a("c973")),r=a.n(l),o=a("8527"),n=a("a190"),c=a("d2b7"),u=a("980a"),d=a("0ba9"),h=a("fe8d");let p=new u["a"],m=new d["a"];new h["a"];var g={computed:{scan(){return this.$store.state.main.scan}},components:{lineList:()=>a.e(1).then(a.bind(null,"c143")),separatorList:()=>a.e(2).then(a.bind(null,"6f9c")),chip:()=>a.e(4).then(a.bind(null,"6903")),selectDate:()=>a.e(5).then(a.bind(null,"bfd2")),showChipData:()=>a.e(0).then(a.bind(null,"e299")),cardTitle:()=>a.e(6).then(a.bind(null,"7b0f")),rightCardTitle:()=>a.e(3).then(a.bind(null,"959d")),gridText:()=>a.e(8).then(a.bind(null,"d26d")),modeSelect:()=>a.e(10).then(a.bind(null,"c302"))},data(){let e=this;return{selectedTab:"出库单列表",text:"",icon:"apps",left:{icon:"navigate_before",click(){e.$router.push("/my-work")}},right:{icon:"qr_code_2",click(){}},currentDate:"2",dataList:[],detailData:[],contentHeight:document.body.clientHeight-70,tabHeight:document.body.clientHeight-106,tabContentHeight:document.body.clientHeight-319,unreceivedNum:30,receivedNum:20,totalNum:50,chipList:[{class:"blueStatus",icon:"alarm",text:"待发料",value:"1",status:!0},{class:"purpleStatus",icon:"work",text:"发料中",value:"2",status:!0},{class:"greenStatus",icon:"done",text:"已发料",value:"3",status:!0}],defaultCheckList:[{icon:"apps",text:"全部单据",value:"1,2,3",class:"blackBlueStatus"}],currentSelectDate:{bDate:"",eDate:""},defaultShowChipDataList:[],showChipDataList:[],houseList:[],defaultHouseList:[],currentWareHouseList:[],currentPageData:[],bottomButtons:[{label:"审核",color:"#FF6B88",click(){e.ShowPostPlugin()}},{label:"出库完成",color:"#2196f3",click(){e.ScanOutWarehouseCompelete()}}],itemMoveIdList:"",MakeTrayCodeColumns:[{title:"托盘标签",key:"MakeTrayCode"},{title:"数量",key:"Qty",color:"#2196f3"}],currentPageId:"",scanOutWarehousePageDialogleft:{icon:"navigate_before",click(){e.scanMovePageDialog=!1}},scanOutWarehousePageDialogright:{icon:"qr_code_2",click(){}},scanDialogselectedTab:"出库扫描",scanMovePageDialog:!1,pickOutDetailPageDialog:!1,moveDialogDataList:[],preQtyNum:0,QtyNum:0,dialogBottomButtons:[{label:"清空",color:"#2196f3",click(){e.DialogClear()}},{label:"确认",color:"#2196f3",click(){e.DialogComplete()}}],GridTextList:[{label:"应发数量",value:""},{label:"实发数量",value:0}],options:[{label:"添加",value:"add",size:"12px"},{label:"剔除",value:"delete"},{label:"查看",value:"edit"}],modeSelection:"add",currentDialogSelectData:[],dialogMessage:"",confirmFlag:!1,MakeTrayCode:"",currentPageLocList:[],ItemViewList:[]}},mounted(){this.GetWarehouseList()},methods:{GetSaleOutOrderList(e,t){var a=this;return r()((function*(){if(!e&&!t&&a.dataList.length)return;let s="",i=a.chipList.filter(e=>1==e.status);i.length&&(i.forEach(e=>{s+=e.value+","}),s=s.substring(0,s.length-1));let l=yield m.GetSaleOutOrderList("",s,a.currentSelectDate.bDate,a.currentSelectDate.eDate,1,10);if(console.log(l),l.status){a.dataList=[];let e=l.data.List;e&&e.length&&e.forEach(e=>{let t=[],s=[],i=void 0==e.InOutDate?"":e.InOutDate.substring(0,10);switch(s.push({label:"客户名称",value:e.CustomerName}),s.push({label:"单据日期",value:i}),e.StatDesc){case"待拣货":e.bgColorClass="bgBlue";break;case"拣货中":e.bgColorClass="bgPurple";break;case"已拣货":e.bgColorClass="bgGreen";break;default:break}t.push({code:null==e.Code?"":e.Code,type:e.StatDesc,bgColorClass:e.bgColorClass});let l={titleList:t,detailDataList:s,selected:!1};a.dataList.push(l),a.$nextTick(()=>{a.dataList[0].selected=!0})})}}))()},GetSaleOutOrderLineListByParam(e){var t=this;return r()((function*(){t.dataList.forEach(e=>{e.selected=!1}),e.selected=!0;let a=t.dataList.filter(e=>1==e.selected);t.selectedTab="出库单明细";let s=yield m.GetSaleOutOrderLineListByParam(a[0].titleList[0].code);if(console.log(s),s.status){t.detailData=[];let e=s.data;t.currentPageData=s.data;e&&e.length&&(e.forEach(e=>{t.itemMoveIdList=e.MainId;let a=[],s=[],i=[];switch(t.currentPageId=e.Id,s.push({label:"发货通知单",value:void 0==e.DeliveryCode?"":e.DeliveryCode.substr(0,e.DeliveryCode.length-1)}),s.push({label:"物料编码",value:e.ItemCode}),s.push({label:"批次",value:e.BatchNumber}),s.push({label:"成品批注",value:e.DeliveryNote}),i.push([{label:"包装方式",value:e.PackageTypeDesc},{label:"应出数量",value:e.PreQty,fontColor:"colorBlue"}],[{label:"规格型号",value:void 0==e.Spec?"":e.Spec},{label:"实出数量",value:void 0==e.RealQty?0:e.RealQty,fontColor:"colorBlue"}]),e.StatDesc){case"待拣货":e.bgColorClass="bgBlue";break;case"拣货中":e.bgColorClass="bgPurple";break;case"已拣货":e.bgColorClass="bgGreen";break;default:break}a.push({code:e.ItemName,type:e.StatDesc,bgColorClass:e.bgColorClass});let l=[],r=e.SerialNumberLineList;r&&r.length&&r.forEach(e=>{l.push({MakeTrayCode:e.MakeTrayCode,Qty:e.Qty})});let o={titleList:a,detailDataList:s,formRule:i,MakeTrayCodeData:l,ItemId:e.ItemId,SerialNumberLineList:e.SerialNumberLineList,Id:e.Id};t.detailData.push(o),t.GridTextList[0].value=e.PreQty}),t.$nextTick(()=>{t.detailData[0].selected=!0}))}}))()},ScanOutWarehouseCompelete(){var e=this;return r()((function*(){let t=e.currentPageData.filter(e=>void 0==e.LineList[0].Qty);if(t&&t.length)return void e.showMessage({message:"请先出库扫描"});e.currentPageData.forEach(t=>{e.detailData.forEach(e=>{t.Id==e.Id&&(t.RealQty=e.formRule[1][1].value,e.formRule[1][1].value>=t.LineList[0].Qty&&(t.LineList[0].DownShelfStat=3),e.formRule[1][1].value<t.LineList[0].Qty&&(0==e.formRule[1][1].value?t.LineList[0].DownShelfStat=1:t.LineList[0].DownShelfStat=2))})});let a=JSON.parse(JSON.stringify(e.currentPageData)),s=[],i=[];a.forEach(e=>{s=s.concat(e.LineList);let t=e.pdaSerialNumberLineData;t&&t.length&&(i=i.concat(t),e.LineList=[],e.pdaSerialNumberLineData=[])});let l={saleOutOrder:a,saleOutOrderLines:s,pdaSerialNumberLineData:i};console.log(l),console.log(JSON.stringify(l))}))()},ShowPostPlugin(){let e=this.detailData.filter(e=>0==e.formRule[1][1].value);if(e&&e.length)return void this.showMessage({message:"请先出库再审核"});let t=this.detailData.filter(e=>e.formRule[1][1].value!=e.formRule[0][1].value);t&&t.length?this.showMessage({message:"发料数量与完成数量必须相等才可以审核"}):(this.confirmFlag=!0,this.dialogMessage="是否审核?")},ConfirmDialogBack(e){this.confirmFlag=!1,e&&this.SubmitPost()},SubmitPost(){var e=this;return r()((function*(){let t=[];t.push(e.itemMoveIdList);let a={itemMoveIdList:t};console.log(a);let s=yield m.ItemMovePostOperate(JSON.stringify(a));s.status&&(e.showMessage({message:"审核成功"}),e.GetSaleOutOrderList(),e.selectedTab="出库单列表")}))()},GetWarehouseList(){let e=o["a"].getObjet(n["a"].HOUSE_INFO);e&&e.length&&(e.forEach(e=>{e.text=e.name,e.icon="apps",e.value=e.id,e.status=!1,e.class="blackBlueStatus"}),this.houseList=e,e[0].status=!0,this.defaultHouseList[0]=e[0],this.currentWareHouseList[0]=e[0])},GetSingleItemViewList(e){var t=this;return r()((function*(){let a=yield p.GetSingleItemViewList(e);if(a.status){let s=t.detailData.filter(e=>1==e.selected);if(s&&s.length)if(s[0].ItemId==a.data.ItemId&&s[0].formRule[0][0].value==a.data.PackageTypeDesc&&s[0].detailDataList[3].value==a.data.ProductPostil){let s=t.moveDialogDataList.filter(t=>t.arr[0][0].value==e);s&&s.length?t.showMessage({message:"此托盘标签已存在"}):(t.MakeTrayCode=e,t.AddDialogSeparatorList(a.data))}else t.showMessage({message:"物料、发货批注、包装方式与出库单明细行不一致"})}else t.showMessage({message:a.message})}))()},OpenScanOutWarehousePage(e){var t=this;return r()((function*(){t.ItemViewList=[],t.moveDialogDataList=[],e.SerialNumberLineList&&e.SerialNumberLineList.length&&e.SerialNumberLineList.forEach(e=>{t.AddDialogSeparatorList(e)}),t.scanMovePageDialog=!0}))()},AddDialogSeparatorList(e){e&&Object.keys(e).length>0&&this.ItemViewList.push(e),this.moveDialogDataList.forEach(e=>{e.selected=!1});let t={selected:!0,arr:[]};t.arr.push([{label:"标签",value:e.MakeTrayCode},{label:"包装方式",value:e.PackageTypeDesc}],[{label:"数量",value:e.Qty},{label:"生产日期",value:void 0==e.ProductionTime?"":e.ProductionTime.substring(0,10)}]),this.moveDialogDataList.unshift(t),this.getQty()},DeleteDialogSeparatorList(){this.ItemViewList.forEach((e,t)=>{e.Code==this.MakeTrayCode&&this.ItemViewList.splice(t,1)}),this.moveDialogDataList.forEach((e,t)=>{e.arr[0][0].value==this.MakeTrayCode&&this.moveDialogDataList.splice(t,1)}),this.getQty()},EditDialogSeparatorList(){this.moveDialogDataList.forEach((e,t)=>{e.arr[0][0].value==this.MakeTrayCode?e.selected=!0:e.selected=!1})},getQty(){let e=0;this.moveDialogDataList.forEach(t=>{e=c["a"].add(e,t.arr[1][0].value)}),this.GridTextList[1].value=e},DialogComplete(){if(this.MakeTrayCodeData=[],!this.moveDialogDataList||!this.moveDialogDataList.length)return void this.showMessage({message:"至少扫描一条单据"});let e=this.detailData.filter(e=>1==e.selected),t=this.currentPageData.filter(t=>t.Id==e[0].Id),a=t[0].LineList;a[0].Qty=this.GridTextList[1].value,e[0].formRule[1][1].value=this.GridTextList[1].value,e[0].MakeTrayCodeData=[],this.moveDialogDataList.forEach(t=>{e[0].MakeTrayCodeData.push({MakeTrayCode:t.arr[0][0].value,Qty:t.arr[1][0].value})}),this.ItemViewList.forEach(e=>{e.LineDetailId=t[0].Id}),t[0].pdaSerialNumberLineData=[],t[0].pdaSerialNumberLineData=this.ItemViewList,this.scanMovePageDialog=!1},DialogClear(){this.moveDialogDataList=[],this.getQty()},getCurrentData(e,t){this.currentDate=t,this.currentSelectDate=e,this.GetSaleOutOrderList(!0)},getModeSelectionData(e){this.modeSelection=e},beforeHideStatus(){this.GetSaleOutOrderList(!0)},beforeHideHouse(e){this.dataList=[],this.defaultHouseList=e,this.currentWareHouseList=e,this.GetSaleOutOrderList()},removeNode(e){if(1==this.showChipDataList.length)return;let t=this.showChipDataList.findIndex(t=>t.name==e.name);this.showChipDataList.splice(t,1)},selectUser(){this.$router.push({path:"/SelectList",query:{path:"StockCreateOrderPickOut",list:this.showChipDataList,isDefault:!1}})}},watch:{scan:{handler(e,t){if(0!=e&&"0"!=e){if(this.scanMovePageDialog){if("add"==this.modeSelection&&this.GetSingleItemViewList(e),"delete"==this.modeSelection)if(this.moveDialogDataList&&this.moveDialogDataList.length){let t=this.moveDialogDataList.filter(t=>t.arr[0][0].value==e);t&&t.length?(this.MakeTrayCode=e,this.DeleteDialogSeparatorList()):this.showMessage({message:"此托盘标签不存在"})}else this.showMessage({message:"请先添加数据"});if("edit"==this.modeSelection)if(this.moveDialogDataList&&this.moveDialogDataList.length){let t=this.moveDialogDataList.filter(t=>t.arr[0][0].value==e);t&&t.length?(this.MakeTrayCode=e,this.EditDialogSeparatorList()):this.showMessage({message:"此托盘标签不存在"})}else this.showMessage({message:"请先添加数据"})}}},deep:!0}},activated(){0==this.$route.query.isDefault&&(this.selectedTab="出库单明细",this.showChipDataList=this.$route.query.list)}},f=g,b=(a("baba"),a("9ca4")),v=a("429b"),L=a("7460"),C=a("27f9"),y=a("0016"),D=a("eb85"),S=a("9c40"),w=a("24e8"),k=a("b047"),O=a("66e5"),x=a("f09f"),B=a("714f"),P=a("5739"),I=a.n(P),N=Object(b["a"])(f,s,i,!1,null,"420222dc",null);t["default"]=N.exports;I()(N,"components",{QTabs:v["a"],QTab:L["a"],QInput:C["a"],QIcon:y["a"],QSeparator:D["a"],QBtn:S["a"],QDialog:w["a"],QChip:k["a"],QItem:O["a"],QCard:x["a"]}),I()(N,"directives",{Ripple:B["a"]})},7576:function(e,t,a){"use strict";var s=a("f2a3"),i=a.n(s);i.a},7999:function(e,t,a){},"7ac0":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var s=a("c973"),i=a.n(s),l=a("b5c6");class r{constructor(e){this.serviceUrl=e}getPageEntities(e=null,t=1,a=30,s=null,r=null,o=!1,n=!1,c=null,u=0){var d=this;return i()((function*(){var i={whereSql:e,pageIndex:t,pageSize:a,references:o,permissionFilter:n,orderFields:s,isDescs:r,fieldNames:c,queryType:u};return yield l["a"].post(d.serviceUrl+"/getPageEntities",i)}))()}getEntities(e=null,t=null,a=null,s=!1,r=!1,o=null,n=null){var c=this;return i()((function*(){var i={whereSql:e,references:s,permissionFilter:r,orderFields:t,isDescs:a,top:o,fieldNames:n};return yield l["a"].post(c.serviceUrl+"/getEntities",i)}))()}getEntitiesBySql(e){var t=this;return i()((function*(){var a={sql:e};return yield l["a"].post(t.serviceUrl+"/getEntitiesBySql",a)}))()}getEntityById(e,t){var a=this;return i()((function*(){var s={id:e,references:t};return yield l["a"].post(a.serviceUrl+"/getEntityById",s)}))()}getEntity(e,t){var a=this;return i()((function*(){var s={whereSql:e,references:t};return yield l["a"].post(a.serviceUrl+"/getEntity",s)}))()}addRecord(e){var t=this;return i()((function*(){return yield l["a"].post(t.serviceUrl+"/addRecord",e)}))()}addRecords(e){var t=this;return i()((function*(){return yield l["a"].post(t.serviceUrl+"/addRecords",e)}))()}updateRecord(e){var t=this;return i()((function*(){return yield l["a"].post(t.serviceUrl+"/updateRecord",e)}))()}updateRecords(e){var t=this;return i()((function*(){return yield l["a"].post(t.serviceUrl+"/updateRecords",e)}))()}DeleteByIds(e,t){var a=this;return i()((function*(){var s={ids:e,isSoftDel:t};return yield l["a"].post(a.serviceUrl+"/deleteByIds",s)}))()}executeQuery(e){var t=this;return i()((function*(){var a={sql:e};return yield l["a"].post(t.serviceUrl+"/executeQuery",a)}))()}executeScale(e){var t=this;return i()((function*(){var a={sql:e};return yield l["a"].post(t.serviceUrl+"/executeScale",a)}))()}executeNonQuery(e){var t=this;return i()((function*(){var a={sql:e};return yield l["a"].post(t.serviceUrl+"/executeNonQuery",a)}))()}runProcedureNoQuery(e,t){var a=this;return i()((function*(){var s={procedureName:e,inParams:t};return yield l["a"].post(a.serviceUrl+"/runProcedureNoQuery",s)}))()}runProcedure(e,t){var a=this;return i()((function*(){var s={procedureName:e,inParams:t};return yield l["a"].post(a.serviceUrl+"/runProcedure",s)}))()}}},"7cab":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[s("upms-search",{attrs:{left:e.left,right:e.right}},[e._v("扫描出库")]),s("div",{staticClass:"line-middle-line"}),s("div",[s("q-tabs",{staticClass:"text-grey",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[s("q-tab",{attrs:{name:"发料建议",label:"发料建议"}}),s("q-tab",{attrs:{name:"扫描出库",label:"扫描出库"}})],1),s("q-tab-panels",{attrs:{animated:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[s("q-tab-panel",{attrs:{name:"发料建议"}},[s("div",{staticClass:"page",style:{height:e.pageHeight+"px",overflow:"auto",textAlign:"center"}},[0==e.dataList.length?s("img",{staticStyle:{height:"25vh","margin-top":"10px"},attrs:{src:a("68c4"),alt:""}}):e._e(),s("div",{style:e.dataListHeight},e._l(e.dataList,(function(t,a){return s("div",{key:a,staticClass:"margin"},[s("q-card",{attrs:{inline:""}},[s("q-card-section",{staticClass:"cardTitle"},[s("span",{staticClass:"titleType",class:t.bgColorClass},[e._v(e._s(t.type))]),s("span",{staticClass:"ontSize-16 colorBlue"},[e._v(e._s(t.code))])]),s("q-separator",{attrs:{inset:""}}),s("lineList",{attrs:{lineList:t.detailDataList}}),s("separatorList",{attrs:{separatorList:t.formRule}})],1)],1)})),0)])]),s("q-tab-panel",{attrs:{name:"扫描出库"}},[s("q-input",{attrs:{"bottom-slots":"",placeholder:"请输入或扫描物料标签、批次标签、单品标签"},scopedSlots:e._u([{key:"append",fn:function(){return[""!==e.text?s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){e.text=""}}}):e._e(),s("q-icon",{staticClass:"text-primary",attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.text,callback:function(t){e.text=t},expression:"text"}}),s("div",{staticClass:"modeSelect"},[s("span",[e._v("扫描模式")]),s("q-btn-toggle",{attrs:{"text-color":"black","toggle-color":"primary",rounded:"",options:[{label:"添加",value:"add",size:"12px"},{label:"剔除",value:"delete"},{label:"修正",value:"edit"}]},model:{value:e.modeSelection,callback:function(t){e.modeSelection=t},expression:"modeSelection"}})],1),s("div",{staticClass:"GridText"},[s("div",[e._v("应发数量 "),s("span",[e._v(e._s(e.preQtyNum))])]),s("div",[e._v("已发数量 "),s("span",[e._v(e._s(e.QtyNum))])]),s("div",[e._v("扫描条数 "),s("span",[e._v(e._s(e.totalNum))])])]),s("div",{staticClass:"page",style:{height:e.detailPageHeight+"px",overflow:"auto",textAlign:"center"}},[0==e.detailDataList.length?s("img",{staticStyle:{height:"25vh","margin-top":"10px"},attrs:{src:a("68c4"),alt:""}}):e._e(),s("div",{style:e.detailDataListHeight},e._l(e.detailDataList,(function(t,a){return s("div",{key:a,staticStyle:{"padding-top":"10px"}},[s("q-card",{attrs:{inline:""}},[s("q-card-section",{staticClass:"cardTitle"},[s("span",{staticClass:"titleType",class:t.bgColorClass},[e._v(e._s(t.type))]),s("span",{staticClass:"ontSize-16 colorBlue"},[e._v(e._s(t.code))])]),s("q-separator",{attrs:{inset:""}}),s("lineList",{attrs:{lineList:t.detailDataList}}),s("separatorList",{attrs:{separatorList:t.formRule}})],1)],1)})),0)]),s("q-btn",{staticClass:"full-width",attrs:{unelevated:"",rounded:"",color:"primary",label:"创建出库单"}})],1)],1)],1)],1)},i=[],l=(a("e6cf"),{components:{"upms-search":()=>Promise.resolve().then(a.bind(null,"328a")),lineList:()=>a.e(1).then(a.bind(null,"c143")),separatorList:()=>a.e(2).then(a.bind(null,"6f9c"))},computed:{dataListHeight(){if(this.dataList&&this.dataList.length)return{height:this.dataList.length*(31*this.dataList[0].detailDataList.length+32+10)+"px"}},detailDataListHeight(){if(this.detailDataList&&this.detailDataList.length)return{height:this.detailDataList.length*(38*(this.detailDataList[0].detailDataList.length+this.detailDataList[0].formRule.length)+32+10)+"px"}}},data(){let e=this;return{tab:"扫描出库",text:"",icon:"apps",dateSelection:"two",modeSelection:"delete",left:{icon:"navigate_before",click(){e.$router.push("/my-work")}},right:{icon:"qr_code_2",click(){}},dataList:[{code:"CGSQD20201011",bgColorClass:"bgPurple",type:"发料中",detailDataList:[{label:"申请部门",value:"胶印车间",type:"label"},{label:"申请日期",value:"2018-09-09",type:"label"},{label:"申请人员",value:"张三",type:"label"}],formRule:[[{label:"规格型号",value:"1kg/桶",type:"label"},{label:"工单号",value:"2018-234",type:"label"},{label:"已发数量",value:"20",type:"input",unit:"kg"}],[{label:"工序",value:"胶印",type:"label"},{label:"申请数量",value:"20",type:"input",unit:"kg"},{label:"本次发料",value:"20",type:"input",unit:"kg"}]]},{code:"CGSQD20201012",bgColorClass:"bgBlue",type:"待发料",detailDataList:[{label:"申请部门",value:"胶印车间",type:"label"},{label:"申请日期",value:"2018-09-09",type:"label"},{label:"申请人员",value:"李四",type:"label"}],formRule:[[{label:"规格型号",value:"1kg/桶",type:"label"},{label:"工单号",value:"2018-234",type:"label"},{label:"已发数量",value:"20",type:"input",unit:"kg"}],[{label:"工序",value:"胶印",type:"label"},{label:"申请数量",value:"20",type:"input",unit:"kg"},{label:"本次发料",value:"20",type:"input",unit:"kg"}]]}],detailDataList:[{code:"CGSQD20201011",bgColorClass:"bgPurple",type:"发料中",detailDataList:[{label:"物料编码",value:"130-089",type:"label"},{label:"领料设备",value:"胶印一号机",type:"label"}],formRule:[[{label:"规格型号",value:"1kg/桶",type:"label"},{label:"工单号",value:"2018-234",type:"label"},{label:"已发数量",value:"20",type:"input",unit:"kg"}],[{label:"工序",value:"胶印",type:"label"},{label:"申请数量",value:"20",type:"input",unit:"kg"},{label:"本次发料",value:"20",type:"input",unit:"kg"}]]},{code:"CGSQD20201011",bgColorClass:"bgPurple",type:"发料中",detailDataList:[{label:"物料编码",value:"130-089",type:"label"},{label:"领料设备",value:"胶印一号机",type:"label"}],formRule:[[{label:"规格型号",value:"1kg/桶",type:"label"},{label:"工单号",value:"2018-234",type:"label"},{label:"已发数量",value:"20",type:"input",unit:"kg"}],[{label:"工序",value:"胶印",type:"label"},{label:"申请数量",value:"20",type:"input",unit:"kg"},{label:"本次发料",value:"20",type:"input",unit:"kg"}]]}],pageHeight:document.body.clientHeight-136,detailPageHeight:document.body.clientHeight-305,preQtyNum:30,QtyNum:20,totalNum:5}},methods:{getDetailList(){this.detailDataList=[];let e=res.data;e&&e.length&&e.forEach(e=>{let t=[],a=[];switch(t.push({label:"物料编码",value:e.ItemCode}),t.push({label:"领料设备",value:void 0==e.MachineName?"":e.MachineName}),a.push([{label:"规格型号",value:void 0==e.Spec?"":e.Spec},{label:"工单号",value:e.OrderCode},{label:"申请数量",value:e.PreQty,fontColor:"colorBlue",unit:e.UnitMainCode}],[{label:"工序",value:e.ProcessName},{label:"库存数量",value:e.ValidQty,fontColor:"colorBlue",unit:e.UnitMainCode},{label:"已发数量",value:e.RealQty,fontColor:"colorBlue",unit:e.UnitMainCode}]),e.StatDesc){case"待拣货":e.bgColorClass="bgBlue";break;case"拣货中":e.bgColorClass="bgPurple";break;case"已拣货":e.bgColorClass="bgGreen";break;default:break}let s={detailDataList:t,formRule:a,code:e.ItemName,type:e.StatDesc,bgColorClass:e.bgColorClass,LineId:e.LineId};this.detailDataList.push(s)})}}}),r=l,o=(a("2de1"),a("9ca4")),n=a("429b"),c=a("7460"),u=a("adad"),d=a("823b"),h=a("f09f"),p=a("a370"),m=a("eb85"),g=a("27f9"),f=a("0016"),b=a("6a67"),v=a("9c40"),L=a("b047"),C=a("5739"),y=a.n(C),D=Object(o["a"])(r,s,i,!1,null,"d3c08318",null);t["default"]=D.exports;y()(D,"components",{QTabs:n["a"],QTab:c["a"],QTabPanels:u["a"],QTabPanel:d["a"],QCard:h["a"],QCardSection:p["a"],QSeparator:m["a"],QInput:g["a"],QIcon:f["a"],QBtnToggle:b["a"],QBtn:v["a"],QChip:L["a"]})},8395:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var s=a("c973"),i=a.n(s),l=a("b5c6"),r=a("7ac0");const o="/api/Stock_GetAllJobsService";class n extends r["a"]{constructor(){super(o)}GetAllJobs(){return i()((function*(){return yield l["a"].post(o+"/GetAllJobs")}))()}}},"92da":function(e,t,a){"use strict";var s=a("1660"),i=a.n(s);i.a},"95a1":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%",overflow:"hidden"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.QRcontentFlag,expression:"!QRcontentFlag"}],staticClass:"pull-item"},[a("upms-search",{attrs:{left:e.left,right:e.right}},[e._v("包装组盘")]),a("upms-line"),a("div",[a("div",{staticClass:"row",staticStyle:{"padding-bottom":"0px"}},[a("div",{staticClass:"col-6"},[a("div",[a("q-icon",{attrs:{name:"colorize"}}),a("span",[e._v("工单")]),e._v(e._s(e.currentOrderWorkOrder))],1),a("div",{staticClass:"input_item"},[a("q-icon",{attrs:{name:"widgets"}}),a("span",[e._v("数量")]),a("q-input",{staticStyle:{width:"70px"},model:{value:e.palletNum,callback:function(t){e.palletNum=t},expression:"palletNum"}})],1)]),a("div",{staticClass:"col-6"},[a("div",[a("q-icon",{attrs:{name:"widgets"}}),a("span",[e._v("包装方式")]),e._v(e._s(e.PackageTypeDesc))],1),a("div",[a("q-icon",{attrs:{name:"date_range"}}),a("span",[e._v("生产日期")]),e._v(e._s(e.ProductionTime))],1)])]),a("div",{staticClass:"row",staticStyle:{padding:"0px 5px"}},[a("div",{staticClass:"col-12"},[a("q-icon",{attrs:{name:"edit"}}),a("span",[e._v("卡板号")]),e._v(e._s(e.PalletCode))],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-6"},[a("div",{staticClass:"select_item"},[a("q-icon",{attrs:{name:"supervisor_account"}}),a("span",[e._v("班组")]),a("q-select",{staticStyle:{width:"80px",padding:"0px"},attrs:{options:e.machineTeamOptions},model:{value:e.machineTeam,callback:function(t){e.machineTeam=t},expression:"machineTeam"}})],1),a("div",[a("q-icon",{attrs:{name:"person"}}),a("span",[e._v("包装员")]),e._v(e._s(e.currentLoginName))],1),a("div",[a("q-icon",{attrs:{name:"info"}}),a("span",[e._v("工序")]),e._v(e._s(e.Basic_ProcessName))],1)]),a("div",{staticClass:"col-6"},[a("div",{staticClass:"select_item"},[a("q-icon",{attrs:{name:"account_balance_wallet"}}),a("span",[e._v("班次")]),a("q-select",{staticStyle:{width:"80px",padding:"0px"},attrs:{options:e.teamClassesOptions},model:{value:e.teamClasses,callback:function(t){e.teamClasses=t},expression:"teamClasses"}})],1),a("div",[a("q-icon",{attrs:{name:"date_range"}}),a("span",[e._v("包装日期")]),e._v(e._s(e.PackageDate))],1),a("div",{staticClass:"input_item"},[a("q-icon",{attrs:{name:"card_membership"}}),a("span",[e._v("成品批注")]),a("q-input",{staticStyle:{width:"70px"},model:{value:e.ProductPostil,callback:function(t){e.ProductPostil=t},expression:"ProductPostil"}})],1)])])]),a("gridText",{attrs:{GridTextList:e.GridTextList}}),0==e.dataList.length?a("upms-nodata-img"):e._e(),a("div",{staticClass:"c-list"},e._l(e.dataList,(function(t,s){return a("div",{staticClass:"m-card-info",class:t.selected?"borderBlue":"",staticStyle:{"margin-top":"10px"}},[a("rightCardTitle",{attrs:{titleList:t.titleList}}),a("q-separator",{attrs:{inset:""}}),a("lineList",{attrs:{lineList:t.detailDataList},on:{inputBlur:function(a){return e.inputMatchBlur(t)},inputFocus:function(a){return e.inputMatchFocus(t)}}})],1)})),0),0!=e.dataList.length&&e.buttonVisible?a("upms-bottom-buttons",{attrs:{buttons:e.bottomButtons}}):e._e()],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.QRcontentFlag,expression:"QRcontentFlag"}],staticClass:"QRcontent"},[a("span",{staticClass:"spanQRContent"},[e._v("请将二维码放入框内，即可自动扫描")]),e._m(0)]),a("upms-confirm-dialog",{directives:[{name:"show",rawName:"v-show",value:e.confirmFlag,expression:"confirmFlag"}],attrs:{confirmFlag:e.confirmFlag,message:e.dialogMessage},on:{confirmDialogBack:e.confirmDialogBack}})],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"rect"},[a("div",{staticClass:"line"})])}],l=(a("c975"),a("e6cf"),a("c973")),r=a.n(l),o=a("8527"),n=a("a190"),c=a("d2b7"),u=a("b5c6"),d=a("7ac0");const h="/api/Shop_QualityRandomCheckService";class p extends d["a"]{constructor(){super(h)}GetItemOutOrderLineListByParam(e,t){return r()((function*(){let a={workOrderCode:e,palletCode:t};return yield u["a"].post(h+"/GetShopQualityRandomCheckList",a)}))()}SavePDAPacking(e,t){return r()((function*(){let a={Product_MakeTray:e,Product_MakeTrayLine:t};return yield u["a"].post(h+"/SaveItemOut",a)}))()}}const m="/api/Basic_TeamClassesService";class g extends d["a"]{constructor(){super(m)}}const f="/api/Basic_MachineTeamService";class b extends d["a"]{constructor(){super(f)}}const v="/api/Product_MakeTrayService";class L extends d["a"]{constructor(){super(v)}AddProductMakeTray(e){return r()((function*(){return yield u["a"].post(v+"/AddProductMakeTray",e)}))()}}let C=new p,y=new g,D=new b,S=new L;var w={computed:{scan(){return this.$store.state.main.scan}},components:{lineList:()=>a.e(1).then(a.bind(null,"c143")),showChipData:()=>a.e(0).then(a.bind(null,"e299")),rightCardTitle:()=>a.e(3).then(a.bind(null,"959d")),gridText:()=>a.e(8).then(a.bind(null,"d26d"))},data(){let e=this;return{left:{icon:"navigate_before",click(){e.$router.push("/my-work")}},right:{icon:"qr_code_2",click(){}},PackageTypeDesc:"",palletNum:null,ProductionTime:"",PackageDate:"",PalletCode:"",ProductPostil:"",currentLoginName:"",Basic_ProcessName:"",currentOrderWorkOrder:"",currentPalletCode:"",machineTeam:"",machineTeamOptions:[],basic_MachineTeamObj:[],teamClasses:"",teamClassesOptions:[],basic_TeamClassesObj:[],GridTextList:[{label:"卡板总数",value:""},{label:"配数总数",value:""}],QRcontentFlag:!1,dataList:[],bottomButtons:[{label:"确认",color:"#2196f3",click(){e.SavePDAPacking()}}],currentPageList:[],allWorkOrderAndPallet:[],confirmFlag:!1,dialogMessage:"",buttonVisible:!0,docmHeight:document.documentElement.clientHeight,showHeight:document.documentElement.clientHeight}},methods:{GetItemOutOrderLineListByParam(){var e=this;return r()((function*(){let t=yield C.GetItemOutOrderLineListByParam(e.currentOrderWorkOrder,e.currentPalletCode);if(console.log(t),t.status){let a=o["a"].getObjet(n["a"].LOCAL_STORAGE_CUR_EMP_INFO);e.currentLoginName=a.EmpName,e.PackageDate=e.GetCurrentdate(),e.currentPageList.push(t.data);let s=t.data;if(s&&Object.keys(s).length>0){if(s.newMatchQty=0,s.newMatchQty=s.CurrentQty,e.PackageTypeDesc=s.PackageTypeDesc,1==e.currentPageList.length)e.palletNum=s.TrayNum,e.palletNum<s.newMatchQty&&(s.newMatchQty=e.palletNum);else{let t=0;e.dataList.forEach(e=>{t+=e.detailDataList[4].value});let a=c["a"].sub(e.palletNum,t);if(a<=0)return void e.showMessage({message:"配数数量大于总数量"});s.newMatchQty>a&&(s.newMatchQty=a)}e.ProductionTime=void 0==s.ProductionTime?"":s.ProductionTime.substring(0,10),""==e.PalletCode?e.PalletCode=s.PalletCodes:e.PalletCode=e.PalletCode+","+s.PalletCodes,e.Basic_ProcessName=s.Basic_ProcessName;let t=[],a=[];a.push({label:"抽检单号",value:s.Code}),a.push({label:"生产批次",value:s.BatchNos}),a.push({label:"抽检员",value:"admin"}),a.push({label:"卡板数量",value:s.CurrentQty}),a.push({label:"配数数量",type:"number",value:s.newMatchQty}),t.push({code:s.PalletCodes,fontColor:"colorBlue"});let i={titleList:t,detailDataList:a,selected:!1,Id:s.Id};e.dataList.unshift(i)}e.$nextTick(()=>{e.dataList.forEach(e=>{e.selected=!1}),e.dataList.length&&(e.dataList[0].selected=!0),e.getQty()})}}))()},SavePDAPacking(){var e=this;return r()((function*(){if(""==e.machineTeam)return void e.showMessage({message:"请选择班组"});if(""==e.teamClasses)return void e.showMessage({message:"请选择班次"});let t=e.dataList.filter(e=>e.detailDataList[3].value<e.detailDataList[4].value);if(!t||!t.length)return parseFloat(e.GridTextList[0].value)<e.palletNum?(e.confirmFlag=!0,void(e.dialogMessage="配数数量小于大托盘标准数量，是否确认组盘")):void e.Submit();e.showMessage({message:"配数数量大于卡板数量"})}))()},confirmDialogBack(e){this.confirmFlag=!1,e&&this.Submit()},Submit(){var e=this;return r()((function*(){let t=e.basic_MachineTeamObj.find(t=>t.Name==e.machineTeam),a=e.basic_TeamClassesObj.find(t=>t.Name==e.teamClasses),s=o["a"].getObjet(n["a"].LOCAL_STORAGE_CUR_EMP_INFO);e.currentPageList.forEach(t=>{e.dataList.forEach(e=>{t.Id==e.Id&&(t.PalletCode=t.PalletCodes,t.SupplyBatchNumber=t.BatchNos,t.MatchQty=parseFloat(e.detailDataList[4].value),t.Shop_QualityRandomCheckId=t.Id,t.Shop_QualityRandomCheckCode=t.Code,t.OrgM_EmpCheckId=t.OrgM_EmpId,t.OrgM_EmpCheckCode=t.OrgM_EmpCode)})});let i={PackageDate:e.PackageDate,OrgM_EmpId:s.EmpId,OrgM_EmpName:s.EmpName,Order_WorkOrderId:"",Order_WorkOrderCode:e.currentOrderWorkOrder,Basic_ProcessId:e.currentPageList[0].Basic_ProcessId,Basic_ProcessCode:e.currentPageList[0].Basic_ProcessCode,Basic_MachineTeamId:t.Id,Basic_MachineTeamCode:t.Code,Basic_TeamClassesId:a.Id,Basic_TeamClassesCode:a.Code,ProductionTime:e.ProductionTime,ProductPostil:e.ProductPostil,PalletCode:e.PalletCode,PackageType:e.currentPageList[0].PackageType,PackageTypeDesc:e.currentPageList[0].PackageTypeDesc,Qty:e.palletNum};i.List=e.currentPageList;let l={productMakeTray:i},r=yield S.AddProductMakeTray(JSON.stringify(l));r.status&&(e.showMessage({message:"组盘成功"}),e.dataList=[],e.currentPageList=[],e.PackageTypeDesc="",e.palletNum="",e.ProductionTime="",e.PackageDate="",e.PalletCode="",e.ProductPostil="",e.currentLoginName="",e.Basic_ProcessName="",e.currentOrderWorkOrder="",e.currentPalletCode="",e.machineTeam="",e.teamClasses="",e.GridTextList[0].value="",e.GridTextList[1].value="",e.allWorkOrderAndPallet=[])}))()},GetScanData(e){let t=e.substring(0,e.indexOf("$"));if(""==this.currentOrderWorkOrder||this.currentOrderWorkOrder==t){if(0==this.allWorkOrderAndPallet.length)this.allWorkOrderAndPallet.push(e);else{let t=this.allWorkOrderAndPallet.filter(t=>t==e);if(t&&t.length)return void this.showMessage({message:"此流程卡已扫描"})}if(this.allWorkOrderAndPallet.push(e),e.indexOf(",")>-1){let t=e.split(","),a=e.substring(t[0].indexOf("$")+1,this.FindStrIndex(t[0],"$",1));this.currentPalletCode=a}else this.currentPalletCode=e.substring(e.indexOf("$")+1,this.FindStrIndex(e,"$",1));this.currentOrderWorkOrder=t,this.GetItemOutOrderLineListByParam()}else this.showMessage({message:"工单号必须相同"})},GetTeamClasses(){var e=this;return r()((function*(){let t=yield y.getEntities();t.status&&(e.basic_TeamClassesObj=t.data,t.data.forEach(t=>{e.teamClassesOptions.push(t.Name)}))}))()},GetMachineTeam(){var e=this;return r()((function*(){let t=yield D.getEntities();t.status&&(e.basic_MachineTeamObj=t.data,t.data.forEach(t=>{e.machineTeamOptions.push(t.Name)}))}))()},QRScan(){window.cordova&&window.cordova.plugins?this.QRScanner():this.showMessage({message:"扫码功能仅支持APP版本！"})},QRScanner(){this.QRcontentFlag=!0,this.prepDevice(),document.getElementsByTagName("body")[0].style.backgroundColor="transparent"},prepDevice(){QRScanner.prepare(this.onDone)},onDone(e,t){e&&alert("preparing: error code = "+e.code),t.authorized?(QRScanner.show(),QRScanner.scan(this.displayContents)):console.log(e)},displayContents(e,t){let a=this;a.$store.commit("main/setRootScan",0),setTimeout(()=>{e?alert("scanning: error code = "+e.code):(document.getElementsByTagName("body")[0].style.backgroundColor="#f5f5f5",""!=t&&a.$store.commit("main/setRootScan",t),QRScanner.destroy(),a.QRcontentFlag=!1)},0)},FindStrIndex(e,t,a){for(var s=e.indexOf(t),i=0;i<a;i++)s=e.indexOf(t,s+1);return s},GetCurrentdate(){let e=new Date,t=e.getMonth()+1;t=t<10?"0"+t:t;let a=e.getDate();return a=a<10?"0"+a:a,e.getFullYear()+"-"+t+"-"+a},inputMatchBlur(e){e.detailDataList[3].value<e.detailDataList[4].value?this.showMessage({message:"配数数量大于卡板数量"}):this.getQty()},inputMatchFocus(e){this.addBorderColor(e)},addBorderColor(e){this.dataList.forEach(e=>{e.selected=!1}),e.selected=!0,this.$forceUpdate(),this.$set(e,"selected",!0)},getQty(){let e=0,t=0;this.dataList.forEach(a=>{e=parseFloat(e)+parseFloat(a.detailDataList[4].value),t=parseFloat(t)+parseFloat(a.detailDataList[3].value)}),this.GridTextList[0].value=t,this.GridTextList[1].value=e}},mounted(){var e=this;return r()((function*(){e.GetMachineTeam(),e.GetTeamClasses(),window.onresize=()=>(()=>{e.showHeight=document.body.clientHeight})()}))()},watch:{scan:{handler(e,t){0!=e&&"0"!=e&&e.indexOf("$")>-1&&this.GetScanData(e)},deep:!0},showHeight:function(){let e=document.getElementsByClassName("c-list");this.docmHeight>this.showHeight?(this.buttonVisible=!1,e[0].style.marginBottom="0px","INPUT"==document.activeElement.tagName&&window.setTimeout((function(){"scrollIntoView"in document.activeElement?document.activeElement.scrollIntoView():document.activeElement.scrollIntoViewIfNeeded()}),0)):(this.buttonVisible=!0,e[0].style.marginBottom="50px")}}},k=w,O=(a("2a32"),a("9ca4")),x=a("0016"),B=a("27f9"),P=a("ddd8"),I=a("eb85"),N=a("8572"),T=a("5739"),M=a.n(T),H=Object(O["a"])(k,s,i,!1,null,"9d2dd930",null);t["default"]=H.exports;M()(H,"components",{QIcon:x["a"],QInput:B["a"],QSelect:P["a"],QSeparator:I["a"],QField:N["a"]})},"97cd":function(e,t,a){},"980a":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var s=a("c973"),i=a.n(s),l=a("b5c6"),r=a("7ac0");const o="/api/Stock_SingleItemViewService";class n extends r["a"]{constructor(){super(o)}GetSingleItemViewList(e){return i()((function*(){let t={baleCode:e};return yield l["a"].post(o+"/GetSingleItemViewList",t)}))()}}},"994f":function(e,t,a){"use strict";var s=a("1725"),i=a.n(s);i.a},"9eaf":function(e,t,a){"use strict";var s=a("a13f"),i=a.n(s);i.a},a13f:function(e,t,a){},a558:function(e,t,a){"use strict";var s=a("3004"),i=a.n(s);i.a},a561:function(e,t,a){},af36:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));a("b5c6");var s=a("7ac0");const i="/api/Basic_CustomerService";class l extends s["a"]{constructor(){super(i)}}},b2be:function(e,t,a){"use strict";var s=a("c2cf"),i=a.n(s);i.a},b5c6:function(e,t,a){"use strict";a("c975"),a("e6cf"),a("ddb0"),a("2b3d");var s=a("c973"),i=a.n(s),l=a("bc3a"),r=a.n(l),o=a("51be");const n=e=>{let t=[];return Object.keys(e).forEach(a=>{t.push(`${a}=${e[a]}`)}),t.join("&")};var c=a("c54a"),u=a("0a5a"),d=a("1ca4"),h=a("323e"),p=a.n(h),m=(a("a5d8"),a("2a19"));r.a.defaults.timeout=6e5,r.a.defaults.validateStatus=function(e){return e>=200&&e<=500},p.a.configure({showSpinner:!1});let g,f=null;function b(e){f=e}let v={show(e){let t="正在处理中.....";"string"==typeof e&&(t=e),g=f.$loading({lock:!0,target:"#loading-container",customClass:"el-loading",text:t,spinner:"el-icon-loading",background:"rgba(255, 255, 255, 0.7)"})},close(){g&&g.close()}};function L(e,t){if(e&&(200===e.status||304===e.status||400===e.status))return t&&t.indexOf("hubs")>-1?e:e.data;let a="网络访问异常";return t&&t.indexOf("hubs")>-1&&(a="消息服务未开启"),{status:-404,message:a}}function C(e){return e&&-404===e.status?(m["a"].create({message:e.message,position:"center"}),{errcode:"404",message:"网络访问异常"}):(e&&!1===e.status&&m["a"].create({message:e.message,position:"center"}),e&&e.errcode&&m["a"].create({message:e.message,position:"center"}),e)}function y(e){return new Promise((t,a)=>{const s=new FileReader;s.onload=function(){try{const e=JSON.parse(this.result);e&&!1===e.status?t(e):a()}catch(e){a()}},s.readAsText(e)})}r.a.interceptors.request.use(e=>{p.a.start();const t=e.meta||{},a=!1===t.isToken,s=Object(u["b"])();if(s&&!a&&(e.headers[u["a"]]=s),!0===t.isAbsoluteUrl||Object(c["b"])(e.url)||(e.url=o["a"]+(e.url.startsWith("/api")?"":"/api")+e.url),"post"===e.method&&!0===t.isSerialize&&(e.data=n(e.data)),!0===t.isStringify)if("post"===e.method)e.data=JSON.stringify(JSON.stringify(e.data));else if("get"===e.method){let t={strJson:JSON.stringify(e.params)};e.params=t}return t.loadMsg&&v.show(t.loadMsg),e},e=>(v.close(),Promise.reject(e))),r.a.interceptors.response.use(e=>{v.close(),p.a.done();const t=Number(e.status)||200,a=d["a"].statusWhiteList||[];return a.includes(t)?Promise.reject(e):(401===t&&store.dispatch("FedLogOut").then(()=>router.push({path:"/login"})),200!==t?Promise.reject(e):e)},e=>(v.close(),p.a.done(),Promise.reject(new Error(e))));let D=o["a"]+"/";t["a"]={init:b,ipAddress:D,post(e,t,a,s){return i()((function*(){const i=yield r()({method:"post",url:e,data:t||{},params:a||{},meta:s||{},headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"}}),l=L(i);return C(l)}))()},get(e,t,a){return i()((function*(){const s=yield r()({method:"get",url:e,params:t||{},meta:a||{},headers:{"X-Requested-With":"XMLHttpRequest"}}),i=L(s,e);return C(i)}))()},uploadFile(e,t,a){return i()((function*(){const s=yield r()({method:"post",url:e,data:t||{},meta:a||{},headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"multipart/form-data"}}),i=L(s);return C(i)}))()},dowloadFile(e,t,a,s){return i()((function*(){const i=t.fileUrl;let l=s||document.getElementById("dowonloadfile-a");if(l||(l=document.createElement("a"),l.setAttribute("id","dowonloadfile-a"),document.body.append(l)),Object(c["b"])(i)&&!Object(c["a"])(i,D))return l.href=i,void l.click();const o=yield r()({method:"post",url:e,data:t||{},meta:a||{},headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"},responseType:"blob"});let n=L(o);n=C(n),y(n).then(e=>{e.create({message:n.message})}).catch(()=>{const e=decodeURI(o.headers["content-disposition"].split("filename=")[1]);l.download=e;let t=new Blob([n]);l.href=URL.createObjectURL(t),l.click()})}))()}}},baba:function(e,t,a){"use strict";var s=a("ed57"),i=a.n(s);i.a},bfd8:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v("\n  采购入库\n")])},i=[],l={},r=l,o=a("9ca4"),n=Object(o["a"])(r,s,i,!1,null,"57e0330f",null);t["default"]=n.exports},c2cf:function(e,t,a){},c75e:function(e,t,a){"use strict";var s=a("392c"),i=a.n(s);i.a},cd97:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%",overflow:"hidden"}},[e.scanMovePageDialog?e._e():a("div",{staticClass:"content",staticStyle:{height:"100%",overflow:"hidden"}},[a("upms-search",{attrs:{left:e.left,right:e.right}},[e._v("成品调拨")]),a("upms-line"),a("div",{style:{height:e.contentHeight+"px"}},[a("q-tabs",{staticClass:"text-grey",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify"},model:{value:e.selectedTab,callback:function(t){e.selectedTab=t},expression:"selectedTab"}},[a("q-tab",{attrs:{name:"调拨单列表",label:"调拨单列表"}}),a("q-tab",{attrs:{name:"调拨单明细",label:"调拨单明细"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"调拨单列表"==e.selectedTab,expression:"selectedTab=='调拨单列表'"}],style:{height:e.tabHeight+"px"}},[a("q-input",{attrs:{"bottom-slots":"",placeholder:"请输入或扫描调拨单号"},scopedSlots:e._u([{key:"append",fn:function(){return[""!==e.text?a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){e.text=""}}}):e._e(),a("q-icon",{staticClass:"text-primary",attrs:{name:"search"}})]},proxy:!0}],null,!1,3801931588),model:{value:e.text,callback:function(t){e.text=t},expression:"text"}}),a("chip",{staticClass:"state",attrs:{chipList:e.chipList,defaultCheckList:e.defaultCheckList,isShowAll:!0,height:80},on:{beforeHide:e.beforeHideStatus}}),a("upms-line"),a("selectDate",{attrs:{defaultDate:e.currentDate},on:{getCurrentData:e.getCurrentData}}),a("upms-line"),a("div",{staticClass:"chip-content"},[a("span",{staticClass:"titleText"},[e._v("发料仓库")]),a("chip",{staticClass:"chip-house",attrs:{chipList:e.houseList,defaultCheckList:e.defaultHouseList,isRadio:!0},on:{beforeHide:e.beforeHideHouse}})],1),a("upms-line"),a("div",{staticClass:"pull-flex",style:{height:e.tabContentHeight+"px"}},[a("showChipData",{attrs:{showChipDataList:e.defaultShowChipDataList,title:"默认组员"}}),a("upms-line"),0==e.dataList.length?a("upms-nodata-img"):e._e(),a("div",{staticClass:"pull-item"},[a("div",{staticClass:"card-list",staticStyle:{"margin-bottom":"0px"}},e._l(e.dataList,(function(t,s){return a("div",{key:s,staticClass:"m-card-info",class:t.selected?"borderBlue":"",on:{click:function(a){return e.GetItemMoveLineListByParam(t)}}},[a("rightCardTitle",{attrs:{titleList:t.titleList}}),a("q-separator",{attrs:{inset:""}}),a("lineList",{attrs:{lineList:t.detailDataList}})],1)})),0)])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"调拨单明细"==e.selectedTab,expression:"selectedTab=='调拨单明细'"}],style:{height:e.tabHeight+"px"}},[a("q-input",{attrs:{"bottom-slots":"",placeholder:"请输入或扫描批次标签"},scopedSlots:e._u([{key:"append",fn:function(){return[""!==e.text?a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){e.text=""}}}):e._e(),a("q-icon",{staticClass:"text-primary",attrs:{name:"search"}})]},proxy:!0}],null,!1,3801931588),model:{value:e.text,callback:function(t){e.text=t},expression:"text"}}),a("div",{staticClass:"pull-flex",style:{height:e.tabHeight-52+"px"}},[a("showChipData",{attrs:{showChipDataList:e.showChipDataList,title:"装卸组员",isShowArrowRight:!0},on:{removeNode:e.removeNode,selectUser:e.selectUser}}),0==e.detailData.length?a("upms-nodata-img"):e._e(),a("div",{staticClass:"pull-item"},[a("div",{staticClass:"card-list"},e._l(e.detailData,(function(t,s){return a("div",{directives:[{name:"ripple",rawName:"v-ripple"}],key:s,staticClass:"m-card-info",class:t.selected?"borderBlue":""},[a("cardTitle",{attrs:{titleList:t.titleList}}),a("q-separator",{attrs:{inset:""}}),a("lineList",{attrs:{lineList:t.detailDataList}}),a("separatorList",{attrs:{separatorList:t.formRule}}),t.MakeTrayCodeData.length>0?a("upms-table",{staticStyle:{"margin-top":"5px"},attrs:{columns:e.MakeTrayCodeColumns,data:t.MakeTrayCodeData,showItemBorder:!1}}):e._e(),a("div",{staticClass:"scanBtn"},[a("q-btn",{staticClass:"btn-width",attrs:{rounded:"",color:"primary",size:"sm",label:"调拨扫描"},on:{click:function(a){return e.openScanOutWarehousePage(t)}}})],1)],1)})),0)])],1),0!=e.detailData.length?a("upms-bottom-buttons",{attrs:{buttons:e.bottomButtons}}):e._e()],1)],1)],1),e.scanMovePageDialog?a("div",{staticStyle:{height:"100%",overflow:"hidden"}},[a("div",{staticClass:"content",staticStyle:{height:"100%",overflow:"hidden"}},[a("upms-search",{attrs:{left:e.scanOutWarehousePageDialogleft,right:e.scanOutWarehousePageDialogright}},[e._v("调拨扫描")]),a("div",{style:{height:e.contentHeight+"px"}},[a("q-input",{attrs:{"bottom-slots":"",placeholder:"请输入或扫描批次标签"},scopedSlots:e._u([{key:"append",fn:function(){return[""!==e.text?a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){e.text=""}}}):e._e(),a("q-icon",{staticClass:"text-primary",attrs:{name:"search"}})]},proxy:!0}],null,!1,3801931588),model:{value:e.text,callback:function(t){e.text=t},expression:"text"}}),a("div",{staticClass:"pull-flex",style:{height:e.contentHeight-52+"px"}},[a("modeSelect",{attrs:{text:"扫描模式",modeSelection:e.modeSelection,options:e.options},on:{getModeSelectionData:e.getModeSelectionData}}),a("gridText",{attrs:{GridTextList:e.GridTextList}}),0==e.moveDialogDataList.length?a("upms-nodata-img"):e._e(),e.moveDialogDataList.length?a("div",{staticClass:"pull-item"},[a("div",{staticClass:"card-list"},[a("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"m-card-info"},e._l(e.moveDialogDataList,(function(e,t){return a("div",{key:t,class:e.selected?"pseparatorBorderBlue":"pseparator"},[a("separatorList",{attrs:{separatorList:e.arr}})],1)})),0)])]):e._e()],1)],1),0!=e.moveDialogDataList.length?a("upms-bottom-buttons",{attrs:{buttons:e.dialogBottomButtons}}):e._e()],1)]):e._e(),a("upms-confirm-dialog",{directives:[{name:"show",rawName:"v-show",value:e.confirmFlag,expression:"confirmFlag"}],attrs:{confirmFlag:e.confirmFlag,message:e.dialogMessage},on:{confirmDialogBack:e.ConfirmDialogBack}})],1)},i=[],l=(a("a434"),a("e6cf"),a("c973")),r=a.n(l),o=a("8527"),n=a("a190"),c=a("d2b7"),u=a("980a"),d=a("b5c6"),h=a("7ac0");const p="/api/Stock_ItemMoveService";class m extends h["a"]{constructor(){super(p)}GetItemMoveList(e,t,a,s,i,l,o){return r()((function*(){let r={code:e,downState:t,bDate:a,eDate:s,wareHouseId:i,pageIndex:l,pageSize:o};return yield d["a"].post(p+"/GetItemMoveList",r)}))()}GetItemMoveLineListByParam(e,t,a){return r()((function*(){let s={moveWareHouseId:e,itemMoveCode:t,itemCodeOrBatchNo:a};return yield d["a"].post(p+"/GetItemMoveLineListByParam",s)}))()}SaveItemMove(e){return r()((function*(){return yield d["a"].post(p+"/SaveItemMove",e)}))()}ItemMovePostOperate(e){return r()((function*(){let t={itemMoveIdList:e};return yield d["a"].post(p+"/ItemOutPostOperate",t)}))()}}var g=a("fe8d");let f=new u["a"],b=new m;new g["a"];var v={computed:{scan(){return this.$store.state.main.scan}},components:{lineList:()=>a.e(1).then(a.bind(null,"c143")),separatorList:()=>a.e(2).then(a.bind(null,"6f9c")),chip:()=>a.e(4).then(a.bind(null,"6903")),selectDate:()=>a.e(5).then(a.bind(null,"bfd2")),showChipData:()=>a.e(0).then(a.bind(null,"e299")),cardTitle:()=>a.e(6).then(a.bind(null,"7b0f")),rightCardTitle:()=>a.e(3).then(a.bind(null,"959d")),gridText:()=>a.e(8).then(a.bind(null,"d26d")),modeSelect:()=>a.e(10).then(a.bind(null,"c302"))},data(){let e=this;return{selectedTab:"调拨单列表",text:"",icon:"apps",left:{icon:"navigate_before",click(){e.$router.push("/my-work")}},right:{icon:"qr_code_2",click(){}},currentDate:"2",dataList:[],detailData:[],contentHeight:document.body.clientHeight-70,tabHeight:document.body.clientHeight-106,tabContentHeight:document.body.clientHeight-319,unreceivedNum:30,receivedNum:20,totalNum:50,chipList:[{class:"blueStatus",icon:"alarm",text:"待调拨",value:"1",status:!0},{class:"purpleStatus",icon:"work",text:"调拨中",value:"2",status:!0},{class:"greenStatus",icon:"done",text:"已调拨",value:"3",status:!0}],defaultCheckList:[{icon:"apps",text:"全部单据",value:"1,2,3",class:"blackBlueStatus"}],currentSelectDate:{bDate:"",eDate:""},defaultShowChipDataList:[],showChipDataList:[],houseList:[],defaultHouseList:[],currentWareHouseList:[],currentPageData:[],bottomButtons:[{label:"审核",color:"#FF6B88",click(){e.showPostPlugin()}},{label:"调拨完成",color:"#2196f3",click(){e.ScanOutWarehouseCompelete()}}],itemMoveIdList:"",MakeTrayCodeColumns:[{title:"托盘标签",key:"MakeTrayCode"},{title:"数量",key:"Qty",color:"#2196f3"}],currentPageId:"",scanOutWarehousePageDialogleft:{icon:"navigate_before",click(){e.scanMovePageDialog=!1}},scanOutWarehousePageDialogright:{icon:"qr_code_2",click(){}},scanDialogselectedTab:"调拨扫描",scanMovePageDialog:!1,pickOutDetailPageDialog:!1,moveDialogDataList:[],preQtyNum:0,QtyNum:0,dialogBottomButtons:[{label:"清空",color:"#2196f3",click(){e.dialogClear()}},{label:"确认",color:"#2196f3",click(){e.dialogComplete()}}],GridTextList:[{label:"应发数量",value:""},{label:"实发数量",value:0}],options:[{label:"添加",value:"add",size:"12px"},{label:"剔除",value:"delete"},{label:"查看",value:"edit"}],modeSelection:"add",currentDialogSelectData:[],dialogMessage:"",confirmFlag:!1,MakeTrayCode:"",currentPageLocList:[],ItemViewList:[],ScanOutWarehouseCompeleteFlag:!1,SubmitFlag:!1}},mounted(){this.GetWarehouseList()},methods:{GetItemMoveList(e,t){var a=this;return r()((function*(){if(!e&&!t&&a.dataList.length)return;let s="",i=a.chipList.filter(e=>1==e.status);i.length&&(i.forEach(e=>{s+=e.value+","}),s=s.substring(0,s.length-1));let l=yield b.GetItemMoveList("",s,a.currentSelectDate.bDate,a.currentSelectDate.eDate,a.currentWareHouseList[0].id,1,10);if(console.log(l),l.status){a.dataList=[];let e=l.data.List;e&&e.length&&e.forEach(e=>{let t=[],s=[],i=void 0==e.InOutDate?"":e.InOutDate.substring(0,10);switch(s.push({label:"单据日期",value:i}),s.push({label:"出库仓库",value:a.currentWareHouseList[0].text}),e.StatDesc){case"待调拨":e.bgColorClass="bgBlue";break;case"调拨中":e.bgColorClass="bgPurple";break;case"已调拨":e.bgColorClass="bgGreen";break;default:break}t.push({code:null==e.Code?"":e.Code,type:e.StatDesc,bgColorClass:e.bgColorClass});let l={titleList:t,detailDataList:s,selected:!1};a.dataList.push(l),a.$nextTick(()=>{a.dataList[0].selected=!0})})}}))()},GetItemMoveLineListByParam(e){var t=this;return r()((function*(){t.dataList.forEach(e=>{e.selected=!1}),e.selected=!0;let a=t.dataList.filter(e=>1==e.selected);t.selectedTab="调拨单明细";let s=yield b.GetItemMoveLineListByParam(t.currentWareHouseList[0].id,a[0].titleList[0].code);if(console.log(s),s.status){t.detailData=[];let e=s.data;t.currentPageData=s.data;e&&e.length&&(e.forEach(e=>{t.itemMoveIdList=e.MainId;let a=[],s=[],i=[];switch(t.currentPageId=e.Id,s.push({label:"物料编码",value:e.ItemCode}),s.push({label:"批次",value:e.BatchNumber}),s.push({label:"物料批注",value:e.DeliveryNote}),i.push([{label:"包装方式",value:e.PackageTypeDesc},{label:"件数",value:e.PlanAmount},{label:"调拨数量",value:e.PreQty,fontColor:"colorBlue",unit:e.Basic_UnitMainCode}],[{label:"规格型号",value:void 0==e.Spec?"":e.Spec},{label:"毛重",value:e.GrossWright,fontColor:"colorBlue"},{label:"完成数量",value:void 0==e.Qty?0:e.Qty,fontColor:"colorBlue",unit:e.Basic_UnitMainCode}]),e.StatDesc){case"待调拨":e.bgColorClass="bgBlue";break;case"调拨中":e.bgColorClass="bgPurple";break;case"已调拨":e.bgColorClass="bgGreen";break;default:break}a.push({code:e.ItemName,type:e.StatDesc,bgColorClass:e.bgColorClass});let l=[],r=e.SerialNumberLineList;r&&r.length&&r.forEach(e=>{l.push({MakeTrayCode:e.MakeTrayCode,Qty:e.Qty})});let o={titleList:a,detailDataList:s,formRule:i,MakeTrayCodeData:l,ItemId:e.ItemId,SerialNumberLineList:e.SerialNumberLineList,Id:e.Id};t.detailData.push(o),t.GridTextList[0].value=e.PreQty}),t.$nextTick(()=>{t.detailData[0].selected=!0}))}}))()},ScanOutWarehouseCompelete(){var e=this;return r()((function*(){let t=e.currentPageData.filter(e=>void 0==e.LineList[0].Qty);if(t&&t.length)return void e.showMessage({message:"请先调拨扫描"});let a=e.detailData.filter(e=>e.formRule[1][2].value!=e.formRule[0][2].value);if(a&&a.length)return e.confirmFlag=!0,e.dialogMessage="调拨数量与完成数量不相等，是否调拨?",void(e.ScanOutWarehouseCompeleteFlag=!0);e.SumbitScanOutWarehouseCompelete()}))()},showPostPlugin(){this.confirmFlag=!0,this.dialogMessage="是否审核?",this.SubmitFlag=!0},SumbitScanOutWarehouseCompelete(){this.currentPageData.forEach(e=>{this.detailData.forEach(t=>{e.Id==t.Id&&(t.formRule[1][2].value>=e.LineList[0].Qty&&(e.LineList[0].DownShelfStat=3),t.formRule[1][2].value<e.LineList[0].Qty&&(0==t.formRule[1][2].value?e.LineList[0].DownShelfStat=1:e.LineList[0].DownShelfStat=2))})});let e=[],t=[];this.currentPageData.forEach(a=>{e=e.concat(a.LineList);let s=a.pdaSerialNumberLineData;s&&s.length&&(t=t.concat(s))});let a={itemMoveLines:e,pdaSerialNumberLineData:t};b.SaveItemMove(JSON.stringify(a)).then(e=>{e.status&&(this.showMessage({message:"调拨成功"}),this.selectedTab="调拨单列表",this.dataList=[],this.GetItemMoveList())})},ConfirmDialogBack(e){this.confirmFlag=!1,e&&(this.ScanOutWarehouseCompeleteFlag&&(this.SumbitScanOutWarehouseCompelete(),this.ScanOutWarehouseCompeleteFlag=!1),this.SubmitFlag&&(this.SubmitPost(),this.SubmitFlag=!1))},SubmitPost(){var e=this;return r()((function*(){let t=[];t.push(e.itemMoveIdList);let a={itemMoveIdList:t},s=yield b.ItemMovePostOperate(JSON.stringify(a));s.status&&(e.showMessage({message:"审核成功"}),e.GetItemMoveList(),e.selectedTab="调拨单列表")}))()},GetWarehouseList(){let e=o["a"].getObjet(n["a"].HOUSE_INFO);e&&e.length&&(e.forEach(e=>{e.text=e.name,e.icon="apps",e.value=e.id,e.status=!1,e.class="blackBlueStatus"}),this.houseList=e,e[0].status=!0,this.defaultHouseList[0]=e[0],this.currentWareHouseList[0]=e[0])},GetSingleItemViewList(e){var t=this;return r()((function*(){let a=yield f.GetSingleItemViewList(e);if(a.status){let s=t.detailData.filter(e=>1==e.selected);if(s&&s.length)if(s[0].ItemId==a.data.ItemId&&s[0].formRule[0][0].value==a.data.PackageTypeDesc&&s[0].detailDataList[2].value==a.data.ProductPostil){let s=t.moveDialogDataList.filter(t=>t.arr[0][0].value==e);s&&s.length?t.showMessage({message:"此托盘标签已存在"}):(t.MakeTrayCode=e,t.AddDialogSeparatorList(a.data))}else t.showMessage({message:"物料、发货批注、包装方式与调拨单明细行不一致"})}else t.showMessage({message:a.message})}))()},openScanOutWarehousePage(e){var t=this;return r()((function*(){t.ItemViewList=[],t.moveDialogDataList=[],e.SerialNumberLineList&&e.SerialNumberLineList.length&&e.SerialNumberLineList.forEach(e=>{t.AddDialogSeparatorList(e)}),t.scanMovePageDialog=!0}))()},AddDialogSeparatorList(e){e&&Object.keys(e).length>0&&this.ItemViewList.push(e),this.moveDialogDataList.forEach(e=>{e.selected=!1});let t={selected:!0,arr:[]};t.arr.push([{label:"标签",value:e.MakeTrayCode},{label:"包装方式",value:e.PackageTypeDesc}],[{label:"数量",value:e.Qty},{label:"生产日期",value:void 0==e.ProductionTime?"":e.ProductionTime.substring(0,10)}]),this.moveDialogDataList.unshift(t),this.getQty()},DeleteDialogSeparatorList(){this.ItemViewList.forEach((e,t)=>{e.Code==this.MakeTrayCode&&this.ItemViewList.splice(t,1)}),this.moveDialogDataList.forEach((e,t)=>{e.arr[0][0].value==this.MakeTrayCode&&this.moveDialogDataList.splice(t,1)}),this.getQty()},EditDialogSeparatorList(){this.moveDialogDataList.forEach((e,t)=>{e.arr[0][0].value==this.MakeTrayCode?e.selected=!0:e.selected=!1})},getQty(){let e=0;this.moveDialogDataList.forEach(t=>{e=c["a"].add(e,t.arr[1][0].value)}),this.GridTextList[1].value=e},dialogComplete(){if(this.MakeTrayCodeData=[],!this.moveDialogDataList||!this.moveDialogDataList.length)return void this.showMessage({message:"至少扫描一条单据"});let e=this.detailData.filter(e=>1==e.selected),t=this.currentPageData.filter(t=>t.Id==e[0].Id),a=t[0].LineList;a[0].Qty=this.GridTextList[1].value,e[0].formRule[1][2].value=this.GridTextList[1].value,e[0].MakeTrayCodeData=[],this.moveDialogDataList.forEach(t=>{e[0].MakeTrayCodeData.push({MakeTrayCode:t.arr[0][0].value,Qty:t.arr[1][0].value})}),this.ItemViewList.forEach(e=>{e.LineDetailId=a[0].Id}),t[0].pdaSerialNumberLineData=[],t[0].pdaSerialNumberLineData=this.ItemViewList,this.scanMovePageDialog=!1},dialogClear(){this.moveDialogDataList=[],this.getQty()},getCurrentData(e,t){this.currentDate=t,this.currentSelectDate=e,this.GetItemMoveList(!0)},getModeSelectionData(e){this.modeSelection=e},beforeHideStatus(){this.GetItemMoveList(!0)},beforeHideHouse(e){this.dataList=[],this.defaultHouseList=e,this.currentWareHouseList=e,this.GetItemMoveList()},removeNode(e){if(1==this.showChipDataList.length)return;let t=this.showChipDataList.findIndex(t=>t.name==e.name);this.showChipDataList.splice(t,1)},selectUser(){this.$router.push({path:"/SelectList",query:{path:"StockCreateOrderPickOut",list:this.showChipDataList,isDefault:!1}})}},watch:{scan:{handler(e,t){if(0!=e&&"0"!=e){if(this.scanMovePageDialog){if("add"==this.modeSelection&&this.GetSingleItemViewList(e),"delete"==this.modeSelection)if(this.moveDialogDataList&&this.moveDialogDataList.length){let t=this.moveDialogDataList.filter(t=>t.arr[0][0].value==e);t&&t.length?(this.MakeTrayCode=e,this.DeleteDialogSeparatorList()):this.showMessage({message:"此托盘标签不存在"})}else this.showMessage({message:"请先添加数据"});if("edit"==this.modeSelection)if(this.moveDialogDataList&&this.moveDialogDataList.length){let t=this.moveDialogDataList.filter(t=>t.arr[0][0].value==e);t&&t.length?(this.MakeTrayCode=e,this.EditDialogSeparatorList()):this.showMessage({message:"此托盘标签不存在"})}else this.showMessage({message:"请先添加数据"})}}},deep:!0}},activated(){0==this.$route.query.isDefault&&(this.selectedTab="调拨单明细",this.showChipDataList=this.$route.query.list)}},L=v,C=(a("7576"),a("9ca4")),y=a("429b"),D=a("7460"),S=a("27f9"),w=a("0016"),k=a("eb85"),O=a("9c40"),x=a("24e8"),B=a("b047"),P=a("66e5"),I=a("f09f"),N=a("714f"),T=a("5739"),M=a.n(T),H=Object(C["a"])(L,s,i,!1,null,"c0013ec0",null);t["default"]=H.exports;M()(H,"components",{QTabs:y["a"],QTab:D["a"],QInput:S["a"],QIcon:w["a"],QSeparator:k["a"],QBtn:O["a"],QDialog:x["a"],QChip:B["a"],QItem:P["a"],QCard:I["a"]}),M()(H,"directives",{Ripple:N["a"]})},cfc8:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%",display:"flex","flex-direction":"column"}},[a("upms-header",[e._v("所有功能")]),a("div",{staticStyle:{flex:"1",overflow:"scroll"}},e._l(e.LoginByUsername.pdaMenus,(function(t,s){return a("div",{key:s},[a("div",{staticClass:"m-all-title"},[e._v(e._s(t.MenuDisplayName))]),t.Children&&0!==t.Children.length?a("div",{staticClass:"c-content"},e._l(t.Children,(function(e,t){return a("upms-menu",{key:t,attrs:{data:e}})})),1):e._e(),s!==e.LoginByUsername.pdaMenus.length-1?a("div",{staticClass:"u-line"}):e._e()])})),0)],1)},i=[],l=(a("e6cf"),{computed:{LoginByUsername:{get(){return this.$store.state.main.LoginByUsername},set(e){this.$store.commit("main/setLoginByUsername",e)}}},components:{"upms-header":()=>Promise.resolve().then(a.bind(null,"0a71")),"upms-menu":()=>Promise.resolve().then(a.bind(null,"f642"))}}),r=l,o=(a("a558"),a("9ca4")),n=Object(o["a"])(r,s,i,!1,null,"6f31c274",null);t["default"]=n.exports},d020:function(e,t,a){"use strict";var s=a("406b"),i=a.n(s);i.a},d23e:function(e,t,a){"use strict";var s=a("97cd"),i=a.n(s);i.a},d2b7:function(e,t,a){"use strict";a("5319");t["a"]={guid(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},sub(e,t){var a,s,i;try{a=e.toString().split(".")[1].length}catch(l){a=0}try{s=t.toString().split(".")[1].length}catch(l){s=0}return i=Math.pow(10,Math.max(a,s)),(this.mul(e,i)-this.mul(t,i))/i},mul(e,t){var a=0,s=e.toString(),i=t.toString();try{a+=s.split(".")[1].length}catch(l){}try{a+=i.split(".")[1].length}catch(l){}return Number(s.replace(".",""))*Number(i.replace(".",""))/Math.pow(10,a)},div(e,t){var a,s,i=0,l=0;try{i=e.toString().split(".")[1].length}catch(r){}try{l=t.toString().split(".")[1].length}catch(r){}return a=Number(e.toString().replace(".","")),s=Number(t.toString().replace(".","")),mul(a/s,Math.pow(10,l-i))},add(e,t){var a,s,i;try{a=e.toString().split(".")[1].length}catch(l){a=0}try{s=t.toString().split(".")[1].length}catch(l){s=0}return i=Math.pow(10,Math.max(a,s)),(this.mul(e,i)+this.mul(t,i))/i}}},d3a9b:function(e,t,a){"use strict";var s=a("0bcf"),i=a.n(s);i.a},d785:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-pull-item"},[a("upms-search",{attrs:{left:e.left,right:e.right}},[e._v("扫描出库")]),a("upms-line"),e.showChipDataSeen?a("showChipData",{attrs:{showChipDataList:e.showChipDataList,title:"选择库位",isShowArrowRight:!0},on:{removeNode:e.removeNode,selectUser:e.selectUser}}):e._e(),a("upms-line"),a("upms-bottom-buttons",{attrs:{buttons:e.bottomButtons}})],1)},i=[],l=(a("fb6a"),a("e6cf"),a("ddb0"),a("c973")),r=a.n(l),o=a("57bd"),n=a("22c2"),c=a("8395"),u=a("694d");const d=new o["a"],h=(new n["a"],new c["a"]),p=new u["a"];var m={components:{"upms-search":()=>Promise.resolve().then(a.bind(null,"328a")),showChipData:()=>a.e(0).then(a.bind(null,"e299")),"card-info":()=>Promise.all([a.e(7),a.e(9)]).then(a.bind(null,"58db"))},watch:{scan:{handler(e,t){this.showChipDataList=[{code:e,name:`${e.slice(0,1)}区${e.slice(2,4)}层${e.slice(4,6)}排${e.slice(6,8)}列`}]}}},data(){return{bottomButtons:[{label:"确认出库",color:"#2196f3",click:this.ok}],stopPosition:"",showChipDataSeen:!1,chipList:[{id:3,text:"低"},{id:2,text:"中"},{id:1,text:"高"}],defaultCheckList:[{id:3,text:"低"}],left:{icon:"navigate_before",click:()=>{this.$router.push("/functions-all")}},right:{icon:"qr_code_scanner",isShow:!0,click(){}},showChipDataList:[],selectListData:[],cardList:[]}},methods:{ok(){var e=this;return r()((function*(){if(0===e.showChipDataList.length)return void e.showMessage({message:"当前库位为空，请扫描或重新输入!"});let t=e.showChipDataList.map(e=>({Code:e.code,State:0})),a=yield p.SetCellStatus(t);a.status&&e.showMessage({message:"出库成功！"})}))()},selectUser(){let e=this;this.$router.push({path:"/SelectList",query:{path:"ProductScanOut",list:this.showChipDataList,isDefault:!1,contacts:e.selectListData,isSingleCheck:!1}})},removeNode(){},beforeSelectHide(e){this.defaultCheckList=e}},created(){var e=this;return r()((function*(){let[t,a]=yield Promise.all([d.GetLosInfos(),h.GetAllJobs()]);t.status&&a.status&&(t.data.forEach(t=>{t.WarehouseLocList&&e.selectListData.push(...t.WarehouseLocList)}),e.selectListData=e.selectListData.map(e=>({name:e.Name,code:e.Code,disable:!1,status:!1})),e.cardList=a.data,e.showChipDataSeen=!0)}))()},activated(){this.$route.query.list&&this.$route.query.isFromSelectList&&(this.showChipDataList=this.$route.query.list)}},g=m,f=(a("6154"),a("9ca4")),b=Object(f["a"])(g,s,i,!1,null,"3cee006c",null);t["default"]=b.exports},e05e:function(e,t,a){"use strict";var s=a("a561"),i=a.n(s);i.a},e377:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXoAAABxCAYAAADbEGjnAAAABHNCSVQICAgIfAhkiAAAIABJREFUeF7tfWt3XMWZ7lNV+9ItqXWXwGDA8XC1SE6yDMayjW0lARJiJpOZhdfMl/kYfkbgZ8z5A5llzpxZORAIECLLF8kGazLJ2CbgxLHDxSBZ126pe1+q6qx3b7dtjO2+7d0XqTZLq2VU9VbV8+79dO233gtDOhfDq68y7NjBsH07RzbLMDfH4boMCwsMW7bEo9LvdDlO/Gnb8WcQaPi+xtBQ/EmX52ls3apx4QJQKGhs366Rz8d/m5/XePllBcbif5vLIGAQMAgYBK4jEBNrPZfWDK+/ziMiJxLv7+fI5zm6u3k94hLrk8lI5PMKo6MKc3MKU1MKr76qEpNvBBkEDAIGgQ5DoDqiP3JERITe18fxpz8J9PTw67vvTlnw2ppCLqewvBx/CVy8qMxbQKcoz8zTIGAQaASBbxK91hyzswL5vIDvi5bv0BtZXTV9ifwXFyWAEBMTYTVdTBuDgEHAINBJCDBMTlooFgWkFBgYEJ00+VTmynkIxwnx5pvSmHxSQdgINQgYBJqMAMOZM10olQzB3w54MvdIGaJQCHH4MO36zWUQMAgYBDoOAYa33nLR2+t03MybPWHyBCoWA3zwQWB2+s0G34xnEDAINIJAbLqx7WwjQjZdX/LsAQI89VSw6dZuFmwQMAh0HALxYeyJE7mOm3k7TJh2+XSIOz8fGNNOOyjEzMEgYBC4HQIx0Rs7feN3B9nzV1aI8GmXbwK3GkfUSDAIGAQSQiAm+iTt9OWoVnJbpGjWYlF/LZI1jmLVeO014Be/iAmRRdP4OjlSQNZrr8XRtSMj8TxzORZF2V6+HH/SRdG27RCodbNCyHNnfNwHY+YAN6Eb1YgxCBgE6kcgJst67PRE5LSLpQCkTz9V+PnPJRhrbQTqq69yHDjAMT/PMTLCUShwPPhg/EXQiovwuXTJxyuvGFt+K/A3YxoEDALxXvoaDgwnTvTcERMiLMeRyOVkFFHaia6GFAh29CjH6CjHxYtWU2MGCL+hId8c3pqnziBgEGgFAjciY8t2ejK9FAoKQkhksxITE2R+2Jg2Z3qTAaymRQCbHX4r7nEzpkFg0yNwg+gpnw1dnbhbT0KNZPY5dIjSPljwPJFqLh+zw09CY0aGQcAgUCUC1SU1q1LYhmpGX3w9PRZGR0VqkcOxp05p0365bqgbxizGINC+CBiir0Y35AH09tsO7r/fSuVgN/bSKZl8+tUow7QxCBgEakXAEH2tiJFd33VtKEX2/eSucoqFF1/0khNqJBkEDAIGgRteNwaLWhEo7/KzWTtRez65rZ46ZVwya9WHaW8QMAjcEQGzo0/i5khjl0/5dHbuJHNOa2MTksDHyDAIGARaioAh+iThjwO2HNi2nYhYY85JBEYjxCCw2REwRJ/GHZA04RvvnDS0ZGQaBDYNAobo01Q1Ef6OHS7uu6/xg1uzu09TU0a2QWBDI2CIvhnqTZLwze6+GRozYxgENhQChuibqc648Hqm4QAss7tvptbMWAaBjkfAEH0rVHjmjI183m3YLZN29zMzRVPasBVKNGMaBDoHAUP0rdQV1QFo1A+fdve5nGcyY7ZSkWZsg0B7I2CIvtX6iZOpNW7OoTQKe/aUNmym0VbryYxvEOhgBAzRt4vykjDnUFTtxx+bJGntolMzD4NAmyBgiL5NFBFNg9IqzMxkGsqjQ6ac0VEfY2N+Oy3NzMUgYBBoHQKG6FuH/Z1HjguiZBo6rF1akjh0qGgyYrajgs2cDALNRcAQfXPxrmU0hunpxnf38/NFk+++FthNW4PAxkPAEH2765R294ODbt158MmUMz/v4/BhY8ppd12b+RkEUkLAEH1KwCYsNondfYCJCfLKMZdBwCCwyRAwRN9JCj93zsHcHGXHrE9vcepjY7fvJJ2buRoEEkCgPsJIYGAjok4EqJbtY49lGjTlGLt9nfCbbgaBTkTAEH0nao0qg73xRhYDA6Ku6ZPdHihhYiKsq7/pZBAwCHQUAoboO0pdt0y2UVPO6qoPU6O2k+8AM3eDQFUIGKKvCqY2btSoKSdOnVBs4xWaqRkEDAINImCIvkEA26I7RdTOzmbrTn9MWTCff37dBFe1hTbNJAwCiSNgiD5xSFsocHKSomnrq1dLdvuDB4nsTTHyFqrQDG0QSAOB5hP9G290ITuSg9BZcGYD2gIrf8KGhmUx2IBlaRnakmtlAWEIVoLkHhxeQig9+IGHLl7C+rqHICgZW/O126OR5GjmkDaNZ8zINAi0HIFkif6dd7oxMDAIH70Ig16LiZxm6AVDTiv0gvMctPYBlWdAEVwEkDKEKH8iYCELIXQQ0qelAwRhCMfpskKd0YK50DoDrV1w5mrKB6OZC+gMZ8xVWnugLwSmPab4ChNqLvTZHCxvDl9+ObdpUgFQJas//jFbtwvmF194JpK25c+mmYBBIDEE6iN6OgC8d/sopHePJax7NNOjmuEeKMaYVnPgfJ1prIZa5mHZqyj5eThqFWGYT9Wljwp52HYGXV0ufNYLwe4RjNPcRgE2CuglBjbHtJwLNZuDLM5hYuJqYmi2k6BG7fZBYCJp20mfZi4GgQYQqI7oj595EEptFVzfrzXuAWcDkHqOMXwlBb5CKZwD97/CxEShgbmk33VychgiO2pFX0xiVEOPQulBcPYVk+qKhPUpVOFC26+jFqQasdsbj5xakDZtDQJti8Dtif694w/CcbcJrrdprbcxhs8kYxfgB4tgma8w8dTG2QVThafvf/8eiOyQkPLvtMYjECzPJS6EYBdwYNenbau9aidG/vZLS261zb/Wznjk1AWb6WQQaCcEYqKfnLwX3HlUwNqmWUzsTLFLIfcv4f33L2264tPHjm2BFo8IWI+QWYoBF2TILmBt7gJeemm9nRRY9VwayXFPlau+8x3KkWM8cqoG3DQ0CLQPAhHRixMzf88kL4ScX8L7v958xH43fZDdv2/kEaHUI7TbZ1BLjOFC6OsL+MGez9tHlVXMhA5pjx7tqispWpzu2OTIqQJm08Qg0G4IVGejb7dZt3I+09P3W5I9opV+UAvRqxhm8XnPLA53SOm+Rg5piew/+cTDK68ErVSBGdsgYBCoDQFD9LXh9fXWk5PDlujaqYCdDPpjKfUsJsYvNSKyaX2np7N116Y17pdNU5MZyCCQBAKG6JNAkWRMTX9bMLZTg+eUZrNYuzrb9kFcjXjkbET3S3rbOXrURTbroGg5CEoObOFEgX1CcHDGEK5zcM4QMBb9m3EGKeO/cc6v306hlNBKQwgFpeNPrXX0uyUUwEOgFKLIQnSzEHkWokcFIE8nxwnx1FPmrSmpZ9PIgSH6pG+C3/52yLJ7dipGu3xckET6B575a9LDJCavkUjaTnS/jGItRjNgYQZu4CIUDkToQAoHlqgv7XNiyrhFkEYAHnoIhAdhe7B8D/luD86il2o8SlrrMXJbhoAh+jShnzz5pOB8p+aiTzE9jX3PnElzuLplN+KRs7Qk29ITid5W0J+ByGeh3QygMuCsq26M2q2jUgos9MBYCWG4jmx2HcXiuvkCaDdFtcd8DNE3Qw+/mR4UWbVbM3tMKXYUB3d92IxhaxqjEY+cVvva03lDGPZAuz2QQRdsK1PT2jdSY3oLkGodtlqH1kXk8+ttb0LcSPi36VoM0TdTMe+80y2y/Qc1MKYgj2L/ng+aOXzFschG/e67XejuvmFrrtjpWgPytf/P/yymHnNBczx5sgdK9UA7PbB4N5RKzuSilA+pfAjpQwgPQcZHMfSRLSrQGn1fw/M0ikWNQkFjZERhfl7j/Msar16LM6A5vv46x8gIw/w8R08PQ/YJhsICx4M2i3IQ6V4L63kbTFvIZqw4uZ9nA44FreN/J3XReYHj5gEvj0W3gJee6sxYkKTw2IRyDNG3QulnznSJUnhQK/akAj+K/U+3F+FThtF6yhSm4WtPeZVGHskBXg9cqwcy7G5IZWTyUChGye8gSnBDH57nY37UbzsXWTI/hTkXXZ6L0HahQhe25UKrxt5YiPjBCpA8jy61agrPNHRHdURnQ/StVNMbb3SJ3pGDmrEnFVNTeHb8dCun87Wx63W/TCLVMRGczPbBZX2AztWFCRG67RThBSVkGVXQKiKXK2GsQ+IdKi2a0lpczmeQ5V2wvC6E9CnqS3NB5h4hV6DUKq5cWd00WV4rYbyB/m6Ivh2USYQ/MHxAa3xHhfx9TLTJoW0j7pe1+tqfOJFDYPXB5n117VhDtQYXeThOAdlsccMQei33Z3TOcr4LznIXOO9CwLrAkK1FRNSWhYWI9IvFVbzwwlrN/U2HtkPAEH07qYR20R7byy3sUNz+NfY+9ZeWT6+RhGiVfO2J3D02CMfqr8kmzbkEETvzC+C8gL17C6YM4h3ulFc1x49O92BN5cCRgyDyZ9U/90EQwuXLcN1l7Ny5anBu+RNZ1wSqV3hd4k2nuhCYnh4Ukv8EGoEs4C28uHu1LjlJdfq3f7Px6KOU67/2++VWX/vJyR7w7gFwPVg1uROxl4I8MsjDdQt4yhwm1q3am4nfYr01uZySOczSqyhay1i8vGxMPHVroekda39wmz7FTTzg5PTj3BIvci3/EO7f835LkYgORUeydZH9qsqgW1M9235I7lS1DioXmRXLCMMV7NtHdQ50Vf1Mo9oQoBgK1+1FEPSBuTlEZTyruCjKl0w8Wi9ByiXjv18FZi1sYoi+heBXPfSJ089yzfYqFf4aB/b8T9X9km5Yi6+9bTso6UHIYBCO4yDwNWynFKUBuN1F/z+Ua+iyllEsrmBiopT09I28KhA4c6YLpVI/pOirercfkT4vQNtLkCuG9KuAudlNDNE3G/F6x5uczAiR/Qk065dq/deYmPiyXlEN9aNCLePj2dv62mcyHPlgACIYBHe/6QYZBojInkwAdF0nCG8JX365aEwBDWkm+c5Regz0AX5/ZN+/OZfPnUYjnXK5BsaW4LpLJmdP8mqpR6Ih+npQa2WfqQ8e4EL/REFdxr7xt1s0FYYzZ7IoleJAJY/3ImMPQKuBivMhsrecRbBg3hBBRbTapwF9wR86lEMRfQiKA7Dt6gK66NA8y5ewuLhsInSjIk8WCgUHPVsdOOsOwtBFaHFYoYIQEoGj4AcKwpJYXA0xYlFeo4bfbg3Rt8+jVNtMTp78LpfiJQX8B/bvPl9b5wRaHznnYGj5AQiMwrIqP/RBUITDlqKdHgUo5XKe2e0loIdWiXjnnW5YuX64qh+6ypQT2i8CXUuw/OUNFaQVlyMdgraHodiQEBgCU13Qolsz5kBrFwwOot/pP+0D2geDzxjzIBFCwNJaC2jGwRgH/c60BHgvh84orb0oyI9pjylNb0wFBlYINcsDYT46JPe7VjDxveXb3RKG6Fv1oCQx7pEjQtzzwD8Bgsk//f7/NqEgCMPx4/1Q9jCYzkVuejy6eW9P9OReqbEEFizAtr1vLHl11Te7vCRuhBbLiBLIdfcDYX/V7pt02O6yJeTzyx3jqx8F8ln3wRHDQrEhcDakGYag0QeNBQZ+lXG2ECosAGoZSgfwpQ/ueljyfeAzv27zZJR11c6gq8tFCVmQx5QleqxQ5zQjs5q2tGJbAJAn1SIDFhGqJel1HcML/2vNEH2Ln5FEhp+aeYJz/o9Kq7exf/y/EpF5sxC6ybKDI9DB0G1f2SNPDRZ7a5D9nYtlqNJi5ONe6erEVMeV1rSZ/052/fX1fmin//pmoBIeFJnLrGWUllbwwx+2j68+pQLpHX5ICGzTCtugWR8T/FNALUmtFxDqBVhyAc8+u1RpiU37O71dHDgwCMsaBKwBlAp/wnPPrRiib5oG0h9ITM38PRgG5ZL8D/x0X76hESkx18zMAKQYrpiGgA7g/LUStFsASivIZmsrIt7q7JcNAWU63xEBcsndurUPRT0Q7UCrOcyljUKoV6GtZYh18r4Km4YwxXjY3Q8Jpbdpxh6C1j1Mq8uS4xI8dgk/3P1V0+aS8ECG6BMGtOXiJme2cUv8k1KYwYFd0zXPh15POR8Bz1QOaKJMj8y5ii5cjeztjfjaU46cgwfXwa5lgKx54qZDWyMQ7zSJ7AegrL6qiryUPXisFF1uJ88MW1bwZKjFNs7VMNPsspTsErzgMl7YO9fWmNYwOUP0NYDVSU2tqVPPK8a2Kyn+DyaeunrXuUf+8bODgD8cpf2920Ul8WRpBXn76m0jdumB/tnPslEq3lqvJBKi1Tqmad8KBBhOncphTQ7AFn1VB2mRXd9SqwjDVUwdXL2eFrrWFfxmehA9Yowr9STABWfqbLhsn8VLFZ6TWsdpo/aG6NtIGYlPZfKDe8H1C0D4VxzYe+wb8ulVFZlhcD1Q8bWaPCaEuIrPP1+oeKBEZp/Z2Rvul7UuzBzS1opYZ7f/wx+6sbbWj5Lqr7poTDkGI2SrKPDVijn23zvTBzd4kjM2BvAM1+G50OdnO9kcU4vSDdHXglaHtrWmTn9fcf2wsvHvUbk5YBh291DFLJGUt9xyF5GNTDO1F6uoN9Ux4WwOaTv0bmtw2pRE70p+IEpRrVVP9QnYWAg/LET5kBYXC9fLW05NfxtcPMk17uVcnw3Xw3N4ft8XDc6y47obou84ldU54d99+Bh31L8qqE+g2dm7SgnogeHzGB8nv/fGcsw0kurYHNLWqewN0o3OfLY83gt4lASvt+pKYlpnBOdPaKUfZZp9LAMcxw92XWj4Xu5gWA3Rd7DyKk6d3CL7+4cR8qGyHZRztgdKDSqp3oUQ/nUZ5OJmqQUsL19N3Lf9yBEH991XX1GMNKpWVQTONGhLBCbP9UCt9EUePJRn/9Z0y1rey2GNgen7AZxTgp+FVHH8RpRjKShBiDVIuY6urjXs3FncLORviL4t7+gGJhV5vmwfgK2HoGXP7SXx+zjUCwrsJLj4AOu4iueeWmlg1MpdKfQboAyWtd9zRPYmkrYyxpupBUWOnjjRC+X0A+ppzsR3wREoKc+Bs+rrOAhrDRLrCPPryOXWkc/7TXXpbJLOan/omjQxM0wNCNDh59GjfVDOELJOL6S8u8cL4yUEawtCZPcCsOX+3f9ew2j1N23EI4dGrVTIpP6ZmZ6diMDkqd3c0gcY9DkZsrNwFJ0j5eAjV5X75p3WTL78jHtRkXhueQioWLzrofCZj2LRq+iM0IZYGqJvQ6VUPSXymiFy5xioeGPTzUu5Zkqlq5iYuBGxOj39uCXFP4dB8Et8f9/HVY9db8NGPXKM3b5e5DdOv5Onx7liBzjw36EIp26bN+edP3TD8XLgKgdLdkOJOAFfUpdQPsJQgjEK6Ip/6PfyDzkTrGQlcmsKfX0Sc3MqsTcFKh5zaFbA9y14fQKYs9DVJZDXFjKhgHREVNTHlgLvjl8kN1RD9EkpvllyyCvh86Vh2GywqmLQQq3Bc67i4M7FuwUjiamZw2DMk/t3/6opS2nEI8f42zdFRW03yLGZvRycCH42lOtTNWV1pPOqXK4LQnRBim6EIRVTT5b8qwaMhVCS3hokuJDQimoxcHDG4vxRnCEIKI8UA+PX/h9jVR9G3zyP/OJZOnMzRF+1clrYkMh9bm4QcPsrBjTRNCliNcQiuLdQ08MwNf09zsRzSrNf4sCuT1Nfcbwupy67PU3O+NunrqK2GCAuvHOAS3U6nPvbFA4fvuFE0MgEbyb/gBPxu1CyPqeBRuaRZt+w+DG9wRuiTxPkRmRHJLg2CC4Hqqr0Qz7vCkvg/QuYGKucTOxOc3vjjS7RO/ovjPPL4bNP/7aRJVTVt5FDWhogk5GbyXuiKkw3SqPjM89wjQMcejaUHu3gm5P3Jiq4knfhug4sy0E+cGEJJ/oScB274hlYW+EfXKSka4bo20kpb11wMbw0gGKV5E5zD9UKkL16pzzUdS9v8tQ+Lth3lZ//JX74w4W65VTT8W5Vq6rpb0w51aDUOW2mpr/NOXuOMXwkv/j03bY7/Izr7NpY5jaGmI11ZoPDBmd25MZMP0m9GdAGjtKOcC4hpYp+MlwiEBLcj88ISpaEKEqgP4S9JqNgQzoXOHdOlrEzRN/K258OJk+fpqo9vRCIfYOruahqjwgXUi+/N3lmmAv5L0rLWRzYU3uCtGrWcqMNw/R0BkpVLmJyJ7nGlFMb4u3W+viH2zlTzzGlr0oH72H37tWWTZGezddeY9ixg2FkhOGTTxgGBhjGxoDLl2PezGZv8Kfrfp1LPS8ONCwUYg84x2EolTiGhm4saXU17tPbqyNyXh5RGF1RuHhRJf3lZoi+2XcSRYo6Ti8Y60VQZR3OeOcel2T729+WErNRVrl2SpCmOe6XYfGXNdn8q5T/tWZkN+3tderpGvUhU86bb5bw6qu1pUque0DTsWEEJifvFVb2OSjGJPPew/79VxqWWY2AOKMmx+gox9wcRy7Hr5fHrKZ/0m3ozdT345+eHoViUWN0NCb+8+d1I/e0IfqklXWrvKj6Dnrg9HUDMlfTKx2Ru6MX8fnny80m92/AcvLkQ4D9IqQ8nUpxk5sHpFdj267u7eZO+stkSqZUYdo3d4Py44L3L2jOtigvfA8/2Ft9oFMtQ8dxJiIi9HPnBPr6+G2L29cis1Vtyb04l1OgN4b5eYWREYWDB8mEc9dUJYbok1RYfEN1I5vthpQ9UFZP5M9a7VXOv011VV13qR2JKi5uwnrll7kjODyWjPfD7fBp1G5PMpeWJA4d2jRh7tXeZm3R7tgHB7hW44rhLezf/cfE5nQzqa+siIjQ60mZndiEmiSI3gYKhbjAePkt4PBhWR7dEH0jeqAw7KNHc3Ddbii7BxxdNZ/IRxki1So8Z6XpFXXqXfvk9MNciMNKsLewd9d/1yumqn6N+NuXB/jiC4pmTO9LqaqFmEYRAnTQysSPudIfhgd3TzaMCm0IDh0SyOfJJ57eBA2n3QzqtQDDGBRyJyIb1YsvfrOAc8Oa2AACKH/MY49lsBhkwdeygJuJkypRrdQ6Lo0iJFZhhyvY12DJvzqGT6qLOHb6H+jLTQbrR1J1fWskKVp5sbEbZslUsEpK+zXKmZ6+X4Tix4Bekivzb19PI1yjGBhirxUxEMfERD/1wQPgajT6nUJ7KeBG2j6E7UEVAnieD+thDwe3eZVsQbXPoo16lEvhIZcBwgx4ROb1E/r19yZeArMK8NUaRrOrGEvR5NFsOI8ff5Qr67Bi7P8l+gp+6zrKX7aNvoZTvpyDBzf2fdzse+Bu401PZ4Xmz0PqUSnZ25jY/VlN07uZ2AcHaedee+WymgbcYI3JfPnSS+sx0R8//WjFAtDX10/huxR5qXx0Cw9S+vB9H7mc39aZ3+JCxQ44t1EsOhA5G4HnIMtshNwBY3ZN9vQ73Q+UU0aodXBegOMUcPFiIWlXqXa8FcXUzD+CMUf+7jdHGvEOqLC2xl0waQCyZ27dGuDhh/0NvXFp8Y1iHZ85qIBnlNJv4cCe/6l6OnEQnQVD7FVDdseG11yOY6I/duo7dZshbjcC2Z05k1EuB6liZ/9Qxp9WGB8YhNc+LUvC9xVsW6JYVHBdieVlhWxWYmpKRaQR1TQ9+nU3KPpmz2Y5ikUO1+XwHA7H4/BtDhUKWIEDnrERhk4UyFBNBfq6YGUhuChAhAUUi2tfSxhWl7wO7jQ5/TgX/GdK8LdTtd2TKWdkpP7UCWWIifBHR/0N9YbVDrfPsVPf4Yz9mEOdDp8dP1pxSvR8v/66hWzWQk8PN3b2iohV3yAIimRWZZHN6/s/ehxCOolneKt+Ou3fkr6kNCuC+SUURQk+ihi1iu3oGdNqMCPbPdMDck39Cj/as5jKfIgc3n03m4ibnMl3n4yKJk9tFUL/GFwsyC/Ct3F4T/GOgsu7dnOAmgz2d5Kyd2+B3lq/fkJdNm84joN17kD6brQzDoUDQeaNOg8f011KstLpbcR2ivD8EjIoYkWUDKHXAfH7Jx/ijv3TqAjz/j3v1yGhui6NBljdPAp5KFy65OOVV4LqBjetIgSOHMmKex98EWAD0pJvY8+ez7+BDG0od+yId+0DAy3KGlmDvsrBS0NDcQAT+a1TANNDD2mcOwds3x77refz8efBgxqvvx4PQJG05YsianfujP918WIcWUuOLxRJu7DAoohZ+knDW4jWcC0leW2uSOSj+uc/O7iw4CJbpFdnB4FwYPE44Q/ZuW8t71UDtqk2JR91rQMI2weVzVM6gEIAqQNkAj8qajE/H2wGe3qqON8qPM48uEuF4a8wsefPqYyd1EFteXJE+I7jpepJlAoQzRcaFZ7X+nHF1PFv2OFp114sCghhJfLmlfTyysFHZCpOKAK1oSkSvwIUi8MxP8/xve+x6JPM1BQPUOtFaRX2xG9VtRF9NQPRK/X/nhV4oI9D/klENrcwFMhkOBwn/t22OfJkR7c4lLzxKUMOSwmILIdXohuER7Z1MpvQNyol9yGbfznJj9KUx1nBslRk+w9tBTukf0usrYUIwwDd3T48LzAPbTXKS6nNr07kxID10yjf/ZXLv0rNp/3CBRdffVV/+oRbl09EsLIS4OWXA3Noews4R08+zYX1vFLhcRzYeyz6a9nWvnWraChnURq3IXmf0NngzWd/aYyTpsxyyoZcjkVxA5VSNgwMeOXzp+SJPs2FGtmdjcDvToxxy/6pYup9PDt+OpXFENnMzmYSz1lCuyOzYQBOfPgY1+ELTPO/yC8vvxeZMNotWIliJih748qKws6dlB5gY+c9Kn8B0NtTfz+H59FmmoqXRAex6ezoU3l6jdCNhIA4MfNjqdkwfDmdWn4TCgIk02LSftdl18zf/z7cVGa+Y2e2CBX+iApwyy7rfSwsrNZlTkjjRqY3r+3bQ3z2mcTEBIX93zXvSxpTaDuZZAa6Kf+N2dG3nYY2yYR+e+oe4eJ5Wq0Mi+9hYuLLVFaelCvm7Sa3GUw7J0+Owmd7uBAPKM5+B/h/S0VPtQiN6w+EyOUo2pnqtBpir4CfIfrPDKpVAAAFkklEQVRabjDTNnkE3j/5d9y1KAf5vOThu6mlhEjSO+dOpO84Ep98InHlikwxaCx5HZQlluNVyAQwOjooSnJCA/crT07BVR+lN3AVksnGXiyGePllIvaNbYqpAo5amxiirxUx0z4dBKKqQvx5DnUuvPLZe6mYRcpeY599RmaddO992nVS8B+ZE4DrlX7SAa8GqYTB669zbN/Oo3S95NVxc4ZHz+sVdvezmrGHlC+Pw1XVR7TWMI2KTSkV7+IiYRcaR4qKaFVskO7NXnF408AgcAsCJ07t5uDPKeij2PfM8VTwiVPZurDt+pLS1TOpOChLYW4u9vyoIod4PcNc73OnaPI7fcEp1SO0vV9z9i0VBidgsz80NH6tnctpdsnWvmOH2bXXip8x3SSMmBHXFASsY9M/UMx6WlnyXYyP/1cqgxIZzsy4LXUFvDUwhxZKrsRbt2pcuIAoQOfW0nXlsnUUcLNlC6LAm3vvBRYXaw+8CcQQoL/LbbFDaX0MLGwewZdt7fGu3RyipnKTx0LNjj5FcI3oBhGg6ly66wB32C4eqlOhLs6kkkuIAq62b3cTd8lscPmpdrey3xK+v0tr1q9UcKppO3hyfaS3mkJhc3ktparMysIN0VfGyLRoNQJExPc+sJtrNs4YLklLzdw2zL7RecZpqsmcs4ELWNjf5VLvYkyvSsY/AAsuNgrbXfuXzyocJzQeMqkifVfhhuhbh70ZuR4ETn74pJDhODRXkukZ7N99vh4xFftQ+L7r2teDTyp2aOMGSmWEtJ7Rgj/NOD8nZfFDCHE1tRmT26mUodm1p4ZwzYIN0dcMmenQFghMffCAgBzXHFsV5zPYs+tUKv7UdHB7/rwN8tSpJ99IK8EKMCY4H9NM9CrGPoK3+iEymeRLKt68a3/zzc50LW2lnpowtiH6JoBshkgRgVOnei2fjSvGHmfQcxI4jyuXP0oln04nmHa0vV0wjGmln2TAeSn4WWj/L4lq4GbXUePXnii0aQkzRJ8WskZu8xE48eFjQgc7tBZPMOi/SYaPINT5cga/RCdUNu0oRdWQWnv5uE/Y9g6tidz1FRno8/CWz6K3N5mIUTpAzefVtUjUjZ87prXaTGV0Q/SpwGqEthyByemHhWU9oSF3MI2vJKzzWPI+wk9TKMZOO/2xMYGVFdEUm75SPVBimxDWNq30fWDMVxrn0J85i3z+zsU+KiklTumgMDYmceKExs9/bki9EmYd8ndD9B2iKDPNBhCYnNkmONuhOX+CMb0slfwzJL5CuHYFzz230oDk23eNA7JElItdyjhVdyORuEHgwrIeEtrephm2gTGXSXVZMlxCSf4VXchXvYZyYFJPj8L8vMLIiLpesrNqIaZhpyFgiL7TNGbm2xgCU1MPANa3BBP3abAt5EpJ5g4GdSUEvwIWXMGzzy41Nshte1PZToYdOxiWljj27YsrC1EKgnKFIQp46u7ugY8hqHBYQAxo4AEwNcSgLks4f4Vav1zRY6YchEW7cyL0Tz9VGBhQOHyYcsQkY85JASAjMj0EDNGnh62R3AkIvPNON5zcFthiiwDborXaArAMA64wqa+EFv8iqkxW8ktQvIRuXcS5c6W6yw2SmSebpWpsLvr6RqDcYcHUCDgb1lKPQDDJtL4KpRck6JN9gZwdl+abnQUefTQm6vn5+PP8+fjzF7/QYNHjbIi8E+67Js/REH2TATfDdQACR6az2CK3QFtbIPmA4OgF1xkNngFUlr4IompKHEUoVmJQJXBRhFIlCVYQ0Dlo7YIzRxOhSx0TO2NUd5lBaU9pLAiBIpP6aggxD6xfhVLzmJgodQBCZoodhoAh+g5TmJlumyAQu1pmgVwGCDPgyAIqE0XVWnaAUHoIpQ/ue7AsD9msh3zeN5kY20R/m2wa/x8kzDFhz0WZ+AAAAABJRU5ErkJggg=="},e557:function(e,t,a){},e783:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container content"},[a("upms-search",{attrs:{left:e.left,right:e.right}},[e._v("请选择默认组员")]),a("div",{staticClass:"line-middle-line"}),a("q-input",{attrs:{placeholder:"请输入搜素内容"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"text-primary",attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("div",{staticClass:"selectListContent",style:{height:e.pageHeight+"px"}},[e.selectList.length?a("div",{staticStyle:{padding:"5px","border-bottom":"1px solid #c2c2c2"}},[a("showChipData",{attrs:{isShowTitle:!1,showChipDataList:e.selectList},on:{removeNode:e.removeNode}})],1):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.search,expression:"!search"}],staticClass:"flex1",style:{overflow:"auto",flex:"1"}},[a("div",{staticClass:"contact-list"},e._l(e.contactGroup,(function(t,s){return s>=65&&t.contacts.length?a("div",{key:s,ref:"group"+t.name,refInFor:!0,staticClass:"contact-card"},[a("div",{staticClass:"group-name"},[e._v(e._s(t.name))]),e._l(t.contacts,(function(t,s){return a("div",{key:s,staticClass:"item",style:{opacity:t.disable?.5:1}},[a("div",{staticClass:"m-left"},[a("div",{staticClass:"u-icon"},[e._v(e._s(t.name.substr(1,2)))]),a("div",{staticClass:"u-center"},[a("div",{staticClass:"contact-name"},[e._v(e._s(t.name))]),a("div",{staticClass:"contact-name-detail"},[e._v(e._s("叉车司机"))])])]),a("div",{staticClass:"m-right"},[e.isSingleCheck?a("q-radio",{attrs:{val:t,disable:t.disable},model:{value:e.radioModel,callback:function(t){e.radioModel=t},expression:"radioModel"}}):a("q-checkbox",{model:{value:t.status,callback:function(a){e.$set(t,"status",a)},expression:"contact.status"}})],1)])}))],2):e._e()})),0),a("ul",{staticClass:"letter-list",on:{touchmove:function(t){return t.preventDefault(),e.scrollToLetter()}}},e._l(e.letters,(function(t,s){return a("li",{key:s,attrs:{id:t}},[e._v("\n          "+e._s(t)+"\n        ")])})),0)]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.search,expression:"search"}],staticClass:"flex1"},[a("ul",e._l(e.searchContacts,(function(t,s){return a("li",{key:s,staticClass:"item"},[a("div",{staticClass:"contact-name"},[e._v(e._s(t.name))])])})),0)])]),a("q-btn",{directives:[{name:"show",rawName:"v-show",value:!e.search,expression:"!search"}],staticClass:"full-width",attrs:{unelevated:"",rounded:"",color:"primary",label:"确定"},on:{click:e.saveUser}})],1)},i=[],l=(a("c975"),a("4e82"),a("a434"),a("e6cf"),a("498a"),a("ddb0"),a("ded3")),r=a.n(l),o=a("5962"),n=a.n(o),c=a("f40f"),u={components:{"upms-search":()=>Promise.resolve().then(a.bind(null,"328a")),showChipData:()=>a.e(0).then(a.bind(null,"e299"))},computed:{isSingleCheck(){return this.$route.query.isSingleCheck}},data(){let e=this;return{radioModel:"",left:{icon:"navigate_before",click(){e.$router.go(-1)}},right:{isShow:!1},search:"",letters:[],contactGroup:[],tops:{},selectedLetter:"",scroller:null,contacts:[],searchContacts:[],searchScroller:null,selectList:[],pageHeight:document.body.clientHeight-160}},created(){this.contacts=this.$route.query.contacts;for(let e=65;e<91;e++){let t=String.fromCharCode(e);this.letters.push(t),this.$set(this.contactGroup,e,{name:t,contacts:[]}),this.$set(this.tops,t,null)}},mounted(){console.log(this.$route.query),this.contacts=this.contacts.map(e=>{let t=n()(e.name,{noTone:!0}),a=/[a-zA-Z]/;return e.name[0]&&a.test(e.name[0])&&(t=e.name[0]),r()({pin:t,code:e.code,disable:e.disable,firstLetter:t.substring(0,1).toUpperCase()},e)}),this.contacts.sort((e,t)=>e.pin<t.pin?-1:1),this.contacts.forEach(e=>{let t=this.contactGroup[e.firstLetter.charCodeAt(0)].contacts;this.$set(t,t.length,e)}),this.$nextTick(()=>{});let e=this.$route.query.list;if(e&&e.length){let t=[...this.contacts].filter(t=>[...e].some(e=>e.name===t.name));t&&t.length&&t.forEach(e=>e.status=!0)}},methods:{scrollToLetter(e){e=e||event;const t=e.changedTouches[0],a=document.elementFromPoint(t.clientX,t.clientY);if(!a)return;const s=a.id;s!==this.selectedLetter&&(this.selectedLetter=s,null!==this.tops[s]&&this.tops[s]<-this.scroller.maxScrollY&&this.scroller.scrollTo(0,-this.tops[s]))},saveUser(){if(0==this.selectList.length)return;let e={path:"/"+this.$route.query.path,query:{list:this.selectList,isFromSelectList:!0}};0==this.$route.query.isDefault&&(e.query.isDefault=!1),this.$router.push(e)},removeNode(e){let t=this.selectList.findIndex(t=>t.name==e.name);this.selectList.splice(t,1),this.contacts.forEach(t=>{t.name==e.name&&(t.status=!1)})}},watch:{search(e){e=e.trim(),e&&(this.searchContacts=this.contacts.filter((t,a)=>t.name.indexOf(e)>=0||t.pin.indexOf(e)>=0),this.$nextTick(()=>{this.searchScroller?this.searchScroller.refresh():this.searchScroller=new c["a"](document.querySelectorAll(".flex1")[1])}))},contacts:{handler(e){let t=e.filter(e=>1==e.status);this.selectList=t},deep:!0},radioModel:{handler(e){this.selectList=[e]},deep:!0}}},d=u,h=(a("f0c9"),a("9ca4")),p=a("27f9"),m=a("0016"),g=a("8f8e"),f=a("3786"),b=a("9c40"),v=a("5739"),L=a.n(v),C=Object(h["a"])(d,s,i,!1,null,"5ba82a91",null);t["default"]=C.exports;L()(C,"components",{QInput:p["a"],QIcon:m["a"],QCheckbox:g["a"],QRadio:f["a"],QBtn:b["a"]})},ed57:function(e,t,a){},ed65:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%",overflow:"hidden"}},[e.scanOutWarehousePageDialog?e._e():a("div",{staticClass:"content",staticStyle:{height:"100%",overflow:"hidden"}},[a("upms-search",{attrs:{left:e.left,right:e.right}},[e._v("工单领料出库")]),a("upms-line"),a("div",{style:{height:e.contentHeight+"px"}},[a("q-tabs",{staticClass:"text-grey",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify"},model:{value:e.selectedTab,callback:function(t){e.selectedTab=t},expression:"selectedTab"}},[a("q-tab",{attrs:{name:"出库单列表",label:"出库单列表"}}),a("q-tab",{attrs:{name:"出库单明细",label:"出库单明细"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"出库单列表"==e.selectedTab,expression:"selectedTab=='出库单列表'"}],style:{height:e.tabHeight+"px"}},[a("q-input",{attrs:{"bottom-slots":"",placeholder:"请输入或扫描出库单号"},scopedSlots:e._u([{key:"append",fn:function(){return[""!==e.OutCode?a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){e.OutCode=""}}}):e._e(),a("q-icon",{staticClass:"text-primary",attrs:{name:"search"}})]},proxy:!0}],null,!1,3179694500),model:{value:e.OutCode,callback:function(t){e.OutCode=t},expression:"OutCode"}}),a("chip",{staticClass:"state",attrs:{chipList:e.chipList,defaultCheckList:e.defaultCheckList,isShowAll:!0,height:80},on:{beforeHide:e.beforeHideStatus}}),a("upms-line"),a("selectDate",{attrs:{defaultDate:e.currentDate},on:{getCurrentData:e.getCurrentData}}),a("upms-line"),a("div",{staticClass:"chip-content"},[a("span",{staticClass:"titleText"},[e._v("发料仓库")]),a("chip",{staticClass:"chip-house",attrs:{chipList:e.houseList,defaultCheckList:e.defaultHouseList,isRadio:!0},on:{beforeHide:e.beforeHideHouse}})],1),a("upms-line"),a("div",{staticClass:"pull-flex",style:{height:e.tabContentHeight+"px"}},[a("showChipData",{attrs:{showChipDataList:e.defaultShowChipDataList,title:"默认组员"}}),a("upms-line"),0==e.dataList.length?a("upms-nodata-img"):e._e(),a("div",{staticClass:"pull-item"},[a("div",{staticClass:"card-list",staticStyle:{"margin-bottom":"0px"}},e._l(e.dataList,(function(t,s){return a("div",{key:s,staticClass:"m-card-info",class:t.selected?"borderBlue":"",on:{click:function(a){return e.getItemOutOrderLineListByParam(t)}}},[a("rightCardTitle",{attrs:{titleList:t.titleList}}),a("q-separator",{attrs:{inset:""}}),a("lineList",{attrs:{lineList:t.detailDataList}})],1)})),0)])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"出库单明细"==e.selectedTab,expression:"selectedTab=='出库单明细'"}],style:{height:e.tabHeight+"px"}},[a("q-input",{attrs:{"bottom-slots":"",placeholder:"请输入或扫描批次标签"},scopedSlots:e._u([{key:"append",fn:function(){return[""!==e.ItemCode?a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){e.ItemCode=""}}}):e._e(),a("q-icon",{staticClass:"text-primary",attrs:{name:"search"}})]},proxy:!0}],null,!1,2214802084),model:{value:e.ItemCode,callback:function(t){e.ItemCode=t},expression:"ItemCode"}}),a("div",{staticClass:"pull-flex",style:{height:e.tabHeight-52+"px"}},[a("showChipData",{attrs:{showChipDataList:e.showChipDataList,title:"装卸组员",isShowArrowRight:!0},on:{removeNode:e.removeNode,selectUser:e.selectUser}}),0==e.detailDataAndTable.length?a("upms-nodata-img"):e._e(),a("div",{staticClass:"pull-item"},[a("div",{staticClass:"detailPage-card-list"},e._l(e.detailDataAndTable,(function(t,s){return a("div",{directives:[{name:"ripple",rawName:"v-ripple"}],key:s,staticClass:"m-card-info",class:t.selected?"borderBlue":"",on:{click:function(a){return e.openPickOutDetailPage(t)}}},[a("cardTitle",{attrs:{titleList:t.titleList}}),a("q-separator",{attrs:{inset:""}}),a("lineList",{attrs:{lineList:t.detailDataList}}),a("separatorList",{attrs:{separatorList:t.formRule}}),a("upms-table",{staticStyle:{"margin-top":"5px"},attrs:{columns:e.BatchNumberColumns,data:t.BatchNumberData,showItemBorder:!1}}),a("div",{staticClass:"scanBtn"},[a("q-btn",{staticClass:"btn-width",attrs:{rounded:"",color:"primary",size:"sm",label:"扫描出库"},on:{click:function(a){return e.openScanOutWarehousePage(t)}}})],1)],1)})),0)])],1),0!=e.detailDataAndTable.length&&e.buttonVisible?a("upms-bottom-buttons",{attrs:{buttons:e.bottomButtons}}):e._e()],1)],1)],1),e.scanOutWarehousePageDialog?a("div",{staticStyle:{height:"100%",overflow:"hidden"}},[a("div",{staticClass:"content",staticStyle:{height:"100%",overflow:"hidden"}},[a("upms-search",{attrs:{left:e.scanOutWarehousePageDialogleft,right:e.scanOutWarehousePageDialogright}},[e._v("扫描出库")]),a("upms-line"),a("div",{style:{height:e.contentHeight+"px"}},[a("q-tabs",{staticClass:"text-grey",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify"},model:{value:e.scanDialogselectedTab,callback:function(t){e.scanDialogselectedTab=t},expression:"scanDialogselectedTab"}},[a("q-tab",{attrs:{name:"发料建议",label:"发料建议"}}),a("q-tab",{attrs:{name:"扫描出库",label:"扫描出库"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"发料建议"==e.scanDialogselectedTab,expression:"scanDialogselectedTab=='发料建议'"}],style:{height:e.tabHeight+"px"}},[0==e.itemOutDialogDataList.length?a("upms-nodata-img"):e._e(),a("div",{staticClass:"pull-item"},[a("div",{staticClass:"card-list"},e._l(e.itemOutDialogDataList,(function(t,s){return a("div",{key:s,staticClass:"m-card-info"},[a("cardTitle",{attrs:{titleList:t.titleList}}),a("q-separator",{attrs:{inset:""}}),a("lineList",{attrs:{lineList:t.detailDataList}}),a("separatorList",{attrs:{separatorList:t.formRule}}),a("q-expansion-item",{staticStyle:{"margin-top":"5px"},attrs:{label:"推荐批次","default-opened":"","header-class":"text-blue"}},[a("upms-table",{staticStyle:{"margin-top":"5px"},attrs:{columns:e.BatchNumberColumns,data:t.BatchNumberData,showItemBorder:!1}})],1)],1)})),0)])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"扫描出库"==e.scanDialogselectedTab,expression:"scanDialogselectedTab=='扫描出库'"}],style:{height:e.tabHeight+"px"}},[a("q-input",{attrs:{"bottom-slots":"",placeholder:"请输入或扫描批次标签"},scopedSlots:e._u([{key:"append",fn:function(){return[""!==e.DialogBatchNumber?a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){e.DialogBatchNumber=""}}}):e._e(),a("q-icon",{staticClass:"text-primary",attrs:{name:"search"}})]},proxy:!0}],null,!1,1910872868),model:{value:e.DialogBatchNumber,callback:function(t){e.DialogBatchNumber=t},expression:"DialogBatchNumber"}}),a("div",{staticClass:"pull-flex",style:{height:e.tabHeight-52+"px"}},[a("modeSelect",{attrs:{text:"扫描模式",modeSelection:e.modeSelection,options:e.options},on:{getModeSelectionData:e.getModeSelectionData}}),a("gridText",{attrs:{GridTextList:e.GridTextList}}),0==e.scanOutDialogDataList.length?a("upms-nodata-img"):e._e(),a("div",{staticClass:"pull-item"},[a("div",{staticClass:"card-list dialog-card-list"},e._l(e.scanOutDialogDataList,(function(t,s){return a("div",{directives:[{name:"ripple",rawName:"v-ripple"}],key:s,staticClass:"m-card-info"},[a("cardTitle",{attrs:{titleList:t.titleList}}),a("q-separator",{attrs:{inset:""}}),a("lineList",{attrs:{lineList:t.detailDataList}}),a("separatorList",{attrs:{separatorList:t.formRule}}),e._l(t.separator,(function(s,i){return t.separator.length?a("div",{key:i,class:s.selected?"pseparatorBorderBlue":"pseparator"},[a("lineList",{attrs:{lineList:s.List}}),a("separatorList",{attrs:{separatorList:s.arr},on:{inputBlur:e.inputBlur,popupShow:e.popupShow}})],1):e._e()}))],2)})),0)])],1),0!=e.scanOutDialogDataList.length&&e.isShowDialogBtn?a("upms-bottom-buttons",{attrs:{buttons:e.dialogBottomButtons}}):e._e()],1)],1)],1)]):e._e(),a("upms-confirm-dialog",{directives:[{name:"show",rawName:"v-show",value:e.confirmFlag,expression:"confirmFlag"}],attrs:{confirmFlag:e.confirmFlag,message:e.dialogMessage},on:{confirmDialogBack:e.confirmDialogBack}})],1)},i=[],l=(a("c975"),a("a434"),a("e6cf"),a("c973")),r=a.n(l),o=a("8527"),n=a("a190"),c=a("d2b7"),u=a("031d"),d=a("b5c6"),h=a("7ac0");const p="/api/Stock_ItemOutOrderPickService";class m extends h["a"]{constructor(){super(p)}GetItemOutOrderList(e,t,a,s,i,l,o){return r()((function*(){let r={code:e,downState:t,bDate:a,eDate:s,wareHouseId:i,pageIndex:l,pageSize:o};return yield d["a"].post(p+"/GetItemOutOrderList",r)}))()}GetItemOutOrderLineListByParam(e,t,a){return r()((function*(){let s={receiveWareHouseId:e,itemInOutCode:t,itemCodeOrBatchNo:a};return yield d["a"].post(p+"/GetItemOutOrderLineListByParam",s)}))()}SaveItemOut(e,t){return r()((function*(){let a={itemOutOrderLines:e,pdaPickData:t};return yield d["a"].post(p+"/SaveItemOut",a)}))()}ItemOutPostOperate(e){return r()((function*(){let t={itemOutOrderIdList:e};return yield d["a"].post(p+"/ItemOutPostOperate",t)}))()}}var g=a("fe8d");new u["a"];let f=new m,b=new g["a"];var v={computed:{scan(){return this.$store.state.main.scan}},components:{lineList:()=>a.e(1).then(a.bind(null,"c143")),separatorList:()=>a.e(2).then(a.bind(null,"6f9c")),chip:()=>a.e(4).then(a.bind(null,"6903")),selectDate:()=>a.e(5).then(a.bind(null,"bfd2")),showChipData:()=>a.e(0).then(a.bind(null,"e299")),cardTitle:()=>a.e(6).then(a.bind(null,"7b0f")),rightCardTitle:()=>a.e(3).then(a.bind(null,"959d")),gridText:()=>a.e(8).then(a.bind(null,"d26d")),modeSelect:()=>a.e(10).then(a.bind(null,"c302"))},data(){let e=this;return{selectedTab:"出库单列表",OutCode:"",ItemCode:"",DialogBatchNumber:"",icon:"apps",left:{icon:"navigate_before",click(){e.$router.push("/my-work")}},right:{icon:"qr_code_2",click(){}},currentDate:"2",dataList:[],detailDataAndTable:[],contentHeight:document.body.clientHeight-70,tabHeight:document.body.clientHeight-106,tabContentHeight:document.body.clientHeight-319,unreceivedNum:30,receivedNum:20,totalNum:50,chipList:[{class:"blueStatus",icon:"alarm",text:"待拣货",value:"1",status:!0},{class:"purpleStatus",icon:"work",text:"拣货中",value:"2",status:!0},{class:"greenStatus",icon:"done",text:"已拣货",value:"3",status:!0}],defaultCheckList:[{icon:"apps",text:"全部单据",value:"1,2,3",class:"blackBlueStatus"}],currentSelectDate:{bDate:"",eDate:""},defaultShowChipDataList:[],showChipDataList:[],houseList:[],defaultHouseList:[],currentWareHouseList:[],currentPageData:[],bottomButtons:[{label:"审核",color:"#FF6B88",click(){e.showPostPlugin()}},{label:"发料完成",color:"#2196f3",click(){e.scanOutWarehouseCompelete()}}],buttonVisible:!0,docmHeight:document.documentElement.clientHeight,showHeight:document.documentElement.clientHeight,BatchNumberColumns:[{title:"批注",key:"ItemNote",color:"#2196f3"},{title:"批次",key:"BatchNumber"},{title:"库位",key:"Basic_WareHouseLocName"},{title:"应发",key:"PreQty"},{title:"实发",key:"Qty"}],submitPostFlag:!1,currentPageId:"",scanOutWarehousePageDialogleft:{icon:"navigate_before",click(){e.scanOutWarehousePageDialog=!1}},scanOutWarehousePageDialogright:{icon:"qr_code_2",click(){}},scanDialogselectedTab:"扫描出库",scanOutWarehousePageDialog:!1,pickOutDetailPageDialog:!1,itemOutDialogDataList:[],scanOutDialogDataList:[],preQtyNum:0,QtyNum:0,totalNum:0,dialogBottomButtons:[{label:"清空",color:"#2196f3",click(){e.dialogClear()}},{label:"确认",color:"#2196f3",click(){e.dialogComplete()}}],GridTextList:[{label:"应发数量",value:""},{label:"实发数量",value:0},{label:"扫描条数",value:0}],options:[{label:"添加",value:"add",size:"12px"},{label:"剔除",value:"delete"},{label:"修正",value:"edit"}],isShowDialogBtn:!0,modeSelection:"add",currentDialogSelectData:[],dialogMessage:"",confirmFlag:!1,currentBatchNumber:"",currentPageLocList:[],isApplyOrderJump:!1,addDialogListFlag:!1}},mounted(){this.isApplyOrderJump=this.$route.params.isApplyOrderJump,this.defaultShowChipDataList=this.$route.params.defaultShowChipDataList,this.showChipDataList=this.$route.params.defaultShowChipDataList,this.isApplyOrderJump&&(this.currentDate="2"),this.GetWarehouseList(this.$route.params.defaultHouseList),window.onresize=()=>(()=>{this.showHeight=document.body.clientHeight})()},methods:{getItemOutOrderList(e,t){var a=this;return r()((function*(){if(!e&&a.dataList.length)return;let s="",i=a.chipList.filter(e=>1==e.status);i.length&&(i.forEach(e=>{s+=e.value+","}),s=s.substring(0,s.length-1));let l=yield f.GetItemOutOrderList(a.OutCode,s,a.currentSelectDate.bDate,a.currentSelectDate.eDate,a.currentWareHouseList[0].id,1,10);if(l.status){a.dataList=[];let e=l.data.List;if(e&&e.length){if(e.forEach(e=>{let t=[],s=[],i=void 0==e.InOutDate?"":e.InOutDate.substring(0,10);switch(s.push({label:"单据日期",value:i}),s.push({label:"出库仓库",value:a.currentWareHouseList[0].text}),s.push({label:"领料部门",value:void 0==e.DeptTName?"":e.DeptTName}),s.push({label:"领料人员",value:void 0==e.EmpApplyName?"":e.EmpApplyName}),e.StatDesc){case"待拣货":e.bgColorClass="bgBlue";break;case"拣货中":e.bgColorClass="bgPurple";break;case"已拣货":e.bgColorClass="bgGreen";break;default:break}t.push({code:null==e.Code?"":e.Code,type:e.StatDesc,bgColorClass:e.bgColorClass});let l={titleList:t,detailDataList:s,selected:!1};a.dataList.push(l)}),t)return e;a.$nextTick(()=>{a.dataList[0].selected=!0,a.isApplyOrderJump&&(a.getItemOutOrderLineListByParam(a.dataList[0]),a.isApplyOrderJump=!1)})}}}))()},getItemOutOrderLineListByParam(e){var t=this;return r()((function*(){t.dataList.forEach(e=>{e.selected=!1}),e.selected=!0;let a=t.dataList.filter(e=>1==e.selected);t.selectedTab="出库单明细";let s=yield f.GetItemOutOrderLineListByParam(t.currentWareHouseList[0].id,a[0].titleList[0].code);if(console.log(s),s.status){t.detailDataAndTable=[];let e=s.data;t.currentPageData=s.data;e&&e.length&&(e.forEach(e=>{let a=[],s=[],i=[];switch(t.currentPageId=e.Id,e.testId=c["a"].guid(),s.push({label:"物料编码",value:e.ItemCode}),s.push({label:"领料设备",value:void 0==e.MachineName?"":e.MachineName}),i.push([{label:"规格型号",value:void 0==e.Spec?"":e.Spec},{label:"工单号",value:e.OrderCode},{label:"申请数量",value:e.PreQty,fontColor:"colorBlue",unit:e.UnitMainCode}],[{label:"工序",value:e.ProcessName},{label:"库存数量",value:e.ValidQty,fontColor:"colorBlue",unit:e.UnitMainCode},{label:"已发数量",value:e.RealQty,fontColor:"colorBlue",unit:e.UnitMainCode}]),e.StatDesc){case"待拣货":e.bgColorClass="bgBlue";break;case"拣货中":e.bgColorClass="bgPurple";break;case"已拣货":e.bgColorClass="bgGreen";break;default:break}a.push({code:e.ItemName,type:e.StatDesc,bgColorClass:e.bgColorClass});let l=e.LineList,r=[];l&&l.length&&l.forEach(e=>{r.push({ItemNote:""==e.ItemNote||void 0==e.ItemNote?"正常":e.ItemNote,BatchNumber:e.BatchNumber,Basic_WareHouseLocName:e.Basic_WareHouseLocName,PreQty:e.PreQty,Qty:void 0==e.Qty?0:e.Qty})});let o={titleList:a,detailDataList:s,formRule:i,LineList:e.LineList,testId:e.testId,BatchNumberData:r};t.detailDataAndTable.push(o)}),t.$nextTick(()=>{t.detailDataAndTable[0].selected=!0}))}}))()},scanOutWarehouseCompelete(){var e=this;return r()((function*(){let t=[];e.currentPageData.forEach(a=>{a.LineList.forEach(a=>{e.GridTextList[1].value>=e.GridTextList[0].value&&(a.DownShelfStat=3),e.GridTextList[1].value<e.GridTextList[0].value&&(0==e.GridTextList[1].value?a.DownShelfStat=1:a.DownShelfStat=2),t.push(a)})});let a=t.filter(e=>void 0==e.Qty);if(a&&a.length)return void e.showMessage({message:"请先扫描出库"});let s=JSON.stringify(t),i=o["a"].getObjet(n["a"].LOCAL_STORAGE_CUR_EMP_INFO),l={Sys_UserId:i.UserId};f.SaveItemOut(s,l).then(t=>{t.status&&(e.showMessage({message:"出库成功"}),e.selectedTab="出库单列表",e.dataList=[],e.getItemOutOrderList())})}))()},showPostPlugin(){let e=!1,t=this.currentPageData;e:for(let a=0;a<t.length;a++){let s=t[a].LineList;for(let t=0;t<s.length;t++)if(void 0==s[t].Qty||null==s[t].Qty){e=!0;break e}}e?this.showMessage({message:"请先扫描上架再审核"}):(this.confirmFlag=!0,this.dialogMessage="是否审核?",this.submitPostFlag=!0)},SubmitPost(){var e=this;return r()((function*(){let t=[];t.push(e.currentPageId);let a=yield f.ItemOutPostOperate(t);a.status&&(e.showMessage({message:"审核成功"}),e.getItemOutOrderList(),e.selectedTab="出库单列表",e.submitReceivedFlag=!1)}))()},GetWarehouseList(e){let t=o["a"].getObjet(n["a"].HOUSE_INFO);if(t&&t.length){if(t.forEach(e=>{e.text=e.name,e.icon="apps",e.value=e.id,e.status=!1,e.class="blackBlueStatus"}),this.houseList=t,this.isApplyOrderJump)return this.defaultHouseList[0]=e[0],void(this.currentWareHouseList[0]=e[0]);t[0].status=!0,this.defaultHouseList[0]=t[0],this.currentWareHouseList[0]=t[0]}},GetSelectLocList(){var e=this;return r()((function*(){let t=yield b.GetItemLocListViewById(e.currentWareHouseList[0].id,e.currentDialogSelectData[0].ItemId,e.currentBatchNumber);if(t.status){let a=t.data;if(0==a.length)return void e.showMessage({message:"此批次号没有库位信息"});let s=e.scanOutDialogDataList[0].separator;return s.forEach(t=>{t.List[0].value==e.currentBatchNumber&&a.forEach(e=>{let a=[];a.push(e.LocName),t.arr[1][0].Options=a})}),0==e.currentPageLocList.length?e.currentPageLocList=t.data:t.data.forEach(t=>{e.currentPageLocList.forEach(a=>{t.LocId!=a.LocId&&e.currentPageLocList.push(t)})}),a}}))()},openScanOutWarehousePage(e){this.addBorderColor(e,this.detailDataAndTable),window.event.stopPropagation(),this.scanOutWarehousePageDialog=!0,this.getScanOutDialogDataList(e)},openPickOutDetailPage(e){this.addBorderColor(e,this.detailDataAndTable),this.pickOutDetailPageDialog=!0},getScanOutDialogDataList(e){this.currentDialogSelectData=this.currentPageData.filter(t=>e.testId==t.testId),this.scanOutDialogDataList=[],this.itemOutDialogDataList=[];let t=this.currentDialogSelectData[0];this.GridTextList[0].value=t.PreQty;if(t&&Object.keys(t).length>0){let a=[],s=[],i=[];switch(s.push({label:"物料编码",value:t.ItemCode}),s.push({label:"领料设备",value:void 0==t.MachineName?"":t.MachineName}),i.push([{label:"规格型号",value:void 0==t.Spec?"":t.Spec},{label:"工单号",value:t.OrderCode},{label:"申请数量",value:t.PreQty,fontColor:"colorBlue",unit:t.UnitMainCode}],[{label:"工序",value:t.ProcessName},{label:"库存数量",value:t.ValidQty,fontColor:"colorBlue",unit:t.UnitMainCode},{label:"已发数量",value:t.RealQty,fontColor:"colorBlue",unit:t.UnitMainCode}]),t.StatDesc){case"待拣货":t.bgColorClass="bgBlue";break;case"拣货中":t.bgColorClass="bgPurple";break;case"已拣货":t.bgColorClass="bgGreen";break;default:break}a.push({code:t.ItemName,type:t.StatDesc,bgColorClass:t.bgColorClass});let l={titleList:a,detailDataList:s,formRule:i,separator:[],testId:t.testId};this.scanOutDialogDataList.push(l),this.itemOutDialogDataList.push(l),this.itemOutDialogDataList[0].BatchNumberData=this.detailDataAndTable.filter(e=>1==e.selected)[0].BatchNumberData,"待拣货"!=e.titleList[0].type&&e.LineList.forEach((e,t)=>{let a=[];a[0]=e,this.currentBatchNumber=e.BatchNumber,this.GetSelectLocList().then(e=>{a[0].ItemNote=e[0].ItemNote,this.AddDialogSeparatorList(a)})})}},AddDialogSeparatorList(e){var t=this;return r()((function*(){let a=t.scanOutDialogDataList[0].separator;a.forEach(e=>{e.selected=!1});let s={selected:!0,List:[],arr:[]};s.List.push({label:"批次",value:e[0].BatchNumber},{label:"批注",value:""==e[0].ItemNote?"正常":e[0].ItemNote}),s.arr.push([{label:"数量",value:void 0==e[0].Qty?e[0].PreQty:e[0].Qty,type:"number"}],[{label:"库位",value:e[0].Basic_WareHouseLocName,BatchNumber:e[0].BatchNumber,type:"select",Options:[""]}]),t.scanOutDialogDataList[0].separator.push(s),t.GridTextList[2].value=a.length,t.getQty()}))()},DeleteDialogSeparatorList(){let e=this.scanOutDialogDataList[0].separator;e.forEach((e,t)=>{e.List[0].value==this.currentBatchNumber&&this.scanOutDialogDataList[0].separator.splice(t,1)}),this.GridTextList[2].value=e.length,this.getQty()},EditDialogSeparatorList(){let e=this.scanOutDialogDataList[0].separator;e.forEach((e,t)=>{e.List[0].value==this.currentBatchNumber?e.selected=!0:e.selected=!1})},confirmDialogBack(e){if(this.confirmFlag=!1,e&&(this.submitPostFlag&&(this.SubmitPost(),this.submitPostFlag=!1),this.addDialogListFlag)){let e=JSON.parse(JSON.stringify(this.currentPageData[0].LineList));e[0].BatchNumber=this.currentBatchNumber,e[0].Id=c["a"].guid(),e[0].Basic_WareHouseLocCode="",e[0].Basic_WareHouseLocId="",e[0].Basic_WareHouseLocName="",e[0].Qty=0,e[0].PreQty=0,e[0].OperateTerminal=2,this.currentPageData[0].LineList.push(e[0]),this.GetSelectLocList().then(t=>{e[0].Basic_WareHouseLocCode=t[0].LocCode,e[0].Basic_WareHouseLocId=t[0].LocId,e[0].Basic_WareHouseLocName=t[0].LocName,e[0].ItemNote=t[0].ItemNote,this.AddDialogSeparatorList(e),this.addDialogListFlag=!1})}},inputBlur(){this.getQty()},getQty(){let e=this.scanOutDialogDataList[0].separator,t=0;e.forEach(e=>{t=c["a"].add(t,e.arr[0][0].value)}),this.GridTextList[1].value=t},dialogComplete(){let e=this.scanOutDialogDataList[0].separator;if(!e||!e.length)return void this.showMessage({message:"至少扫描一条单据"});let t=e.find(e=>""==e.arr[1][0].value);if(void 0!=t&&Object.keys(t).length)return void this.showMessage({message:"请选择库位"});let a=this.detailDataAndTable.filter(e=>1==e.selected),s=this.currentPageData.filter(e=>e.testId==a[0].testId)[0].LineList;a[0].BatchNumberData=[],e.forEach(e=>{let t=e.arr,i=e.List;s.forEach(e=>{if(e.BatchNumber==i[0].value){a[0].BatchNumberData.push({ItemNote:""==i[1].value||void 0==i[1].value?"正常":i[1].value,BatchNumber:i[0].value,Basic_WareHouseLocName:t[1][0].value,PreQty:e.PreQty,Qty:t[0][0].value});let s=this.currentPageLocList.filter(e=>e.LocName==t[1][0].value);s&&s.length&&(e.Basic_WareHouseLocId=s[0].LocId,e.Basic_WareHouseLocCode=s[0].LocCode,e.Basic_WareHouseLocName=s[0].LocName,e.Qty=parseFloat(t[0][0].value))}})});let i=s.filter(t=>!e.some(e=>e.List[0].value===t.BatchNumber));i&&i.length&&i.forEach(e=>{s.forEach((t,a)=>{t.BatchNumber==e.BatchNumber&&s.splice(a,1)})}),this.scanOutWarehousePageDialog=!1},dialogClear(){this.scanOutDialogDataList[0].separator=[],this.getQty()},popupShow(e){console.log(e);let t=this.scanOutDialogDataList[0].separator;t.forEach(t=>{t.List[0].value==e[0].BatchNumber?(t.selected=!0,this.currentBatchNumber=t.List[0].value):t.selected=!1}),this.GetSelectLocList()},getCurrentData(e,t){this.currentDate=t,this.currentSelectDate=e,this.getItemOutOrderList(!0)},getModeSelectionData(e){this.modeSelection=e},beforeHideStatus(){this.getItemOutOrderList()},beforeHideHouse(e){this.defaultHouseList=e,this.currentWareHouseList=e,this.getItemOutOrderList()},removeNode(e){if(1==this.showChipDataList.length)return;let t=this.showChipDataList.findIndex(t=>t.name==e.name);this.showChipDataList.splice(t,1)},selectUser(){this.$router.push({path:"/SelectList",query:{path:"StockCreateOrderPickOut",list:this.showChipDataList,isDefault:!1}})},addBorderColor(e,t){t.forEach(e=>{e.selected=!1}),e.selected=!0,this.$forceUpdate(),this.$set(e,"selected",!0)},OutCodeEnter(){this.getItemOutOrderList("",!0).then(e=>{if(e&&e.length){this.OutCode="";let t=this.dataList.filter(t=>t.titleList[0].code==e[0].Code);t&&t.length&&this.addBorderColor(t[0])}else this.OutCode="",this.getItemOutOrderList(),this.showMessage({message:"无此出库单"})})},ItemCodeEnter(){let e=!0,t="";this.detailDataAndTable.forEach(e=>{e.selected=!1}),this.detailDataAndTable.forEach((a,s)=>{a.detailDataList[0].value.indexOf(this.ItemCode)>-1&&(0==t.length&&(t=s),a.selected=!0,e=!1)}),e&&this.showMessage({message:"没有此物料"}),this.ItemCode=""},DialogBatchNumberEnter(e){var t=this;return r()((function*(){if(void 0==e&&t.DialogBatchNumber,t.scanOutWarehousePageDialog){if("add"==t.modeSelection){let a=t.currentDialogSelectData[0].LineList,s=a.filter(t=>t.BatchNumber==e);console.log(s),s&&s.length?(t.currentBatchNumber=e,t.GetSelectLocList().then(e=>{s[0].ItemNote=e[0].ItemNote,t.AddDialogSeparatorList(s)})):(t.currentBatchNumber=e,t.confirmFlag=!0,t.dialogMessage="此批次条码不在系统推荐发料条码范围内，是否确认发料",t.addDialogListFlag=!0)}if("delete"==t.modeSelection){let a=t.currentDialogSelectData[0].LineList,s=a.filter(t=>t.BatchNumber==e);s&&s.length?(t.currentBatchNumber=e,t.DeleteDialogSeparatorList()):t.showMessage({message:"此批次条码不在列表内"})}if("edit"==t.modeSelection){let a=t.currentDialogSelectData[0].LineList,s=a.filter(t=>t.BatchNumber==e);s&&s.length?(t.currentBatchNumber=e,t.EditDialogSeparatorList()):t.showMessage({message:"此批次条码不在列表内"})}}}))()}},watch:{scan:{handler(e,t){if(0!=e&&"0"!=e){this.DialogBatchNumberEnter(e)}},deep:!0},showHeight:function(){document.getElementsByClassName("detailMain");if("出库单列表"==this.selectedTab&&this.docmHeight<=this.showHeight&&""!=this.OutCode&&this.OutCodeEnter(),"出库单明细"==this.selectedTab){let e=document.getElementsByClassName("detailPage-card-list"),t=document.getElementsByClassName("dialog-card-list");this.docmHeight>this.showHeight?"扫描出库"==this.scanDialogselectedTab?(this.isShowDialogBtn=!1,t[0].style.marginBottom="0px"):(this.buttonVisible=!1,e[0].style.marginBottom="0px"):"扫描出库"==this.scanDialogselectedTab?(this.isShowDialogBtn=!0,t[0].style.marginBottom="50px"):(this.buttonVisible=!0,this.ItemCodeEnter(),e[0].style.marginBottom="50px")}}},activated(){0==this.$route.query.isDefault?(this.selectedTab="出库单明细",this.showChipDataList=this.$route.query.list):this.isApplyOrderJump||(this.defaultShowChipDataList=this.$route.query.list,this.showChipDataList=this.$route.query.list)}},L=v,C=(a("b2be"),a("9ca4")),y=a("429b"),D=a("7460"),S=a("27f9"),w=a("0016"),k=a("eb85"),O=a("9c40"),x=a("3b73"),B=a("24e8"),P=a("b047"),I=a("66e5"),N=a("714f"),T=a("5739"),M=a.n(T),H=Object(C["a"])(L,s,i,!1,null,"88df4e14",null);t["default"]=H.exports;M()(H,"components",{QTabs:y["a"],QTab:D["a"],QInput:S["a"],QIcon:w["a"],QSeparator:k["a"],QBtn:O["a"],QExpansionItem:x["a"],QDialog:B["a"],QChip:P["a"],QItem:I["a"]}),M()(H,"directives",{Ripple:N["a"]})},f0c9:function(e,t,a){"use strict";var s=a("e557"),i=a.n(s);i.a},f2a3:function(e,t,a){},fad3:function(e,t,a){"use strict";a.r(t);var s,i,l=a("9ca4"),r={},o=Object(l["a"])(r,s,i,!1,null,null,null);t["default"]=o.exports},fe8d:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var s=a("c973"),i=a.n(s),l=a("b5c6"),r=a("7ac0");const o="/api/Stock_ItemViewService";class n extends r["a"]{constructor(){super(o)}GetStockItemViewList(e,t,a,s,r){return i()((function*(){let i={wareHouseId:e,pageIndex:s,pageSize:r,itemCode:t,itemName:a};return yield l["a"].post(o+"/GetStockItemViewList",i)}))()}GetValidQtyByItemBatchNo(e,t,a,s){return i()((function*(){let i={itemCode:e,batchNumber:t,wareHouseCode:a,wareHouseLocCode:s};return yield l["a"].post(o+"/GetValidQtyByItemBatchNo",i)}))()}GetByItemBatchNumber(e,t,a){return i()((function*(){let s={batchNumber:e,pageIndex:t,pageSize:a};return yield l["a"].post(o+"/GetByItemBatchNumber",s)}))()}GetItemLocListViewById(e,t,a){return i()((function*(){let s={wareHouseId:e,itemId:t,batchNumber:a};return yield l["a"].post(o+"/GetItemLocListViewById",s)}))()}GetItemCodeByBatchNumber(e){return i()((function*(){let t={batchNumber:e};return yield l["a"].post(o+"/GetItemCodeByBatchNumber",t)}))()}}}}]);